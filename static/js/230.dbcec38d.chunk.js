(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[230],{4492:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ae}});var r=n(885),i=n(2791),o=n(4162),a=n(5814),s=n(3811),l=n(6227),c=(0,n(2795).ZP)("https://kq-1-1a499.firebaseio.com/"),d="swdb/",u=function(e,t){var n,r,i="".concat(d).concat(e,"/favorites");return n=i,r=t,c.post(n+".json",r).then((function(e){return e.data})).catch((function(e){throw console.log("App error POST: ",e),e}))},f=function(e,t){var n,r,i="".concat(d).concat(e,"/favorites/").concat(t.fireId);return n=i,r=t,c.put(n+".json",r)},p=n(1413),v=n(2068),m=n(6884),x=n(1070),h=n.n(x),j=n(1582),Z=function(e){var t=e.userId,n=e.params,o=void 0===n?{}:n,a=(0,i.useState)(),s=(0,r.Z)(a,2),l=s[0],c=s[1];(0,m.Z)((function(){var e=h()("https://kq-1-1a499.firebaseio.com/","/swdb/:user/favorites.json",(0,p.Z)({user:"yqu"},o));c(e)}),[t,o]);var d=(0,v.Z)((function(){return l||null}),(function(e){return(0,j.k)(e)})),u=d.data,f=(d.isValidating,d.error),x=d.isLoading,Z={};u&&Object.keys(null!==u&&void 0!==u?u:{}).forEach((function(e){Z[u[e].episodeId]=(0,p.Z)({fireId:e},u[e])}));return{data:Z,loading:x,error:f}},g=n(799),b=function(e){var t=e.params,n=void 0===t?{refetch:0}:t,o=(0,i.useState)(),a=(0,r.Z)(o,2),s=a[0],l=a[1];(0,m.Z)((function(){var e=h()("https://swapi.tech/api/","/films",(0,p.Z)({},n));l(e)}),[n]);var c=(0,g.ZP)((function(){return s||null}),(function(e){return(0,j.k)(e,1e3)}),{revalidateOnFocus:!1,revalidateIfStale:!0}),d=c.data,u=c.isValidating,f=c.error,v=c.isLoading;return{allFilms:null===d||void 0===d?void 0:d.result,allFilmsLoading:v,allFilmsValidating:u,allFilmsError:f}},y=n(6580),w=n(184);function C(e){var t=e.size,n=void 0===t?40:t,r=e.color,i=void 0===r?"grey.500":r;return(0,w.jsx)(o.Z,{sx:{color:i},spacing:1,direction:"row",children:(0,w.jsx)(y.Z,{color:"inherit",size:n})})}var F=n(4169),k=n(5705),T=n(8254),S=n(6459),P=n(5051),A=function(e){var t=Object.assign({},((0,S.Z)(e),e)),n=(0,k.u6)(),o=n.values,a=(n.submitForm,function(e,t){var n=(0,i.useState)(e),o=(0,r.Z)(n,2),a=o[0],s=o[1];return(0,i.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(o,600));return(0,m.Z)((function(){t.filterChange(a)}),[a]),(0,w.jsx)(k.l0,{autoComplete:"off",style:{width:"100%"},children:(0,w.jsx)(P.Z,(0,p.Z)({},t.movieNameFilter))})},D=n(6739),I=n(2167),N=function(e){var t=e.filterChange,n=(0,i.useCallback)((function(e){t(e)}),[t]),r=function(e){var t=""!==e.values.movieName;return{name:"movieName",type:"text",props:{placeholder:"Filter by name",variant:"standard",InputProps:{endAdornment:(0,w.jsx)(T.Z,{position:"end",children:t&&(0,w.jsx)(s.Z,{onClick:function(){e.resetForm()},children:(0,w.jsx)(D.Z,{})})}),startAdornment:(0,w.jsx)(T.Z,{position:"start",children:(0,w.jsx)(I.Z,{})})}}}};return(0,w.jsx)(k.J9,{initialValues:{movieName:""},onSubmit:function(e){},children:function(e){return(0,w.jsx)(A,{movieNameFilter:r(e),filterChange:n})}})},_=n(8928),M=n(6875),E=n(5194),L=n(199),U=n(7205),z=n(4565),O=n(1087),R=n(2797),Y=n(4142),q=function(){var e=(0,Y.Z)();return{isMobile:(0,R.Z)(e.breakpoints.down("sm")),isMed:(0,R.Z)(e.breakpoints.down("md")),isLg:(0,R.Z)(e.breakpoints.down("lg")),isXl:(0,R.Z)(e.breakpoints.down("xl"))}},B=n(7237),K=n(2426),V=n.n(K),W=function(e){var t="",n=null!==e&&void 0!==e&&e.lastUpdated?V()(null===e||void 0===e?void 0:e.lastUpdated).fromNow():"";return t=null!==e&&void 0!==e&&e.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==e&&void 0!==e&&e.lastUpdated&&(t=t+". "+(e.isCurrentFavorite?"Favorited ":"Unfavorited ")+n),t},H=n(6431),X=n.n(H),J=function(e){var t=e.date,n=void 0===t?0:t,r=e.fromNow,i=void 0===r||r,o=e.format,s=void 0===o?"MM/DD/YY HH:mm":o;return(0,w.jsx)(a.Z,{title:n?V()(n).format(s):"No date found",children:(0,w.jsx)("span",{children:n?(0,w.jsx)(X(),{date:n,fromNow:i}):(0,w.jsx)(w.Fragment,{children:"N/A"})})})},$=function(e){q().isXl;return(0,w.jsxs)(_.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:4,children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(L.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(e.film.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,w.jsxs)(E.Z,{children:[(0,w.jsxs)(o.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,w.jsx)(z.Z,{gutterBottom:!0,variant:"h5",component:O.rU,to:"./".concat(e.uid),sx:{fontFamily:"Poppins",fontWeight:"500"},children:e.film.title}),(0,w.jsxs)(z.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",e.film.episode_id]})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsxs)(z.Z,{variant:"body2",color:"text.secondary",children:["Released: ",(0,w.jsx)(J,{date:e.film.release_date,format:"MMM Do YYYY"})]}),(0,w.jsxs)(z.Z,{variant:"body2",color:"text.secondary",children:["Directed by: ",e.film.director]}),(0,w.jsxs)(z.Z,{variant:"body2",color:"text.secondary",children:["Produced by: ",e.film.producer]}),(0,w.jsx)(z.Z,{variant:"body2",color:"text.primary",children:e.film.opening_crawl})]})]})]}),(0,w.jsxs)(M.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,w.jsx)("div",{children:(0,w.jsx)(U.Z,{size:"small",component:O.rU,to:"./".concat(e.uid),children:"Learn More"})}),(0,w.jsx)("div",{children:(0,w.jsx)(s.Z,{"aria-label":"favorite",onClick:function(){e.onFavoriteToggle(e.film,e.favorited)},title:W(e.favorited),children:(0,w.jsx)(B.Z,{color:e.film.userFavorited?"error":"disabled"})})})]})]})},G=n(2892),Q=n(4666),ee=n(3906);function te(e){var t=e.toolbarProps,n=e.children;return(0,w.jsx)(G.Z,(0,p.Z)((0,p.Z)({elevation:0},t),{},{children:(0,w.jsx)(Q.Z,{variant:"regular",sx:{bgcolor:function(e){return"light"===e.palette.mode?ee.s[100]:null},color:function(e){return"light"===e.palette.mode?"#000":null}},children:n})}))}var ne=n(1372),re=n(9841),ie=n(824),oe="yqu",ae=function(){Array.from(Array(3).keys());var e=(0,i.useState)(!1),t=(0,r.Z)(e,2),n=(t[0],t[1]),c=(0,i.useState)(0),d=(0,r.Z)(c,2),p=d[0],v=d[1],x=(0,i.useState)({}),h=(0,r.Z)(x,2),j=h[0],g=h[1],y=q().isMobile,k=(0,O.lr)(),T=(0,r.Z)(k,2),S=T[0],P=T[1],A=S.get("moviePageDisplayMode"),D=(0,i.useState)(A),I=(0,r.Z)(D,2),_=I[0],M=(I[1],(0,i.useState)([])),E=(0,r.Z)(M,2),L=E[0],U=E[1],z=Z({userId:oe,params:{fetchTime:p}}),R=z.data,Y=(z.error,z.loading,b({params:j})),B=Y.allFilms,K=Y.allFilmsError,V=Y.allFilmsLoading,W=Y.allFilmsValidating;(0,m.Z)((function(){U(function(e,t){var n=null!==e&&void 0!==e?e:[];return n&&n.sort((function(e,t){return e.properties.episode_id>t.properties.episode_id?1:-1})),n.forEach((function(e){var n;e.properties.userFavorited=null===(n=t[e.properties.episode_id])||void 0===n?void 0:n.isCurrentFavorite})),n}(B,R))}),[B,R]);var H=function(e,t){var r=e.url,i=r.split("/")[r.split("/").length-1],o={filmUrl:r,filmId:i,lastUpdated:(new Date).getTime(),episodeId:e.episode_id,isCurrentFavorite:!0};n(!0),t?(o.isCurrentFavorite=!t.isCurrentFavorite,o.fireId=t.fireId,f(oe,o).then((function(e){})).catch((function(e){})).finally((function(){n(!1),v((new Date).getTime())}))):u(oe,o).then((function(e){})).catch((function(e){})).finally((function(){n(!1),v((new Date).getTime())}))},X=(0,i.useCallback)((function(e){e.movieName?g({title:e.movieName}):g({})}),[]);return V?(0,w.jsx)(F.Z,{count:4}):K?(0,w.jsx)("div",{children:"Error Page"}):(null===L||void 0===L?void 0:L.length)<1?(0,w.jsx)("div",{children:"No films found."}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,{toolbarProps:{position:"sticky",sx:{top:y?"56px":"64px"}},children:(0,w.jsxs)(l.Z,{container:!0,xs:12,flexDirection:{xs:"row",sm:"row"},justifyContent:"space-between",alignItems:"center",children:[(0,w.jsx)(l.Z,{xs:10,sm:4,children:(0,w.jsxs)(o.Z,{direction:"row",justifyContent:"start",alignItems:"center",children:[(0,w.jsx)(N,{filterChange:X}),W&&(0,w.jsx)(C,{size:20})]})}),(0,w.jsx)(l.Z,{xs:2,sm:8,children:(0,w.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",alignItems:"center",children:(0,w.jsx)(a.Z,{title:"Switch to ".concat(se(_)),children:(0,w.jsx)(s.Z,{onClick:function(){var e={moviePageDisplayMode:se(_)};P(e)},children:_===ne.K.CARD?(0,w.jsx)(re.Z,{}):(0,w.jsx)(ie.Z,{})})})})})]})}),(0,w.jsx)(o.Z,{direction:"column",p:2,children:(0,w.jsx)(l.Z,{container:!0,disableEqualOverflow:!0,rowSpacing:4,children:null===L||void 0===L?void 0:L.map((function(e){return(0,w.jsx)(l.Z,{xs:12,sm:4,smOffset:4,children:(0,w.jsx)($,{film:e.properties,onFavoriteToggle:H,favorited:R[e.properties.episode_id],uid:e.uid})},e.properties.episode_id)}))})})]})},se=function(e){return e&&e===ne.K.CARD?ne.K.TABLE:ne.K.CARD}},4169:function(e,t,n){"use strict";n(2791);var r=n(1441),i=n(4162),o=n(763),a=n(6227),s=n(184);t.Z=function(e){var t=e.count;return(0,s.jsxs)(a.Z,{direction:"column",padding:2,xs:12,children:[(0,s.jsx)(a.Z,{xs:12,md:6,children:(0,s.jsx)(r.Z,{variant:"text",sx:{fontSize:"2rem"}})}),(0,s.jsx)(a.Z,{container:!0,spacing:2,children:(0,o.times)(t,(function(e){return(0,s.jsxs)(a.Z,{xs:12,sm:12,md:!0,children:[(0,s.jsxs)(i.Z,{direction:"row",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,s.jsx)(r.Z,{variant:"text",sx:{fontSize:"2rem",width:"10rem"}}),(0,s.jsx)(r.Z,{variant:"circular",width:40,height:40})]}),(0,s.jsx)(r.Z,{variant:"rectangular",height:"30rem"})]},e)}))})]})}},1582:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var r=n(4165),i=n(5861),o=n(4569),a=n.n(o),s=n(5316),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=o.length>1&&void 0!==o[1]?o[1]:0)){e.next=4;break}return e.next=4,(0,s._)(n);case 4:return e.prev=4,e.next=7,a().get(t,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",i.data);case 10:return e.abrupt("return",Promise.reject(i));case 13:throw e.prev=13,e.t0=e.catch(4),console.error("App error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},5051:function(e,t,n){"use strict";var r=n(1413),i=n(5987),o=(n(2791),n(9911)),a=n(5705),s=n(1898),l=n(7924),c=n(763),d=n(184),u=["label","name","validate","disabled","placeholder"];t.Z=function(e){var t=e.label,n=e.name,f=e.validate,p=e.disabled,v=e.placeholder,m=(0,i.Z)(e,u),x=(0,a.u6)();return(0,d.jsxs)(s.Z,{fullWidth:!0,size:"small",children:[(0,d.jsx)(a.gN,(0,r.Z)({as:o.Z,label:(0,c.startCase)(t),name:n,id:n,error:x.touched[n]&&!!x.errors[n],validate:f,variant:"standard",disabled:p,placeholder:(0,c.upperFirst)(null!==v&&void 0!==v?v:t)},m.props)),(0,d.jsx)(l.Z,{id:"".concat(n,"-helper-text"),error:x.touched[n]&&!!x.errors[n],children:x.touched[n]&&x.errors[n]?(0,d.jsx)(a.Bc,{name:n,render:function(e){return(0,c.upperFirst)(e)}}):(0,d.jsx)(d.Fragment,{children:m.helperText})})]})}},1372:function(e,t,n){"use strict";var r;n.d(t,{K:function(){return r}}),function(e){e.TABLE="table",e.CARD="card"}(r||(r={}))},2795:function(e,t,n){"use strict";n.d(t,{e$:function(){return o}});var r=n(4569),i=n.n(r),o=function(e){var t=e.url,n=e.body,r=e.onSuccess,o=e.onFailure,a=e.onFinally;e.abortController;i().post(t,n).then((function(e){r&&r(e.data)})).catch((function(e){console.log("App error POST: ",e),o&&o(e)})).finally((function(){a&&a()}))};t.ZP=function(e){return i().create({baseURL:e,timeout:5e3,headers:{"Content-Type":"application/json"},responseType:"json"})}},5316:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){setTimeout((function(){t()}),e)}))}n.d(t,{_:function(){return r}})},4654:function(){}}]);
//# sourceMappingURL=230.dbcec38d.chunk.js.map