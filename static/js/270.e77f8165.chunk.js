"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[270],{758:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(96015),i=t(94162),o=t(4565),a=t(80184);function s(e){var n=e.reason,t=e.debug;return(0,a.jsx)(r.Z,{marginY:5,width:"100%",children:(0,a.jsxs)(i.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"h5",sx:{textTransform:"uppercase"},children:"An error has occurred!"}),(0,a.jsxs)(i.Z,{direction:"column",spacing:1,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"body1",fontWeight:700,children:"REASON"}),(0,a.jsx)(o.Z,{variant:"body2",children:n})]}),(0,a.jsxs)(i.Z,{direction:"column",spacing:1,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"body1",fontWeight:700,children:"DEBUG"}),(0,a.jsx)(o.Z,{variant:"body2",component:"div",children:(0,a.jsx)("pre",{children:(0,a.jsx)("code",{style:{display:"flex",textAlign:"center"},children:JSON.stringify(t)})})})]})]})})}},10270:function(e,n,t){t.r(n),t.d(n,{default:function(){return ae}});var r=t(1413),i=t(70885),o=t(72791),a=t(94162),s=t(4565),c=t(17205),l=t(96015),d=t(36227),u=t(48928),f=t(96875),v=t(55194),p=t(38943),x=t(11087),h=t(17237),g=t(36976),Z=t(13811),m=t(72426),j=t.n(m),y=function(e){var n="",t=null!==e&&void 0!==e&&e.lastUpdated?j()(null===e||void 0===e?void 0:e.lastUpdated).fromNow():"";return n=null!==e&&void 0!==e&&e.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==e&&void 0!==e&&e.lastUpdated&&(n=n+". "+(e.isCurrentFavorite?"Favorited ":"Unfavorited ")+t),n},b=t(75814),w=t(46431),I=t.n(w),F=t(80184),C=function(e){var n=e.date,t=void 0===n?0:n,r=e.fromNow,i=void 0===r||r,o=e.format,a=void 0===o?"MM/DD/YY HH:mm":o;return(0,F.jsx)(b.Z,{title:t?j()(t).format(a):"No date found",children:(0,F.jsx)(s.Z,{component:"span",display:"flex",alignItems:"center",justifyContent:"center",children:t?(0,F.jsx)(I(),{date:t,fromNow:i,format:i?void 0:a,interval:6e4}):(0,F.jsx)(F.Fragment,{children:"N/A"})})})},L=t(70773),k=t(51070),T=t.n(k),_=t(64317),S=t(74165),M=t(15861),A=t(95273),P=t(30199),E=t(71435),U=t(85153),D=t(11904),N=t(88818),O=(0,A.createAsyncThunk)("[FAVORITE FILMS / API / Switch] Get all favorites with params",function(){var e=(0,M.Z)((0,S.Z)().mark((function e(n,t){var i,o,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=T()(L.Ko,"/swdb/:user/favorites.json",(0,r.Z)({},null===n||void 0===n?void 0:n.httpParams)),o=(0,N.U)(i,{signal:t.signal}).pipe((0,P.w)((function(e){if(e.ok)return e.json();throw new Error("API Error: "+e.status)}))),e.next=4,(0,E.n)(o);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),R=(0,A.createAsyncThunk)("[FAVORITE FILMS / API / Exhaust] Toggle favorite",function(){var e=(0,M.Z)((0,S.Z)().mark((function e(n,t){var i,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,r.Z)((0,r.Z)({},n.fav),{},{lastUpdated:(new Date).getTime(),isCurrentFavorite:n.favStatus}),o=D.h.put(n.url,i).pipe((0,U.U)((function(e){return e.response}))),e.abrupt("return",(0,E.n)(o));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),{condition:function(e,n){return!1}}),z=((0,A.createAsyncThunk)("[FAVORITE FILMS / API / Merge] Toggle favorite",function(){var e=(0,M.Z)((0,S.Z)().mark((function e(n,t){var i,o,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,r.Z)((0,r.Z)({},n.fav),{},{lastUpdated:(new Date).getTime(),isCurrentFavorite:n.favStatus}),o=D.h.put(n.url,i).pipe((0,U.U)((function(e){return e.response}))),e.next=4,(0,E.n)(o);case 4:return a=e.sent,t.dispatch(O({httpParams:{user:"yqu"}})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),{condition:function(e,n){return!0}}),(0,A.createAsyncThunk)("[FAVORITE FILMS / API / Exhaust] Add new favorite",function(){var e=(0,M.Z)((0,S.Z)().mark((function e(n,t){var i,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,r.Z)((0,r.Z)({},n.fav),{},{lastUpdated:(new Date).getTime(),isCurrentFavorite:n.favStatus}),o=D.h.post(n.url,i).pipe((0,U.U)((function(e){return e.response}))),e.abrupt("return",(0,E.n)(o));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),{condition:function(e,n){return!1}}));function Y(e){var n=e.film,t=e.favoriteData,r=e.uid,i=e.userId,o=e.allFavoritesLoading,l=(e.favToggleLoading,(0,_.T)());return(0,F.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:2,children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(p.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(n.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)(a.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,F.jsx)(s.Z,{gutterBottom:!0,variant:"h5",component:x.rU,to:"./".concat(r),sx:{fontWeight:"500"},children:n.title}),(0,F.jsxs)(s.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",n.episode_id]})]}),(0,F.jsxs)(a.Z,{spacing:1,children:[(0,F.jsxs)(a.Z,{direction:"row",spacing:.5,children:[(0,F.jsx)(s.Z,{variant:"body1",color:"text.secondary",children:"Released:"}),(0,F.jsx)(s.Z,{variant:"body1",color:"text.secondary",children:(0,F.jsx)(C,{date:n.release_date,format:"MMM Do YYYY"})})]}),(0,F.jsxs)(s.Z,{variant:"body1",color:"text.secondary",children:["Directed by: ",n.director]}),(0,F.jsxs)(s.Z,{variant:"body1",color:"text.secondary",children:["Produced by: ",n.producer]}),(0,F.jsx)(s.Z,{variant:"body1",color:"text.primary",children:n.opening_crawl})]})]})]}),(0,F.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,F.jsx)("div",{children:(0,F.jsx)(c.Z,{size:"small",component:x.rU,to:"./".concat(r),children:"See More"})}),(0,F.jsx)("div",{children:(0,F.jsx)(Z.Z,{"aria-label":"favorite",onClick:function(){var e,t,r,o=n.url,a=o.split("/")[o.split("/").length-1],s=T()(L.Ko,"swdb/:user/favorites".concat(null!==(e=n.favorite)&&void 0!==e&&e.fireId?"/"+(null===(t=n.favorite)||void 0===t?void 0:t.fireId):"",".json"),{user:i}),c={filmUrl:o,filmId:a,lastUpdated:(new Date).getTime(),episodeId:n.episode_id,isCurrentFavorite:!0};n.favorite?(c.isCurrentFavorite=!n.favorite.isCurrentFavorite,c.fireId=n.favorite.fireId,r=l(R({fav:c,url:s,favStatus:!n.favorite.isCurrentFavorite}))):r=l(z({fav:c,url:s,favStatus:!0})),r.then((function(e){return l(O({httpParams:{user:"yqu"}}))}))},title:y(t),disabled:!!o,children:o?(0,F.jsx)(g.Z,{}):(0,F.jsx)(h.Z,{color:null!==t&&void 0!==t&&t.isCurrentFavorite?"error":"disabled"})})})]})]})}var W,q=t(73808),V=t(54596);!function(e){e.TABLE="table",e.CARD="card"}(W||(W={}));var B=t(57689),H=t(758),G=t(70194),J=t(31651),K=t(26758),X=t(45173),$=t(96580),Q=t(23176),ee=t(32619),ne=t(25777),te=t(47194),re=t(46426),ie=t(79729),oe="films",ae=function(){var e=(0,_.T)(),n=(0,x.lr)(),t=(0,i.Z)(n,2),u=t[0],f=(t[1],u.get("moviePageDisplayMode")),v=(0,V.Z)().isMobile,p=(0,B.s0)(),h=(0,o.useState)(f),g=(0,i.Z)(h,2),Z=(g[0],g[1],(0,ie.oo)()),m=Z.data,j=Z.isLoading,y=Z.isFetching,b=(0,G.$9)(void 0,{selectFromResult:function(e){var n;return(0,r.Z)((0,r.Z)({},e),{},{dataWithFavs:null===(n=e.data)||void 0===n?void 0:n.map((function(e){var n=null===m||void 0===m?void 0:m.find((function(n){return n.episodeId===e.properties.episode_id}));return(0,r.Z)((0,r.Z)({},e),{},{favorite:n})})).sort((function(e,n){return e.properties.episode_id>n.properties.episode_id?1:-1}))})}}),w=(b.data,b.dataWithFavs),I=b.isLoading,C=b.isFetching,L=b.fulfilledTimeStamp,k=b.startedTimeStamp,T=(b.refetch,b.isError),S=b.error,M=(null!==L&&void 0!==L?L:0)-(null!==k&&void 0!==k?k:0);return I?(0,F.jsx)(a.Z,{direction:"column",width:"100%",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,F.jsx)(J.Z,{message:oe})}):T?(0,F.jsx)(H.Z,{reason:S.status,debug:S.error}):w?(0,F.jsxs)(a.Z,{direction:"column",width:"100%",children:[(0,F.jsx)(q.Z,{toolbarProps:{position:"sticky",sx:{top:v?"56px":"64px"}},children:(0,F.jsxs)(d.Z,{container:!0,xs:12,children:[(0,F.jsx)(d.Z,{xs:4,children:(0,F.jsx)(a.Z,{direction:"row",justifyContent:"start",alignItems:"center",width:"100%",children:(0,F.jsx)(K.Z,{entity:oe,onResultSelect:function(e){p("./".concat(null===e||void 0===e?void 0:e.uid))}})})}),(0,F.jsx)(d.Z,{xs:8,xsOffset:"auto",display:"flex",children:(0,F.jsxs)(a.Z,{direction:"row",justifyContent:"end",alignItems:"center",width:"100%",spacing:2,"data-tooltip-id":"fetch-information",children:[C&&(0,F.jsx)($.Z,{size:20}),!C&&(0,F.jsxs)(s.Z,{fontSize:11,component:"div",children:["Last fetched ",(0,F.jsx)(te.Z,{dateInMilli:null!==L&&void 0!==L?L:0}),", took: ",(0,F.jsx)(ee.Z,{durationInMilli:M})]}),(0,F.jsx)(c.Z,{variant:"outlined",startIcon:(0,F.jsx)(Q.Z,{}),onClick:function(){e(ie.Kx.util.invalidateTags([{type:"Favorites"}]))},children:"Refresh Favorites"}),(0,F.jsx)(c.Z,{variant:"outlined",startIcon:(0,F.jsx)(Q.Z,{}),onClick:function(){e(G.ak.util.invalidateTags([{type:"Films"}]))},children:"Refresh Films"})]})})]})}),(0,F.jsx)(l.Z,{mt:2,mx:v?2:0,children:(0,F.jsx)(X.Z,{size:"med",children:null===w||void 0===w?void 0:w.map((function(e){return(0,F.jsx)(d.Z,{xs:12,sm:8,smOffset:2,mb:3,children:(0,F.jsx)(Y,{userId:"yqu",film:e.properties,favoriteData:e.favorite,uid:e.uid,allFavoritesLoading:j,favToggleLoading:y})},e.properties.episode_id)}))})}),(0,F.jsx)(re.u,{id:"fetch-information",place:"bottom",offset:30,children:(0,F.jsx)(a.Z,{direction:"column",justifyContent:"center",alignItems:"center",children:(0,F.jsxs)(l.Z,{children:["Last fetched: ",(0,F.jsx)(te.Z,{dateInMilli:L})," ( ",(0,F.jsx)(ne.Z,{dateInMilli:L})," ago )."]})})})]}):(0,F.jsx)(F.Fragment,{})}},26758:function(e,n,t){var r=t(1413),i=t(70885),o=t(94162),a=t(4218),s=t(96015),c=t(59911),l=t(40255),d=t(72791),u=t(88163),f=t(25329),v=t(15290),p=t(79723),x=t(80184);function h(e){var n=e.params,t=e.entity;return(0,x.jsx)(c.Z,(0,r.Z)((0,r.Z)({},n),{},{label:"Filter ".concat(t),variant:"standard"}))}n.Z=function(e){var n=e.entity,t=e.onResultSelect,r=(0,d.useState)([]),c=(0,i.Z)(r,2),g=c[0],Z=c[1],m=(0,d.useState)(null),j=(0,i.Z)(m,2),y=j[0],b=j[1],w=(0,d.useState)(null),I=(0,i.Z)(w,2),F=I[0],C=I[1],L=(0,p.N)(F,600),k=(0,f.rw)(L?{entity:n,name:L}:l.skipToken),T=k.data,_=k.isFetching;return k.error,k.isError,k.refetch,(0,d.useEffect)((function(){Z(null!==T&&void 0!==T?T:[])}),[T]),(0,u.Z)((function(){}),[L]),(0,x.jsxs)(o.Z,{direction:"row",justifyContent:"start",alignItems:"center",width:"100%",children:[(0,x.jsx)(a.Z,{disablePortal:!0,id:"search-entity-autocomplete",options:g,fullWidth:!0,autoHighlight:!0,blurOnSelect:!0,filterOptions:function(e){return e},value:y,getOptionLabel:function(e){var n;return null!==(n=e.properties.name)&&void 0!==n?n:e.properties.title},noOptionsText:"Search for ".concat(n),loading:_,renderInput:function(e){return(0,x.jsx)(h,{params:e,entity:n})},onChange:function(e,n){var r;Z((r=n)?[r]:g),b(r),t(r)},onInputChange:function(e,n){return function(e,n){C(n)}(0,n)},isOptionEqualToValue:function(e,n){return e.uid===n.uid}}),(0,x.jsx)(s.Z,{ml:2,children:_&&(0,x.jsx)(v.Z,{size:20})})]})}},47194:function(e,n,t){var r=t(29158),i=t(80184);n.Z=function(e){var n=e.dateInMilli;return(0,i.jsx)(i.Fragment,{children:void 0!==n&&(0,r.Z)(n,"MM/dd/yyyy p")})}},25777:function(e,n,t){var r=t(55763),i=t(80184);n.Z=function(e){var n=e.dateInMilli;return(0,i.jsx)(i.Fragment,{children:void 0!==n&&(0,r.Z)(n,{includeSeconds:!0})})}},32619:function(e,n,t){var r=t(51943),i=t(80184);n.Z=function(e){var n=e.durationInMilli;return(0,i.jsx)(i.Fragment,{children:n>1e3?(0,r.Z)(0,n,{includeSeconds:!0}):n+" ms"})}},45173:function(e,n,t){var r=t(36227),i=t(80184);n.Z=function(e){var n=e.size,t=void 0===n?"med":n,o=e.children;return(0,i.jsx)(r.Z,{container:!0,spacing:0,xs:12,xsOffset:0,sm:"full"===t?12:"med"===t?7:4,smOffset:"full"===t?0:"med"===t?2.5:4,children:o})}},15290:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),i=(t(72791),t(94162)),o=t(96580),a=t(80184);function s(e){var n=e.size,t=void 0===n?40:n,s=e.color,c=void 0===s?"grey.500":s,l=e.styleProps;return(0,a.jsx)(i.Z,{sx:(0,r.Z)({color:c},l),spacing:1,direction:"row",children:(0,a.jsx)(o.Z,{color:"inherit",size:t})})}},73808:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(1413),i=t(22892),o=t(44666),a=t(43906),s=t(80184);function c(e){var n=e.toolbarProps,t=e.children;return(0,s.jsx)(i.Z,(0,r.Z)((0,r.Z)({elevation:0},n),{},{children:(0,s.jsx)(o.Z,{variant:"regular",sx:{bgcolor:function(e){return"light"===e.palette.mode?a.s[100]:null},color:function(e){return"light"===e.palette.mode?"#000":null},pr:0},children:t})}))}},79723:function(e,n,t){t.d(n,{N:function(){return o}});var r=t(70885),i=t(72791),o=function(e,n){var t=(0,i.useState)(e),o=(0,r.Z)(t,2),a=o[0],s=o[1];return(0,i.useEffect)((function(){var t=setTimeout((function(){s(e)}),n);return function(){clearTimeout(t)}}),[e,n]),a}},54596:function(e,n,t){var r=t(52797),i=t(74142);n.Z=function(){var e=(0,i.Z)();return{isMobile:(0,r.Z)(e.breakpoints.down("sm")),isMed:(0,r.Z)(e.breakpoints.between("sm","md")),isLg:(0,r.Z)(e.breakpoints.between("md","lg")),isXl:(0,r.Z)(e.breakpoints.between("lg","xl")),isAboveXl:(0,r.Z)(e.breakpoints.up("xl"))}}},31651:function(e,n,t){t.d(n,{Z:function(){return a}});t(72791);var r={parentClass:"LoadingLogo_parentClass__NFHXT",loadingLogo:"LoadingLogo_loadingLogo__BqUtz",loadingParent:"LoadingLogo_loadingParent__VASnq","loading-container":"LoadingLogo_loading-container__cjLsJ","whole-page":"LoadingLogo_whole-page__DkCG7",ldsFacebook:"LoadingLogo_ldsFacebook__pRdY2","lds-facebook":"LoadingLogo_lds-facebook__JLntj"},i=t(77783),o=t(80184);function a(e){return(0,o.jsxs)("div",{className:"".concat(r.parentClass," w-100"),children:[(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:r.loadingLogo,children:(0,o.jsx)("img",{src:i,className:"".concat(r.logoImg," d-inline-block"),alt:"logo"})})}),(0,o.jsx)("div",{className:r.loadingParent,children:(0,o.jsxs)("div",{className:r.ldsFacebook,children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})}),(0,o.jsxs)("div",{className:r.secfont,children:["Loading ",e.message," ..."]})]})}},64317:function(e,n,t){t.d(n,{C:function(){return o},T:function(){return i}});var r=t(78687),i=r.useDispatch,o=r.useSelector}}]);
//# sourceMappingURL=270.e77f8165.chunk.js.map