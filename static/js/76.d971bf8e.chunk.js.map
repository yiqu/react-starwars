{"version":3,"file":"static/js/76.d971bf8e.chunk.js","mappings":"wSAEA,GAAeA,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,KAAK,OAAQ,CACtDC,EAAG,+MACD,mB,2CCDG,EACqBC,EAAAA,GAAAA,QAA1BC,GADgC,EAAnBC,oBAAsC,EAAjBC,kBAAsC,EAAnBC,oBAAwC,EAAnBC,oBACrD,EAArBJ,uBCyFF,EA5EkB,WAEhB,IAAQK,GAAaC,EAAAA,EAAAA,KAAbD,SACFE,GAAWC,EAAAA,EAAAA,KACXC,GAAmBC,EAAAA,EAAAA,GAAeC,EAAAA,IAAkCC,OACpEC,GAAiCH,EAAAA,EAAAA,GAAeC,EAAAA,IAChDG,GAA2CJ,EAAAA,EAAAA,GAAeC,EAAAA,IAEhE,IADiCD,EAAAA,EAAAA,GAAeC,EAAAA,KACdI,EAAAA,EAAAA,UAAiB,IAAE,eAA9CC,EAAS,KAAEC,EAAY,MAE9BC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAUZ,GAASa,EAAAA,EAAAA,IAAgC,CAACC,WAAY,CAACC,KAAM,OAAQC,MAAOC,EAAAA,MAC5F,OAAQ,WACNL,EAAQM,OACV,CACF,GAAG,CAAClB,EAAUS,IAGd,IAAMU,GAAwBC,EAAAA,EAAAA,cAAY,SAACC,GACzC,IAAMC,EAAS,CACbC,QAAS,cACTC,QAAQ,GAAD,OAAKH,EAAUI,SAExBzB,GAASa,EAAAA,EAAAA,IAAgC,CAACC,WAAY,CAACC,KAAM,OAAQC,MAAOM,IAC9E,GAAG,CAACtB,IAYJ,OANAW,EAAAA,EAAAA,YAAU,WACR,OAAO,WACLX,EAASP,IACX,CACF,GAAG,CAACO,KAGF,UAAC0B,EAAA,EAAK,CAACC,UAAU,SAASC,MAAM,OAAM,WACpC,SAAC,IAAU,CAACC,aAAe,CACzBC,SAAS,SACTC,GAAG,CAACC,IAAKlC,EAAW,OAAO,SAC1B,UACD,UAAC,IAAI,CAACmC,WAAS,EAACC,GAAK,GAAKC,cAAgB,CAAED,GAAI,MAAOE,GAAI,OAAUC,eAAe,gBAAgBC,WAAW,SAAQ,WACrH,SAAC,IAAI,CAACJ,GAAK,GAAKE,GAAK,EAAG,UACtB,SAACV,EAAA,EAAK,CAACC,UAAU,MAAMU,eAAe,QAAQC,WAAW,SAAQ,UAC/D,UAAC,IAAI,CAACL,WAAS,EAACC,GAAK,GAAI,WACvB,SAAC,IAAI,CAACA,GAAK,EAAG,UACZ,SAACK,EAAA,EAAW,CAACC,aAAerB,EAAwBsB,MAAQvC,EAAWwC,gBAAkB,8BACvFC,YAAcpC,EAAmBA,EAAiBiB,aAAUoB,OAEhE,SAAC,IAAI,CAACV,GAAK,EAAIH,GAAK,CAACc,QAAQ,QAAUR,eAAe,SAASC,WAAW,SAAQ,SAC9EhC,IAAa,SAAC,IAAc,CAACwC,KAAO,eAK9C,SAAC,IAAI,CAACZ,GAAK,EAAIE,GAAK,EAAG,UACrB,SAACV,EAAA,EAAK,CAACC,UAAU,MAAMU,eAAe,WAAWC,WAAW,SAAQ,UAClE,SAACS,EAAA,EAAO,CAACC,MAAM,UAAS,UACtB,SAACC,EAAA,EAAU,CAACC,QAjCM,WAC9BxC,GAAa,IAAIyC,MAAOC,UAC1B,EA+B6D,UAC7C,SAACC,EAAe,kBAQ5B,SAAC3B,EAAA,EAAK,CAACC,UAAU,SAAS2B,EAAI,EAAI1B,MAAM,OAAM,UAC5C,SAAC,KAAM,QAKf,C,uPCpFM2B,EAAqB,SAACC,GAC1B,OAAOA,EAAMC,aACf,EAEO,EACLC,EAAAA,GAAAA,cAAqB,SAACF,GAAgB,OAAKA,EAAMC,aAAa,IADjDE,EAAS,EAATA,UAGFC,GAHuB,EAAVC,WAA0B,EAAdC,eAAyB,EAATC,UAAsB,EAAXC,YAGlC,SAACR,GAC9B,OAAOD,EAAmBC,GAAOS,OACnC,GAEaC,EAA2B,SAACV,GACvC,OAAOD,EAAmBC,GAAOW,qBACnC,EAEaC,EAA2B,SAACZ,GACvC,OAAOD,EAAmBC,GAAOa,gBACnC,EAUaC,GAAkBC,EAAAA,EAAAA,IAC7BZ,GACA,SAACH,GACC,IACMgB,EAAyC,CAAC,EAMhD,OAPgBhB,EAERiB,SAAQ,SAACC,GACfF,EAAgBE,EAAIC,YAAU,UACzBD,EAEP,IACOF,CACT,IAGWI,GAAkBL,EAAAA,EAAAA,IAC7BZ,GACA,SAACkB,GAQC,OAPiCC,EAAAA,EAAAA,IAAQD,GAAS,SAACE,GACjD,OAAOA,EAAMC,QAAO,SAACN,GACnB,QAASA,EAAIO,iBACf,IAAGC,MAAK,SAACC,EAAGC,GACV,OAAOD,EAAEE,YAAcD,EAAEC,YAAc,GAAK,CAC9C,GACF,GAEF,IAGWC,GAAyBf,EAAAA,EAAAA,IACpChB,GACA,SAACC,GACC,OAAOA,EAAMjD,gBACf,IAGWgF,GAAyBhB,EAAAA,EAAAA,IACpChB,GACA,SAACC,GAAmB,IAAD,EACjB,OAA6B,QAA7B,EAAOA,EAAMgC,wBAAgB,QAAK,CACpC,G,8FCpEWvF,EAAoCwF,EAAAA,GAEpCtF,EAAkDuF,EAAAA,E","sources":["../node_modules/@mui/icons-material/esm/RefreshOutlined.js","core/store/favorites/favorites.actions.ts","core/favorites/FavoritesLayout.tsx","core/store/favorites/favorites.selectors.ts","store/appHook.ts"],"sourcesContent":["import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'RefreshOutlined');","import { favoriteFilmslice } from './favorites.reducer';\n\n\nexport const { getFavoritesFailure, getFavoritesStart, getFavoritesSuccess, setTriggerFetchTime,\n  resetFirstTimeLoading } = favoriteFilmslice.actions;","import { IconButton, Stack, Tooltip } from \"@mui/material\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { Outlet } from \"react-router-dom\";\nimport ProgressCircle from \"src/shared/components/progress/CircleProgress\";\nimport AppToolbar from \"src/shared/components/toolbar/Toolbar\";\nimport useScreenSize from \"src/shared/hooks/useIsMobile\";\nimport FilterInput from \"../movies/movies/filter/FilterInput\";\nimport Grid from '@mui/material/Unstable_Grid2';\nimport { RefreshOutlined } from \"@mui/icons-material\";\nimport { useAppDispatch, useAppSelector } from \"src/store/appHook\";\nimport * as fromFavSelectors from '../store/favorites/favorites.selectors';\nimport { fetchFavoritesParamsSwitchThunk, fetchFavoritesSwitchThunk, fetchFavoritesThunk } from \"../store/favorites/favorites.thunks\";\nimport { HttpParams } from \"src/shared/models/http.model\";\nimport { NO_CHANGE } from \"../store/favorites/favorites.reducer\";\nimport { resetFirstTimeLoading, setTriggerFetchTime } from \"../store/favorites/favorites.actions\";\nimport { useUpdateEffect } from \"react-use\";\n\nconst Favorites = () => {\n\n  const { isMobile } = useScreenSize();\n  const dispatch = useAppDispatch();\n  const favCount: number = useAppSelector(fromFavSelectors.selectFavorited).length;\n  const isLoading: boolean | undefined = useAppSelector(fromFavSelectors.selectIsLoading);\n  const extraFetchParams: HttpParams | undefined = useAppSelector(fromFavSelectors.selectExtraFetchParams);\n  const triggerFetchTime: number = useAppSelector(fromFavSelectors.selectTriggerFetchTime);\n  const [fetchTime, setFetchTime] = useState<number>(0);\n\n  useEffect(() => {\n    const promise = dispatch(fetchFavoritesParamsSwitchThunk({httpParams: {user: 'yqu'}, extra: NO_CHANGE}));\n    return (() => {\n      promise.abort();\n    });\n  }, [dispatch, fetchTime]);\n\n  //?orderBy=\"episodeId\"&startAt=1\n  const onFilterChangeHandler = useCallback((userInput: string) => {\n    const params = {\n      orderBy: '\"episodeId\"',\n      equalTo: `${userInput.trim()}`\n    };\n    dispatch(fetchFavoritesParamsSwitchThunk({httpParams: {user: 'yqu'}, extra: params}));\n  }, [dispatch]);\n\n  const refreshFavoritesHandler = () => {\n    setFetchTime(new Date().getTime());\n  };\n\n  useEffect(() => {\n    return () => {\n      dispatch(resetFirstTimeLoading());\n    };\n  }, [dispatch]);\n\n  return (\n    <Stack direction=\"column\" width=\"100%\">\n      <AppToolbar toolbarProps={ {\n        position:\"sticky\",\n        sx:{top: isMobile ? '56px':'64px'}\n      } }>\n        <Grid container xs={ 12 } flexDirection={ { xs: 'row', sm: 'row' } } justifyContent=\"space-between\" alignItems=\"center\">\n          <Grid xs={ 10 } sm={ 4 }>\n            <Stack direction=\"row\" justifyContent=\"start\" alignItems=\"center\">\n              <Grid container xs={ 12 }>\n                <Grid xs={ 8 }>\n                  <FilterInput filterChange={ onFilterChangeHandler } count={ favCount } placeholderText={ 'Filter by EP number. e.g. 3' } \n                    currentText={ extraFetchParams ? extraFetchParams.equalTo : undefined } />\n                </Grid>\n                <Grid xs={ 2 } sx={ {display:'flex'} } justifyContent=\"center\" alignItems=\"center\">\n                  { isLoading && <ProgressCircle size={ 20 } /> }\n                </Grid>\n              </Grid>\n            </Stack>\n          </Grid>\n          <Grid xs={ 2 } sm={ 8 }>\n            <Stack direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\">\n              <Tooltip title=\"Refresh\">\n                <IconButton onClick={ refreshFavoritesHandler }>\n                  <RefreshOutlined />\n                </IconButton>\n              </Tooltip>\n            </Stack>\n          </Grid>\n        </Grid>\n      </AppToolbar>\n\n      <Stack direction=\"column\" p={ 3 } width=\"100%\">\n        <Outlet />\n      </Stack>\n\n    </Stack>\n  );\n};\n\nexport default Favorites;","import { createSelector, createAction } from \"@reduxjs/toolkit\";\nimport { FavoriteMoviesObjList, FavoriteToSave } from \"src/shared/models/starwars.model\";\nimport { RootState } from \"src/store/appStore\";\nimport produce from 'immer';\nimport { adapter } from \"./favorites.reducer\";\nimport { HttpParams } from \"src/shared/models/http.model\";\n\nconst favoriteFilmsSlice = (state: RootState) => {\n  return state.favoriteFilms;\n};\n\nexport const { selectAll, selectById, selectEntities, selectIds, selectTotal } =\n  adapter.getSelectors((state: RootState) => state.favoriteFilms);\n\nexport const selectIsLoading = (state: RootState) => {\n  return favoriteFilmsSlice(state).loading;\n};\n\nexport const selectIsFavToggleLoading = (state: RootState) => {\n  return favoriteFilmsSlice(state).favoriteToggleLoading;\n};\n\nexport const selectIsFirstTimeLoading = (state: RootState) => {\n  return favoriteFilmsSlice(state).firstTimeLoading;\n};\n\nexport const selectError = (state: RootState) => {\n  return favoriteFilmsSlice(state).error;\n};\n\nexport const selectErrorMsg = (state: RootState) => {\n  return favoriteFilmsSlice(state).errMsg;\n};\n\nexport const selectAllByEpId = createSelector(\n  selectAll,\n  (state: FavoriteToSave[]): FavoriteMoviesObjList => {\n    const allFavs = state;\n    const transformedData: FavoriteMoviesObjList = {};\n    allFavs.forEach((fav: FavoriteToSave) => {\n      transformedData[fav.episodeId] = {\n        ...fav\n      };\n    });\n    return transformedData;\n  }\n);\n\nexport const selectFavorited = createSelector(\n  selectAll,\n  (allFavs: FavoriteToSave[]) => {\n    const result: FavoriteToSave[] = produce(allFavs, (draft) => {\n      return draft.filter((fav) => {\n        return !!fav.isCurrentFavorite;\n      }).sort((a, b) => {\n        return a.lastUpdated < b.lastUpdated ? 1 : -1;\n      });\n    });\n    return result;\n  }\n);\n\nexport const selectExtraFetchParams = createSelector(\n  favoriteFilmsSlice,\n  (state): HttpParams | undefined => {\n    return state.extraFetchParams;\n  }\n);\n\nexport const selectTriggerFetchTime = createSelector(\n  favoriteFilmsSlice,\n  (state): number => {\n    return state.triggerFetchTime  ?? 0;\n  }\n);","import { useDispatch, useSelector } from 'react-redux';\nimport type { TypedUseSelectorHook } from 'react-redux';\nimport type { RootState, AppDispatch } from './appStore';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch: () => AppDispatch = useDispatch;\n\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n"],"names":["createSvgIcon","_jsx","d","favoriteFilmslice","resetFirstTimeLoading","getFavoritesFailure","getFavoritesStart","getFavoritesSuccess","setTriggerFetchTime","isMobile","useScreenSize","dispatch","useAppDispatch","favCount","useAppSelector","fromFavSelectors","length","isLoading","extraFetchParams","useState","fetchTime","setFetchTime","useEffect","promise","fetchFavoritesParamsSwitchThunk","httpParams","user","extra","NO_CHANGE","abort","onFilterChangeHandler","useCallback","userInput","params","orderBy","equalTo","trim","Stack","direction","width","toolbarProps","position","sx","top","container","xs","flexDirection","sm","justifyContent","alignItems","FilterInput","filterChange","count","placeholderText","currentText","undefined","display","size","Tooltip","title","IconButton","onClick","Date","getTime","RefreshOutlined","p","favoriteFilmsSlice","state","favoriteFilms","adapter","selectAll","selectIsLoading","selectById","selectEntities","selectIds","selectTotal","loading","selectIsFavToggleLoading","favoriteToggleLoading","selectIsFirstTimeLoading","firstTimeLoading","selectAllByEpId","createSelector","transformedData","forEach","fav","episodeId","selectFavorited","allFavs","produce","draft","filter","isCurrentFavorite","sort","a","b","lastUpdated","selectExtraFetchParams","selectTriggerFetchTime","triggerFetchTime","useDispatch","useSelector"],"sourceRoot":""}