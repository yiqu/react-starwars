"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[261],{3261:function(t,n,r){r.r(n),r.d(n,{default:function(){return C}});var e,i=r(2791),u=r(7689),o=r(1413),a=r(885),c=r(799),s=r(6884),l=r(1070),f=r.n(l),d=r(5885),p=r(773),v=function(t){var n=t.params,r=void 0===n?{refetch:0}:n,e=(0,i.useState)(),u=(0,a.Z)(e,2),l=u[0],v=u[1],h=(0,i.useRef)(new AbortController);(0,s.Z)((function(){var t=f()(p.H,"/films",(0,o.Z)({},r));h.current.abort(),h.current=new AbortController,v(t)}),[r]);var m=(0,c.ZP)((function(){return l||null}),(function(t){return(0,d.$)(t,h.current)}),{revalidateOnFocus:!1,revalidateIfStale:!0,keepPreviousData:!0,shouldRetryOnError:!0}),E=m.data,g=m.isValidating,C=m.error,F=m.isLoading;return{allFilms:null===E||void 0===E?void 0:E.result,allFilmsLoading:F,allFilmsValidating:g,allFilmsError:C}},h=r(4317),m=r(1917),E=r(3737);!function(t){t.ERR_CANCELED="ERR_CANCELED"}(e||(e={}));var g=r(184);function C(){var t=(0,h.T)(),n=(0,h.C)(m.Ky),r=v({params:n}),o=r.allFilms,a=r.allFilmsError,c=r.allFilmsLoading,s=r.allFilmsValidating;return(0,i.useEffect)((function(){t(E.eI(null!==o&&void 0!==o?o:[]))}),[o,t]),(0,i.useEffect)((function(){t(E.K4(c))}),[c,t]),(0,i.useEffect)((function(){t(E.Cs(s))}),[s,t]),(0,i.useEffect)((function(){a&&a.code!==e.ERR_CANCELED&&t(E.hv(a))}),[a,t]),(0,g.jsx)(u.j3,{})}},3737:function(t,n,r){r.d(n,{Cs:function(){return o},K4:function(){return a},eI:function(){return u},hv:function(){return i},iz:function(){return c}});var e=r(9422).rT.actions,i=e.fetchFailure,u=e.fetchPayloadSuccess,o=e.setValidating,a=e.setLoading,c=(e.setUrl,e.setParams2)},1917:function(t,n,r){r.d(n,{Ky:function(){return h},Qi:function(){return d},Xt:function(){return v},xU:function(){return f},zh:function(){return p}});var e=r(1413),i=r(6916),u=r(9422),o=r(5826),a=r(8611),c=function(t){return t.allFilms},s=u.VL.getSelectors((function(t){return t.allFilms})),l=s.selectAll,f=(s.selectById,s.selectEntities,s.selectIds,s.selectTotal,function(t){return c(t).isLoading}),d=function(t){return c(t).isValidating},p=function(t){return c(t).errMsg},v=(0,i.P1)(l,o._d,(function(t,n){return(0,a.w)(t,n)})),h=(0,i.P1)((function(t){return c(t).apiParams}),(function(t){var n=(0,e.Z)({},t);return Object.keys(n).forEach((function(t){""==="".concat(n[t]).trim()&&delete n[t]})),n}))},5826:function(t,n,r){r.d(n,{_d:function(){return l},xU:function(){return s}});var e=r(1413),i=r(6916),u=r(8345),o=function(t){return t.favoriteFilms},a=u.VL.getSelectors((function(t){return t.favoriteFilms})),c=a.selectAll,s=(a.selectById,a.selectEntities,a.selectIds,a.selectTotal,function(t){return o(t).loading}),l=(0,i.P1)(c,(function(t){var n={};return t.forEach((function(t){n[t.episodeId]=(0,e.Z)({},t)})),n}))},8611:function(t,n,r){r.d(n,{Q:function(){return o},w:function(){return a}});var e=r(2426),i=r.n(e),u=r(2546),o=function(t){var n="",r=null!==t&&void 0!==t&&t.lastUpdated?i()(null===t||void 0===t?void 0:t.lastUpdated).fromNow():"";return n=null!==t&&void 0!==t&&t.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==t&&void 0!==t&&t.lastUpdated&&(n=n+". "+(t.isCurrentFavorite?"Favorited ":"Unfavorited ")+r),n},a=function(t,n){return(0,u.ZP)(null!==t&&void 0!==t?t:[],(function(t){t.sort((function(t,n){return t.properties.episode_id>n.properties.episode_id?1:-1})),t.forEach((function(t){t.properties.favorite=n[t.properties.episode_id]}))}))}},5885:function(t,n,r){r.d(n,{k:function(){return c},$:function(){return s}});var e=r(4165),i=r(5861),u=r(4569),o=r.n(u);function a(t){return new Promise((function(n,r){setTimeout((function(){n()}),t)}))}var c=function(){var t=(0,i.Z)((0,e.Z)().mark((function t(n){var r,i,u=arguments;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=u.length>1&&void 0!==u[1]?u[1]:0)){t.next=4;break}return t.next=4,a(r);case 4:return t.prev=4,t.next=7,o().get(n,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(i=t.sent).status){t.next=10;break}return t.abrupt("return",i.data);case 10:return t.abrupt("return",Promise.reject(i));case 13:throw t.prev=13,t.t0=t.catch(4),console.error("App fetcher GET error:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(n){return t.apply(this,arguments)}}(),s=function(){var t=(0,i.Z)((0,e.Z)().mark((function t(n,r){var i,u,c=arguments;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=c.length>2&&void 0!==c[2]?c[2]:0)){t.next=4;break}return t.next=4,a(i);case 4:return t.prev=4,t.next=7,o().get(n,{headers:{"Content-Type":"application/json"},responseType:"json",signal:r.signal});case 7:if(200!==(u=t.sent).status){t.next=10;break}return t.abrupt("return",u.data);case 10:return t.abrupt("return",Promise.reject(u));case 13:throw t.prev=13,t.t0=t.catch(4),"ERR_CANCELED"!==t.t0.code&&console.error("App fetcher GET error:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(n,r){return t.apply(this,arguments)}}()},4317:function(t,n,r){r.d(n,{C:function(){return u},T:function(){return i}});var e=r(9434),i=e.I0,u=e.v9}}]);
//# sourceMappingURL=261.935cc08f.chunk.js.map