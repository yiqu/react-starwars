"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[554],{758:function(n,t,e){e.d(t,{Z:function(){return s}});var r=e(96015),i=e(94162),o=e(4565),a=e(80184);function s(n){var t=n.reason,e=n.debug;return(0,a.jsx)(r.Z,{marginY:5,width:"100%",children:(0,a.jsxs)(i.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"h5",sx:{textTransform:"uppercase"},children:"An error has occurred!"}),(0,a.jsxs)(i.Z,{direction:"column",spacing:1,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"body1",fontWeight:700,children:"REASON"}),(0,a.jsx)(o.Z,{variant:"body2",children:t})]}),(0,a.jsxs)(i.Z,{direction:"column",spacing:1,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"body1",fontWeight:700,children:"DEBUG"}),(0,a.jsx)(o.Z,{variant:"body2",component:"div",children:(0,a.jsx)("pre",{children:(0,a.jsx)("code",{style:{display:"flex",textAlign:"center"},children:JSON.stringify(e)})})})]})]})})}},88554:function(n,t,e){e.r(t),e.d(t,{default:function(){return en}});var r=e(1413),i=e(70885),o=e(72791),a=e(94162),s=e(4565),c=e(17205),u=e(96015),l=e(36227),d=e(48928),f=e(96875),v=e(55194),p=e(38943),h=e(11087),x=e(17237),Z=e(36976),g=e(13811),m=e(72426),j=e.n(m),b=function(n){var t="",e=null!==n&&void 0!==n&&n.lastUpdated?j()(null===n||void 0===n?void 0:n.lastUpdated).fromNow():"";return t=null!==n&&void 0!==n&&n.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==n&&void 0!==n&&n.lastUpdated&&(t=t+". "+(n.isCurrentFavorite?"Favorited ":"Unfavorited ")+e),t},y=e(11155),w=e(70773),F=e(51070),I=e.n(F),L=e(64317),C=e(74165),k=e(15861),T=e(95273),_=e(30199),S=e(71435),M=e(85153),A=e(11904),E=e(88818),P=(0,T.createAsyncThunk)("[FAVORITE FILMS / API / Switch] Get all favorites with params",function(){var n=(0,k.Z)((0,C.Z)().mark((function n(t,e){var i,o,a;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=I()(w.Ko,"/swdb/:user/favorites.json",(0,r.Z)({},null===t||void 0===t?void 0:t.httpParams)),o=(0,E.U)(i,{signal:e.signal}).pipe((0,_.w)((function(n){if(n.ok)return n.json();throw new Error("API Error: "+n.status)}))),n.next=4,(0,S.n)(o);case 4:return a=n.sent,n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()),U=(0,T.createAsyncThunk)("[FAVORITE FILMS / API / Exhaust] Toggle favorite",function(){var n=(0,k.Z)((0,C.Z)().mark((function n(t,e){var i,o;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,r.Z)((0,r.Z)({},t.fav),{},{lastUpdated:(new Date).getTime(),isCurrentFavorite:t.favStatus}),o=A.h.put(t.url,i).pipe((0,M.U)((function(n){return n.response}))),n.abrupt("return",(0,S.n)(o));case 3:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),{condition:function(n,t){return!1}}),D=((0,T.createAsyncThunk)("[FAVORITE FILMS / API / Merge] Toggle favorite",function(){var n=(0,k.Z)((0,C.Z)().mark((function n(t,e){var i,o,a;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,r.Z)((0,r.Z)({},t.fav),{},{lastUpdated:(new Date).getTime(),isCurrentFavorite:t.favStatus}),o=A.h.put(t.url,i).pipe((0,M.U)((function(n){return n.response}))),n.next=4,(0,S.n)(o);case 4:return a=n.sent,e.dispatch(P({httpParams:{user:"yqu"}})),n.abrupt("return",a);case 7:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),{condition:function(n,t){return!0}}),(0,T.createAsyncThunk)("[FAVORITE FILMS / API / Exhaust] Add new favorite",function(){var n=(0,k.Z)((0,C.Z)().mark((function n(t,e){var i,o;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,r.Z)((0,r.Z)({},t.fav),{},{lastUpdated:(new Date).getTime(),isCurrentFavorite:t.favStatus}),o=A.h.post(t.url,i).pipe((0,M.U)((function(n){return n.response}))),n.abrupt("return",(0,S.n)(o));case 3:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),{condition:function(n,t){return!1}})),N=e(80184);function O(n){var t=n.film,e=n.favoriteData,r=n.uid,i=n.userId,o=n.allFavoritesLoading,u=(n.favToggleLoading,(0,L.T)());return(0,N.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:2,children:[(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(t.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,N.jsxs)(v.Z,{children:[(0,N.jsxs)(a.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,N.jsx)(s.Z,{gutterBottom:!0,variant:"h5",component:h.rU,to:"./".concat(r),sx:{fontWeight:"500"},children:t.title}),(0,N.jsxs)(s.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",t.episode_id]})]}),(0,N.jsxs)(a.Z,{spacing:1,children:[(0,N.jsxs)(a.Z,{direction:"row",spacing:.5,children:[(0,N.jsx)(s.Z,{variant:"body1",color:"text.secondary",children:"Released:"}),(0,N.jsx)(s.Z,{variant:"body1",color:"text.secondary",children:(0,N.jsx)(y.Z,{date:t.release_date,format:"MMM Do YYYY"})})]}),(0,N.jsxs)(s.Z,{variant:"body1",color:"text.secondary",children:["Directed by: ",t.director]}),(0,N.jsxs)(s.Z,{variant:"body1",color:"text.secondary",children:["Produced by: ",t.producer]}),(0,N.jsx)(s.Z,{variant:"body1",color:"text.primary",children:t.opening_crawl})]})]})]}),(0,N.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,N.jsx)("div",{children:(0,N.jsx)(c.Z,{size:"small",component:h.rU,to:"./".concat(r),children:"See More"})}),(0,N.jsx)("div",{children:(0,N.jsx)(g.Z,{"aria-label":"favorite",onClick:function(){var n,e,r,o=t.url,a=o.split("/")[o.split("/").length-1],s=I()(w.Ko,"swdb/:user/favorites".concat(null!==(n=t.favorite)&&void 0!==n&&n.fireId?"/"+(null===(e=t.favorite)||void 0===e?void 0:e.fireId):"",".json"),{user:i}),c={filmUrl:o,filmId:a,lastUpdated:(new Date).getTime(),episodeId:t.episode_id,isCurrentFavorite:!0};t.favorite?(c.isCurrentFavorite=!t.favorite.isCurrentFavorite,c.fireId=t.favorite.fireId,r=u(U({fav:c,url:s,favStatus:!t.favorite.isCurrentFavorite}))):r=u(D({fav:c,url:s,favStatus:!0})),r.then((function(n){return u(P({httpParams:{user:"yqu"}}))}))},title:b(e),disabled:!!o,children:o?(0,N.jsx)(Z.Z,{}):(0,N.jsx)(x.Z,{color:null!==e&&void 0!==e&&e.isCurrentFavorite?"error":"disabled"})})})]})]})}var R=e(73808),z=e(54596),V=(e(51372),e(57689)),Y=e(758),W=e(61789),q=e(31651),B=e(26758),H=e(45173),K=e(96580),X=e(23176),G=e(32619),J=e(25777),$=e(47194),Q=e(46426),nn=e(79729),tn="films",en=function(){var n=(0,L.T)(),t=(0,h.lr)(),e=(0,i.Z)(t,2),d=e[0],f=(e[1],d.get("moviePageDisplayMode")),v=(0,z.Z)().isMobile,p=(0,V.s0)(),x=(0,o.useState)(f),Z=(0,i.Z)(x,2),g=(Z[0],Z[1],(0,nn.oo)()),m=g.data,j=g.isLoading,b=g.isFetching,y=(0,W.$9)(void 0,{selectFromResult:function(n){var t;return(0,r.Z)((0,r.Z)({},n),{},{dataWithFavs:null===(t=n.data)||void 0===t?void 0:t.map((function(n){var t=null===m||void 0===m?void 0:m.find((function(t){return t.episodeId===n.properties.episode_id}));return(0,r.Z)((0,r.Z)({},n),{},{favorite:t})})).sort((function(n,t){return n.properties.episode_id>t.properties.episode_id?1:-1}))})}}),w=(y.data,y.dataWithFavs),F=y.isLoading,I=y.isFetching,C=y.fulfilledTimeStamp,k=y.startedTimeStamp,T=(y.refetch,y.isError),_=y.error,S=(null!==C&&void 0!==C?C:0)-(null!==k&&void 0!==k?k:0);return F?(0,N.jsx)(a.Z,{direction:"column",width:"100%",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,N.jsx)(q.Z,{message:tn})}):T?(0,N.jsx)(Y.Z,{reason:_.status,debug:_.error}):w?(0,N.jsxs)(a.Z,{direction:"column",width:"100%",children:[(0,N.jsx)(R.Z,{toolbarProps:{position:"sticky",sx:{top:v?"56px":"64px"}},children:(0,N.jsxs)(l.Z,{container:!0,xs:12,children:[(0,N.jsx)(l.Z,{xs:4,children:(0,N.jsx)(a.Z,{direction:"row",justifyContent:"start",alignItems:"center",width:"100%",children:(0,N.jsx)(B.Z,{entity:tn,onResultSelect:function(n){p("./".concat(null===n||void 0===n?void 0:n.uid))}})})}),(0,N.jsx)(l.Z,{xs:8,xsOffset:"auto",display:"flex",children:(0,N.jsxs)(a.Z,{direction:"row",justifyContent:"end",alignItems:"center",width:"100%",spacing:2,"data-tooltip-id":"fetch-information",children:[I&&(0,N.jsx)(K.Z,{size:20}),!I&&(0,N.jsxs)(s.Z,{fontSize:11,component:"div",children:["Last fetched ",(0,N.jsx)($.Z,{dateInMilli:null!==C&&void 0!==C?C:0}),", took: ",(0,N.jsx)(G.Z,{durationInMilli:S})]}),(0,N.jsx)(c.Z,{variant:"outlined",startIcon:(0,N.jsx)(X.Z,{}),onClick:function(){n(nn.Kx.util.invalidateTags([{type:"Favorites"}]))},children:"Refresh Favorites"}),(0,N.jsx)(c.Z,{variant:"outlined",startIcon:(0,N.jsx)(X.Z,{}),onClick:function(){n(W.ak.util.invalidateTags([{type:"Films"}]))},children:"Refresh Films"})]})})]})}),(0,N.jsx)(u.Z,{mt:2,mx:v?2:0,children:(0,N.jsx)(H.Z,{size:"med",children:null===w||void 0===w?void 0:w.map((function(n){return(0,N.jsx)(l.Z,{xs:12,sm:8,smOffset:2,mb:3,children:(0,N.jsx)(O,{userId:"yqu",film:n.properties,favoriteData:n.favorite,uid:n.uid,allFavoritesLoading:j,favToggleLoading:b})},n.properties.episode_id)}))})}),(0,N.jsx)(Q.u,{id:"fetch-information",place:"bottom",offset:30,children:(0,N.jsx)(a.Z,{direction:"column",justifyContent:"center",alignItems:"center",children:(0,N.jsxs)(u.Z,{children:["Last fetched: ",(0,N.jsx)($.Z,{dateInMilli:C})," ( ",(0,N.jsx)(J.Z,{dateInMilli:C})," ago )."]})})})]}):(0,N.jsx)(N.Fragment,{})}},26758:function(n,t,e){var r=e(1413),i=e(70885),o=e(94162),a=e(4218),s=e(96015),c=e(59911),u=e(40255),l=e(72791),d=e(88163),f=e(73054),v=e(15290),p=e(79723),h=e(80184);function x(n){var t=n.params,e=n.entity;return(0,h.jsx)(c.Z,(0,r.Z)((0,r.Z)({},t),{},{label:"Filter ".concat(e),variant:"standard"}))}t.Z=function(n){var t=n.entity,e=n.onResultSelect,r=(0,l.useState)([]),c=(0,i.Z)(r,2),Z=c[0],g=c[1],m=(0,l.useState)(null),j=(0,i.Z)(m,2),b=j[0],y=j[1],w=(0,l.useState)(null),F=(0,i.Z)(w,2),I=F[0],L=F[1],C=(0,p.N)(I,600),k=(0,f.rw)(C?{entity:t,name:C}:u.skipToken),T=k.data,_=k.isFetching;return k.error,k.isError,k.refetch,(0,l.useEffect)((function(){g(null!==T&&void 0!==T?T:[])}),[T]),(0,d.Z)((function(){}),[C]),(0,h.jsxs)(o.Z,{direction:"row",justifyContent:"start",alignItems:"center",width:"100%",children:[(0,h.jsx)(a.Z,{disablePortal:!0,id:"search-entity-autocomplete",options:Z,fullWidth:!0,autoHighlight:!0,blurOnSelect:!0,filterOptions:function(n){return n},value:b,getOptionLabel:function(n){var t;return null!==(t=n.properties.name)&&void 0!==t?t:n.properties.title},noOptionsText:"Search for ".concat(t),loading:_,renderInput:function(n){return(0,h.jsx)(x,{params:n,entity:t})},onChange:function(n,t){var r;g((r=t)?[r]:Z),y(r),e(r)},onInputChange:function(n,t){return function(n,t){L(t)}(0,t)},isOptionEqualToValue:function(n,t){return n.uid===t.uid}}),(0,h.jsx)(s.Z,{ml:2,children:_&&(0,h.jsx)(v.Z,{size:20})})]})}},11155:function(n,t,e){var r=e(75814),i=e(4565),o=e(46431),a=e.n(o),s=e(72426),c=e.n(s),u=e(80184);t.Z=function(n){var t=n.date,e=void 0===t?0:t,o=n.fromNow,s=void 0===o||o,l=n.format,d=void 0===l?"MM/DD/YY HH:mm":l;return(0,u.jsx)(r.Z,{title:e?c()(e).format(d):"No date found",children:(0,u.jsx)(i.Z,{component:"span",display:"flex",alignItems:"center",justifyContent:"center",children:e?(0,u.jsx)(a(),{date:e,fromNow:s,format:s?void 0:d,interval:6e4}):(0,u.jsx)(u.Fragment,{children:"N/A"})})})}},47194:function(n,t,e){var r=e(29158),i=e(80184);t.Z=function(n){var t=n.dateInMilli;return(0,i.jsx)(i.Fragment,{children:void 0!==t&&(0,r.Z)(t,"MM/dd/yyyy p")})}},25777:function(n,t,e){var r=e(55763),i=e(80184);t.Z=function(n){var t=n.dateInMilli;return(0,i.jsx)(i.Fragment,{children:void 0!==t&&(0,r.Z)(t,{includeSeconds:!0})})}},32619:function(n,t,e){var r=e(51943),i=e(80184);t.Z=function(n){var t=n.durationInMilli;return(0,i.jsx)(i.Fragment,{children:t>1e3?(0,r.Z)(0,t,{includeSeconds:!0}):t+" ms"})}},45173:function(n,t,e){var r=e(36227),i=e(80184);t.Z=function(n){var t=n.size,e=void 0===t?"med":t,o=n.children;return(0,i.jsx)(r.Z,{container:!0,spacing:0,xs:12,xsOffset:0,sm:"full"===e?12:"med"===e?7:4,smOffset:"full"===e?0:"med"===e?2.5:4,children:o})}},15290:function(n,t,e){e.d(t,{Z:function(){return s}});var r=e(1413),i=(e(72791),e(94162)),o=e(96580),a=e(80184);function s(n){var t=n.size,e=void 0===t?40:t,s=n.color,c=void 0===s?"grey.500":s,u=n.styleProps;return(0,a.jsx)(i.Z,{sx:(0,r.Z)({color:c},u),spacing:1,direction:"row",children:(0,a.jsx)(o.Z,{color:"inherit",size:e})})}},73808:function(n,t,e){e.d(t,{Z:function(){return c}});var r=e(1413),i=e(22892),o=e(44666),a=e(43906),s=e(80184);function c(n){var t=n.toolbarProps,e=n.children;return(0,s.jsx)(i.Z,(0,r.Z)((0,r.Z)({elevation:0},t),{},{children:(0,s.jsx)(o.Z,{variant:"regular",sx:{bgcolor:function(n){return"light"===n.palette.mode?a.s[100]:null},color:function(n){return"light"===n.palette.mode?"#000":null},pr:0},children:e})}))}},79723:function(n,t,e){e.d(t,{N:function(){return o}});var r=e(70885),i=e(72791),o=function(n,t){var e=(0,i.useState)(n),o=(0,r.Z)(e,2),a=o[0],s=o[1];return(0,i.useEffect)((function(){var e=setTimeout((function(){s(n)}),t);return function(){clearTimeout(e)}}),[n,t]),a}},54596:function(n,t,e){var r=e(52797),i=e(74142);t.Z=function(){var n=(0,i.Z)();return{isMobile:(0,r.Z)(n.breakpoints.down("sm")),isMed:(0,r.Z)(n.breakpoints.down("md")),isLg:(0,r.Z)(n.breakpoints.down("lg")),isXl:(0,r.Z)(n.breakpoints.down("xl"))}}},31651:function(n,t,e){e.d(t,{Z:function(){return a}});e(72791);var r={parentClass:"LoadingLogo_parentClass__NFHXT",loadingLogo:"LoadingLogo_loadingLogo__BqUtz",loadingParent:"LoadingLogo_loadingParent__VASnq","loading-container":"LoadingLogo_loading-container__cjLsJ","whole-page":"LoadingLogo_whole-page__DkCG7",ldsFacebook:"LoadingLogo_ldsFacebook__pRdY2","lds-facebook":"LoadingLogo_lds-facebook__JLntj"},i=e(77783),o=e(80184);function a(n){return(0,o.jsxs)("div",{className:"".concat(r.parentClass," w-100"),children:[(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:r.loadingLogo,children:(0,o.jsx)("img",{src:i,className:"".concat(r.logoImg," d-inline-block"),alt:"logo"})})}),(0,o.jsx)("div",{className:r.loadingParent,children:(0,o.jsxs)("div",{className:r.ldsFacebook,children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})}),(0,o.jsxs)("div",{className:r.secfont,children:["Loading ",n.message," ..."]})]})}},51372:function(n,t,e){var r;e.d(t,{K:function(){return r}}),function(n){n.TABLE="table",n.CARD="card"}(r||(r={}))},64317:function(n,t,e){e.d(t,{C:function(){return o},T:function(){return i}});var r=e(78687),i=r.useDispatch,o=r.useSelector},17237:function(n,t,e){var r=e(64836);t.Z=void 0;var i=r(e(45649)),o=e(80184),a=(0,i.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");t.Z=a},36976:function(n,t,e){var r=e(64836);t.Z=void 0;var i=r(e(45649)),o=e(80184),a=(0,i.default)((0,o.jsx)("path",{d:"m18 22-.01-6L14 12l3.99-4.01L18 2H6v6l4 4-4 3.99V22h12zM8 7.5V4h8v3.5l-4 4-4-4z"}),"HourglassBottom");t.Z=a},55763:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(51943),i=e(4522);function o(n,t){return(0,i.Z)(1,arguments),(0,r.Z)(n,Date.now(),t)}},88163:function(n,t,e){e.d(t,{Z:function(){return i}});var r=e(72791);var i=function(n,t){var e=function(){var n=(0,r.useRef)(!0);return n.current?(n.current=!1,!0):n.current}();(0,r.useEffect)((function(){if(!e)return n()}),t)}},88818:function(n,t,e){e.d(t,{U:function(){return s}});var r=e(29388),i=e(16907),o=e(35723),a=e(62344);function s(n,t){void 0===t&&(t={});var e=t.selector,s=(0,r._T)(t,["selector"]);return new o.y((function(t){var o=new AbortController,c=o.signal,u=!0,l=s.signal;if(l)if(l.aborted)o.abort();else{var d=function(){c.aborted||o.abort()};l.addEventListener("abort",d),t.add((function(){return l.removeEventListener("abort",d)}))}var f=(0,r.pi)((0,r.pi)({},s),{signal:c}),v=function(n){u=!1,t.error(n)};return fetch(n,f).then((function(n){e?(0,a.Xf)(e(n)).subscribe((0,i.x)(t,void 0,(function(){u=!1,t.complete()}),v)):(u=!1,t.next(n),t.complete())})).catch(v),function(){u&&o.abort()}}))}},30199:function(n,t,e){e.d(t,{w:function(){return a}});var r=e(62344),i=e(87686),o=e(16907);function a(n,t){return(0,i.e)((function(e,i){var a=null,s=0,c=!1,u=function(){return c&&!a&&i.complete()};e.subscribe((0,o.x)(i,(function(e){null===a||void 0===a||a.unsubscribe();var c=0,l=s++;(0,r.Xf)(n(e,l)).subscribe(a=(0,o.x)(i,(function(n){return i.next(t?t(e,n,l,c++):n)}),(function(){a=null,u()})))}),(function(){c=!0,u()})))}))}}}]);
//# sourceMappingURL=554.c99b3828.chunk.js.map