(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[101],{7525:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return fe}});var t=r(885),a=r(2791),i=r(6227),s=r(4162),l=r(4565),o=r(7205),c=r(5645),d=r(788),u=r(7323),p=r(8771),h=r(8711),f=r(6015),m=r(3329),x=r(6753),v=r(5705),Z=r(2982),b=r(1413),j=r(464),g=r(3811),y=r(1872),C=r(8440),w=r(5987),k=r(9911),I=r(1898),S=r(8823),E=r(7924),F=r(2262),T=r(763),P=r(8937),A=r(7907),N=r(184),q=["label","name","options","dataLoading","placeholder","validate","disabled"],O=(0,N.jsx)(P.Z,{}),L=(0,N.jsx)(A.Z,{}),R=function(e){var n=e.label,r=e.name,t=e.options,a=e.dataLoading,i=e.placeholder,s=e.validate,l=e.disabled,o=(0,w.Z)(e,q),c=(0,v.u6)();return(0,N.jsxs)(I.Z,{fullWidth:!0,size:"small",children:[(0,N.jsx)(v.gN,(0,b.Z)({as:F.Z,label:n,name:r,id:r,onChange:function(e,n){c.setFieldValue(r,n)},renderInput:function(e){return(0,N.jsx)(k.Z,(0,b.Z)((0,b.Z)({},e),{},{name:r,variant:"standard",label:(0,T.startCase)(a?"Loading ".concat(r,"..."):"Select ".concat(r)),placeholder:(0,T.upperFirst)(null!==i&&void 0!==i?i:n),error:c.touched[r]&&!!c.errors[r]},o.renderInputProps))},renderOption:function(e,n,r){var t,a,i=r.selected;return(0,N.jsxs)("li",(0,b.Z)((0,b.Z)({},e),{},{children:[(0,N.jsx)(S.Z,{icon:O,checkedIcon:L,checked:i}),null!==(t=null!==(a=n.name)&&void 0!==a?a:n.display)&&void 0!==t?t:n]}))},getOptionLabel:function(e){var n,r;return null!==(n=null!==(r=e.name)&&void 0!==r?r:e.display)&&void 0!==n?n:e},validate:s,options:t,disabled:l,loading:a,loadingText:"Loading ".concat(n),noOptionsText:"No ".concat(n," available"),autoHighlight:!0},o.props)),(0,N.jsx)(E.Z,{id:"".concat(r,"-helper-text"),error:c.touched[r]&&!!c.errors[r],children:c.touched[r]&&c.errors[r]?(0,N.jsx)(v.Bc,{name:r,render:function(e){return(0,T.upperFirst)(e)}}):(0,N.jsx)(N.Fragment,{children:o.helperText})})]})},_=r(2900),z=function(e){var n=e.label,r=e.name,t=e.props,a=e.disabled,i=(0,v.u6)();return(0,N.jsx)(I.Z,{fullWidth:!0,size:"small",children:(0,N.jsx)(v.gN,(0,b.Z)({as:_.Z,control:(0,N.jsx)(S.Z,{checked:!!i.values[r],onChange:function(e){return i.setFieldValue(r,e.target.checked||!1)}}),label:(0,T.startCase)(n),name:r,id:r,disabled:a},t))})},D=["label","name","validate","disabled","placeholder"],H=function(e){var n=e.label,r=e.name,t=e.validate,a=e.disabled,i=e.placeholder,s=(0,w.Z)(e,D),l=(0,v.u6)();return(0,N.jsxs)(I.Z,{fullWidth:!0,size:"small",children:[(0,N.jsx)(v.gN,(0,b.Z)({as:k.Z,label:(0,T.startCase)(n),name:r,id:r,error:l.touched[r]&&!!l.errors[r],validate:t,variant:"standard",disabled:a,placeholder:(0,T.upperFirst)(null!==i&&void 0!==i?i:n)},s.props)),(0,N.jsx)(E.Z,{id:"".concat(r,"-helper-text"),error:l.touched[r]&&!!l.errors[r],children:l.touched[r]&&l.errors[r]?(0,N.jsx)(v.Bc,{name:r,render:function(e){return(0,T.upperFirst)(e)}}):(0,N.jsx)(N.Fragment,{children:s.helperText})})]})},M=r(2851),V=r(5702),W=r(9365),B=["label","name","options","disabled","placeholder","validate"],X=function(e){var n=e.label,r=e.name,t=e.options,a=e.disabled,i=(e.placeholder,e.validate),s=(0,w.Z)(e,B),o=(0,v.u6)();return(0,N.jsxs)(I.Z,{fullWidth:!0,size:"small",children:[(0,N.jsxs)(W.Z,{id:r+"label",children:[" ",(0,T.startCase)(n)," "]}),(0,N.jsxs)(v.gN,(0,b.Z)((0,b.Z)({as:M.Z,name:r,label:(0,T.startCase)(n),id:r,validate:i,variant:"standard",error:o.touched[r]&&!!o.errors[r],disabled:a},s.props),{},{children:[s.useDefaultNoneSelected&&(0,N.jsx)(V.Z,{value:"NONE_SELECTED",disabled:!0,children:(0,N.jsxs)(l.Z,{sx:{color:"#666"},children:["Select ",s.useDefaultNoneSelected]})},""),null===t||void 0===t?void 0:t.map((function(e){var n,r,t,a=null!==(n=e.name)&&void 0!==n?n:e,i=null!==(r=e.value)&&void 0!==r?r:e;return(0,N.jsx)(V.Z,{value:i,children:a},null!==(t=e.id)&&void 0!==t?t:e.uid)}))]})),(0,N.jsx)(E.Z,{id:"".concat(r,"-helper-text"),error:o.touched[r]&&!!o.errors[r],children:o.touched[r]&&o.errors[r]?(0,N.jsx)(v.Bc,{name:r,render:function(e){return(0,T.upperFirst)(e)}}):(0,N.jsx)(N.Fragment,{children:s.helperText})})]})},G=r(1747),$=["label","name","placeholder","disabled","validate"],J=function(e){var n=e.label,r=e.name,t=e.placeholder,a=(e.disabled,e.validate),i=(0,w.Z)(e,$),s=(0,v.u6)();return(0,N.jsxs)(I.Z,{fullWidth:!0,size:"small",children:[(0,N.jsx)(v.gN,(0,b.Z)({as:k.Z,multiline:!0,name:r,id:r,validate:a,minRows:1,label:(0,T.startCase)(n),error:s.touched[r]&&!!s.errors[r],placeholder:(0,T.upperFirst)(null!==t&&void 0!==t?t:n),InputProps:{inputComponent:G.Z,inputProps:{style:{resize:"vertical",minHeight:"3.5rem"}}}},i.props)),(0,N.jsx)(E.Z,{id:"".concat(r,"-helper-text"),error:s.touched[r]&&!!s.errors[r],children:s.touched[r]&&s.errors[r]?(0,N.jsx)(v.Bc,{name:r,render:function(e){return(0,T.upperFirst)(e)}}):(0,N.jsx)(N.Fragment,{children:i.helperText})})]})},K=function(e){switch(e.type){case"select":var n;return(0,N.jsx)(X,(0,b.Z)({name:e.name,label:e.label,options:null!==(n=e.options)&&void 0!==n?n:[],disabled:e.disabled,placeholder:e.placeholder},e));case"text":return(0,N.jsx)(H,(0,b.Z)({name:e.name,label:e.label,disabled:e.disabled,placeholder:e.placeholder},e));case"autocomplete":var r;return(0,N.jsx)(R,(0,b.Z)({name:e.name,label:e.label,options:null!==(r=e.props.options)&&void 0!==r?r:[],dataLoading:e.props.loading,disabled:e.disabled,placeholder:e.placeholder},e));case"textarea":return(0,N.jsx)(J,(0,b.Z)({name:e.name,label:e.label,disabled:e.disabled,placeholder:e.placeholder},e));case"checkbox":return(0,N.jsx)(z,(0,b.Z)({name:e.name,label:e.label,disabled:e.disabled},e));default:return(0,N.jsx)(N.Fragment,{children:" No component matched... "})}},U=r(6884),Q=r(1070),Y=r.n(Q),ee=r(2068),ne=r(1582),re=r(773),te={limit:1e4,page:1},ae=function(e){var n=e.entityType,r=e.params,i=void 0===r?{}:r,s=e.sleep,l=void 0===s?0:s,o=(0,a.useState)(),c=(0,t.Z)(o,2),d=c[0],u=c[1];(0,U.Z)((function(){var e=Y()(re.H,n,i);u(e)}),[i,n]);var p=(0,ee.Z)((function(){return d||null}),(function(e){return(0,ne.k)(e,l)}),{shouldRetryOnError:!1}),h=p.data,f=p.isValidating,m=p.error,x=p.isLoading;return{data:null===h||void 0===h?void 0:h.results,validating:f,loading:x,error:m}},ie=r(2007),se=r(9823),le=function(e){var n=e.handleClose,r=e.isEditMode,l=(0,v.u6)(),o=(0,a.useRef)(l),c=(0,a.useState)(0),d=(0,t.Z)(c,2),u=d[0],m=d[1],x=(0,a.useState)([]),w=(0,t.Z)(x,2),k=w[0],I=w[1],S=ae({entityType:"people",sleep:1e3,params:(0,b.Z)((0,b.Z)({},te),{},{time:u})}),E=S.data,F=S.error,T=S.loading,P=ae({entityType:"starships",params:(0,b.Z)((0,b.Z)({},te),{},{time:u})}),A=P.data,q=P.error,O=P.loading,L=ae({entityType:"vehicles",params:(0,b.Z)((0,b.Z)({},te),{},{time:u})}),R=L.data,_=L.error,z=L.loading,D=ae({entityType:"planets",params:(0,b.Z)((0,b.Z)({},te),{},{time:u})}),H=D.data,M=D.error,V=(D.loading,ae({entityType:"species",params:(0,b.Z)((0,b.Z)({},te),{},{time:u})})),W=V.data,B=V.error,X=V.loading;(0,a.useEffect)((function(){I(oe)}),[]),(0,a.useEffect)((function(){o.current.resetForm()}),[u]);return(0,a.useEffect)((function(){E&&E.length>-1&&I((function(e){var n=e.findIndex((function(e){return"characters"===e.name}));return e[n].props.options=E,e}))}),[E]),(0,a.useEffect)((function(){I((function(e){var n=e.findIndex((function(e){return"characters"===e.name}));return e[n].props.loading=T,(0,Z.Z)(e)}))}),[T]),(0,a.useEffect)((function(){A&&A.length>-1&&I((function(e){var n=e.findIndex((function(e){return"starships"===e.name}));return e[n].props.options=A,e}))}),[A]),(0,a.useEffect)((function(){I((function(e){var n=e.findIndex((function(e){return"starships"===e.name}));return e[n].props.loading=O,(0,Z.Z)(e)}))}),[O]),(0,a.useEffect)((function(){R&&R.length>-1&&I((function(e){var n=e.findIndex((function(e){return"vehicles"===e.name}));return e[n].props.options=R,e}))}),[R]),(0,a.useEffect)((function(){I((function(e){var n=e.findIndex((function(e){return"vehicles"===e.name}));return e[n].props.loading=z,(0,Z.Z)(e)}))}),[z]),(0,a.useEffect)((function(){H&&H.length>-1&&I((function(e){var n=e.findIndex((function(e){return"planets"===e.name}));return e[n].options=H,(0,Z.Z)(e)}))}),[H]),(0,a.useEffect)((function(){W&&W.length>-1&&I((function(e){var n=e.findIndex((function(e){return"species"===e.name}));return e[n].props.options=W,e}))}),[W]),(0,a.useEffect)((function(){I((function(e){var n=e.findIndex((function(e){return"species"===e.name}));return e[n].props.loading=X,(0,Z.Z)(e)}))}),[X]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(j.Z,{children:(0,N.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,N.jsx)(s.Z,{children:r?"Editing":"Create New Movie"}),(0,N.jsxs)(s.Z,{direction:"row",children:[(0,N.jsx)(g.Z,{onClick:function(){m((new Date).getTime())},children:(0,N.jsx)(ie.Z,{})}),(0,N.jsx)(g.Z,{onClick:n,children:(0,N.jsx)(se.Z,{})})]})]})}),(0,N.jsx)(y.Z,{}),(0,N.jsx)(C.Z,{children:(0,N.jsxs)(s.Z,{direction:"column",spacing:2,children:[(F||B||_||q||M)&&(0,N.jsxs)(p.Z,{severity:"error",children:[(0,N.jsx)(h.Z,{children:"API Error"}),(0,N.jsx)(f.Z,{children:(0,N.jsxs)(N.Fragment,{children:["An API error occurred:",(0,N.jsx)(f.Z,{children:null===F||void 0===F?void 0:F.message}),(0,N.jsx)(f.Z,{children:null===B||void 0===B?void 0:B.message}),(0,N.jsx)(f.Z,{children:null===_||void 0===_?void 0:_.message}),(0,N.jsx)(f.Z,{children:null===q||void 0===q?void 0:q.message}),(0,N.jsx)(f.Z,{children:null===M||void 0===M?void 0:M.message})]})})]}),(0,N.jsx)(v.l0,{children:(0,N.jsx)(i.Z,{container:!0,spacing:2,children:k.map((function(e){return(0,N.jsx)(i.Z,{xs:12,children:K(e)},e.name)}))})})]})})]})},oe=[{name:"title",label:"title",placeholder:"A new hope",type:"text",disabled:!1,props:{variant:"outlined"}},{name:"director",label:"director",placeholder:"George Lucas",type:"text",disabled:!1,props:{variant:"outlined"}},{name:"characters",label:"characters",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,placeholder:"Luke Skywalker, Han Solo...",props:{options:[],multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"openingCrawl",label:"Opening crawl",placeholder:"In a galaxy far far away...",type:"textarea",disabled:!1},{name:"planets",label:"Select planet",type:"select",options:[],disabled:!1,props:{variant:"outlined"}},{name:"species",label:"Species",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,props:{multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"vehicles",label:"Vehicles",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,props:{multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"starships",label:"starships",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,props:{multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"canon",label:"Canon",type:"checkbox",disabled:!1}],ce=r(3123),de=ce.Ry({title:ce.Z_().required(),director:ce.Z_().required().min(1),openingCrawl:ce.Z_().required("Opening crawl text is a required field").min(5,"At least 5 characters is required for crawl text"),characters:ce.IX().min(1,"At least one character is required"),starships:ce.IX().min(1,"At least one starship is required"),planets:ce.Ry().required("Planet is a required field"),species:ce.IX().min(1,"At least one species is required"),vehicles:ce.IX().min(1,"At least one vehicle is required")}),ue=r(2795),pe={title:"",director:"",characters:[],starships:[],openingCrawl:"In a galaxy far far away...",planets:"",species:[],vehicles:[],canon:!1},he=function(e){var n=e.onClose,r=e.open,i=e.isEditMode,s=(0,a.useCallback)((function(e,r){"backdropClick"!==r&&n(null)}),[n]),l=(0,a.useState)(),c=(0,t.Z)(l,2),Z=c[0],b=c[1];return(0,N.jsx)(v.J9,{initialValues:pe,onSubmit:function(e){b(void 0),e&&function(e){var n=e.film,r=e.onSuccess,t=e.onFailure;(0,ue.e$)({url:Y()("https://kq-1-1a499.firebaseio.com/","/swdb/:user/added-films.json",{user:"yqu"}),body:JSON.stringify(n),onSuccess:r,onFailure:t})}({film:e,onSuccess:function(e){n(e)},onFailure:function(e){var n;b("".concat(null===(n=e.response)||void 0===n?void 0:n.data))}})},validationSchema:de,children:function(e){return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(d.Z,{onClose:s,open:r,disableEscapeKeyDown:!0,children:[(0,N.jsx)(le,{handleClose:s,isEditMode:i}),Z&&(0,N.jsxs)(p.Z,{severity:"error",children:[(0,N.jsx)(h.Z,{children:"API Error"}),(0,N.jsxs)(f.Z,{children:["An API error occurred: ",Z]})]}),(0,N.jsxs)(u.Z,{children:[(0,N.jsx)(o.Z,{variant:"text",startIcon:(0,N.jsx)(x.Z,{}),onClick:e.handleReset,children:"Reset"}),(0,N.jsx)(o.Z,{variant:"text",startIcon:(0,N.jsx)(m.Z,{}),onClick:e.submitForm,children:"Save"})]})]})})}})},fe=function(){var e=(0,a.useState)(!1),n=(0,t.Z)(e,2),r=n[0],d=n[1],u=(0,a.useCallback)((function(e){console.log(e),d(!1)}),[]);return(0,N.jsxs)(s.Z,{direction:"column",p:2,width:"100%",children:[(0,N.jsx)(i.Z,{container:!0,children:(0,N.jsx)(i.Z,{xs:12,children:(0,N.jsxs)(s.Z,{direction:"column",spacing:3,alignItems:"center",justifyContent:"center",children:[(0,N.jsx)(s.Z,{direction:"row",children:(0,N.jsx)(l.Z,{variant:"h6",children:"Create your own Starwars movie."})}),(0,N.jsx)(s.Z,{direction:"row",children:(0,N.jsx)(l.Z,{variant:"body2",children:"Try adding your own movie with starships, vehicles, species, and planet."})}),(0,N.jsx)(s.Z,{direction:"row",children:(0,N.jsx)(o.Z,{variant:"contained",startIcon:(0,N.jsx)(c.Z,{}),onClick:function(){d(!0)},children:"Add New Movie"})})]})})}),r&&(0,N.jsx)(he,{onClose:u,open:r})]})}},773:function(e,n,r){"use strict";r.d(n,{H:function(){return a},K:function(){return t}});var t="https://kq-1-1a499.firebaseio.com/",a="https://swapi.tech/api/"},1582:function(e,n,r){"use strict";r.d(n,{$:function(){return c},k:function(){return o}});var t=r(4165),a=r(5861),i=r(4569),s=r.n(i),l=r(5316),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,i=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=i.length>1&&void 0!==i[1]?i[1]:0)){e.next=4;break}return e.next=4,(0,l._)(r);case 4:return e.prev=4,e.next=7,s().get(n,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(a=e.sent).status){e.next=10;break}return e.abrupt("return",a.data);case 10:return e.abrupt("return",Promise.reject(a));case 13:throw e.prev=13,e.t0=e.catch(4),console.error("App fetcher GET error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,r){var a,i,o=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=o.length>2&&void 0!==o[2]?o[2]:0)){e.next=4;break}return e.next=4,(0,l._)(a);case 4:return e.prev=4,e.next=7,s().get(n,{headers:{"Content-Type":"application/json"},responseType:"json",signal:r.signal});case 7:if(200!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",i.data);case 10:return e.abrupt("return",Promise.reject(i));case 13:throw e.prev=13,e.t0=e.catch(4),"ERR_CANCELED"!==e.t0.code&&console.error("App fetcher GET error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n,r){return e.apply(this,arguments)}}()},2795:function(e,n,r){"use strict";r.d(n,{R3:function(){return s},e$:function(){return i}});var t=r(4569),a=r.n(t),i=function(e){var n=e.url,r=e.body,t=e.onSuccess,i=e.onFailure,s=e.onFinally;e.abortController;a().post(n,r).then((function(e){t&&t(e.data)})).catch((function(e){console.log("App error POST: ",e),i&&i(e)})).finally((function(){s&&s()}))},s=function(e){var n=e.url,r=e.body,t=e.onSuccess,i=e.onFailure,s=e.onFinally;e.abortController;a().put(n,r).then((function(e){t&&t(e.data)})).catch((function(e){console.log("App error PUT: ",e),i&&i(e)})).finally((function(){s&&s()}))}},5316:function(e,n,r){"use strict";function t(e){return new Promise((function(n,r){setTimeout((function(){n()}),e)}))}r.d(n,{_:function(){return t}})},4654:function(){}}]);
//# sourceMappingURL=101.c0a076f2.chunk.js.map