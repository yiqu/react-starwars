(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[125],{6936:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return me}});var r=n(885),i=n(2791),o=n(4162),a=n(5814),s=n(3811),c=n(6227),l=(0,n(2795).ZP)("https://kq-1-1a499.firebaseio.com/"),d="swdb/",u=function(e,t){var n,r,i="".concat(d).concat(e,"/favorites");return n=i,r=t,l.post(n+".json",r).then((function(e){return e.data})).catch((function(e){throw console.log("App error POST: ",e),e}))},f=function(e,t){var n,r,i="".concat(d).concat(e,"/favorites/").concat(t.fireId);return n=i,r=t,l.put(n+".json",r)},p=n(1413),v=n(2068),h=n(6884),m=n(1070),x=n.n(m),Z=n(1582),j=n(773),g=function(e){var t=e.userId,n=e.params,o=void 0===n?{}:n,a=(0,i.useState)(),s=(0,r.Z)(a,2),c=s[0],l=s[1],d=(0,i.useState)({}),u=(0,r.Z)(d,2),f=u[0],m=u[1];(0,h.Z)((function(){var e=x()(j.K,"/swdb/:user/favorites.json",(0,p.Z)({user:"yqu"},o));l(e)}),[t,o]);var g=(0,v.Z)((function(){return c||null}),(function(e){return(0,Z.k)(e)})),b=g.data,y=(g.isValidating,g.error),w=g.isLoading;return(0,i.useEffect)((function(){var e={};b&&(Object.keys(null!==b&&void 0!==b?b:{}).forEach((function(t){e[b[t].episodeId]=(0,p.Z)({fireId:t},b[t])})),m(e))}),[b]),{data:f,loading:w,error:y}},b=n(799),y=function(e){var t=e.params,n=void 0===t?{refetch:0}:t,o=(0,i.useState)(),a=(0,r.Z)(o,2),s=a[0],c=a[1];(0,h.Z)((function(){var e=x()(j.H,"/films",(0,p.Z)({},n));c(e)}),[n]);var l=(0,b.ZP)((function(){return s||null}),(function(e){return(0,Z.k)(e,1e3)}),{revalidateOnFocus:!1,revalidateIfStale:!0}),d=l.data,u=l.isValidating,f=l.error,v=l.isLoading;return{allFilms:null===d||void 0===d?void 0:d.result,allFilmsLoading:v,allFilmsValidating:u,allFilmsError:f}},w=n(5290),C=n(4169),F=n(5705),S=n(4942),P=n(3366),k=n(7462),E=n(8182),T=n(4419),I=n(9853),A=n(4565),L=n(1211),M=n(529),N=n(277),z=n(5878),D=n(1217);function _(e){return(0,D.Z)("MuiInputAdornment",e)}var R,U=(0,z.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),K=n(5513),O=n(184),Y=["children","className","component","disablePointerEvents","disableTypography","position","variant"],q=(0,N.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,I.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,k.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&(0,S.Z)({},"&.".concat(U.positionStart,"&:not(.").concat(U.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),B=i.forwardRef((function(e,t){var n=(0,K.Z)({props:e,name:"MuiInputAdornment"}),r=n.children,o=n.className,a=n.component,s=void 0===a?"div":a,c=n.disablePointerEvents,l=void 0!==c&&c,d=n.disableTypography,u=void 0!==d&&d,f=n.position,p=n.variant,v=(0,P.Z)(n,Y),h=(0,M.Z)()||{},m=p;p&&h.variant,h&&!m&&(m=h.variant);var x=(0,k.Z)({},n,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:l,position:f,variant:m}),Z=function(e){var t=e.classes,n=e.disablePointerEvents,r=e.hiddenLabel,i=e.position,o=e.size,a=e.variant,s={root:["root",n&&"disablePointerEvents",i&&"position".concat((0,I.Z)(i)),a,r&&"hiddenLabel",o&&"size".concat((0,I.Z)(o))]};return(0,T.Z)(s,_,t)}(x);return(0,O.jsx)(L.Z.Provider,{value:null,children:(0,O.jsx)(q,(0,k.Z)({as:s,ownerState:x,className:(0,E.Z)(Z.root,o),ref:t},v,{children:"string"!==typeof r||u?(0,O.jsxs)(i.Fragment,{children:["start"===f?R||(R=(0,O.jsx)("span",{className:"notranslate",children:"\u200b"})):null,r]}):(0,O.jsx)(A.Z,{color:"text.secondary",children:r})}))})}));var H=n(5051),V=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),n=(0,F.u6)(),o=n.values,a=(n.submitForm,function(e,t){var n=(0,i.useState)(e),o=(0,r.Z)(n,2),a=o[0],s=o[1];return(0,i.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(o,600));return(0,h.Z)((function(){t.filterChange(a)}),[a]),(0,O.jsx)(F.l0,{autoComplete:"off",style:{width:"100%"},children:(0,O.jsx)(H.Z,(0,p.Z)({},t.movieNameFilter))})},W=n(1245),G=(0,W.Z)((0,O.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),J=(0,W.Z)((0,O.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),X=function(e){var t=e.filterChange,n=(0,i.useCallback)((function(e){t(e)}),[t]),r=function(e){var t=""!==e.values.movieName;return{name:"movieName",type:"text",props:{placeholder:"Filter by name",variant:"standard",InputProps:{endAdornment:(0,O.jsx)(B,{position:"end",children:t&&(0,O.jsx)(s.Z,{onClick:function(){e.resetForm()},children:(0,O.jsx)(G,{})})}),startAdornment:(0,O.jsx)(B,{position:"start",children:(0,O.jsx)(J,{})})}}}};return(0,O.jsx)(F.J9,{initialValues:{movieName:""},onSubmit:function(e){},children:function(e){return(0,O.jsx)(V,{movieNameFilter:r(e),filterChange:n})}})},$=n(8928),Q=n(6875),ee=n(5194),te=n(199),ne=n(7205),re=n(1087),ie=n(7237),oe=n(2426),ae=n.n(oe),se=function(e){var t="",n=null!==e&&void 0!==e&&e.lastUpdated?ae()(null===e||void 0===e?void 0:e.lastUpdated).fromNow():"";return t=null!==e&&void 0!==e&&e.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==e&&void 0!==e&&e.lastUpdated&&(t=t+". "+(e.isCurrentFavorite?"Favorited ":"Unfavorited ")+n),t},ce=n(1155);function le(e){var t=e.film,n=e.favorited,r=e.onFavoriteToggle,i=e.uid;return(0,O.jsxs)($.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:4,children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(te.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(t.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,O.jsxs)(ee.Z,{children:[(0,O.jsxs)(o.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,O.jsx)(A.Z,{gutterBottom:!0,variant:"h5",component:re.rU,to:"./".concat(i),sx:{fontFamily:"Poppins",fontWeight:"500"},children:t.title}),(0,O.jsxs)(A.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",t.episode_id]})]}),(0,O.jsxs)(o.Z,{spacing:1,children:[(0,O.jsxs)(A.Z,{variant:"body2",color:"text.secondary",children:["Released: ",(0,O.jsx)(ce.Z,{date:t.release_date,format:"MMM Do YYYY"})]}),(0,O.jsxs)(A.Z,{variant:"body2",color:"text.secondary",children:["Directed by: ",t.director]}),(0,O.jsxs)(A.Z,{variant:"body2",color:"text.secondary",children:["Produced by: ",t.producer]}),(0,O.jsx)(A.Z,{variant:"body2",color:"text.primary",children:t.opening_crawl})]})]})]}),(0,O.jsxs)(Q.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,O.jsx)("div",{children:(0,O.jsx)(ne.Z,{size:"small",component:re.rU,to:"./".concat(i),children:"See More"})}),(0,O.jsx)("div",{children:(0,O.jsx)(s.Z,{"aria-label":"favorite",onClick:function(){r(t,n)},title:se(n),children:(0,O.jsx)(ie.Z,{color:t.userFavorited?"error":"disabled"})})})]})]})}var de=n(3808),ue=n(4596),fe=n(1372),pe=n(9841),ve=n(824),he="yqu",me=function(){Array.from(Array(3).keys());var e=(0,i.useState)(!1),t=(0,r.Z)(e,2),n=(t[0],t[1]),l=(0,i.useState)(0),d=(0,r.Z)(l,2),p=d[0],v=d[1],m=(0,i.useState)({}),x=(0,r.Z)(m,2),Z=x[0],j=x[1],b=(0,ue.Z)().isMobile,F=(0,re.lr)(),S=(0,r.Z)(F,2),P=S[0],k=S[1],E=P.get("moviePageDisplayMode"),T=(0,i.useState)(E),I=(0,r.Z)(T,2),A=I[0],L=(I[1],(0,i.useState)([])),M=(0,r.Z)(L,2),N=M[0],z=M[1],D=g({userId:he,params:{fetchTime:p}}),_=D.data,R=(D.error,D.loading,y({params:Z})),U=R.allFilms,K=R.allFilmsError,Y=R.allFilmsLoading,q=R.allFilmsValidating;(0,h.Z)((function(){z(function(e,t){var n=null!==e&&void 0!==e?e:[];return n&&n.sort((function(e,t){return e.properties.episode_id>t.properties.episode_id?1:-1})),n.forEach((function(e){var n;e.properties.userFavorited=null===(n=t[e.properties.episode_id])||void 0===n?void 0:n.isCurrentFavorite})),n}(U,_))}),[U,_]);var B=function(e,t){var r=e.url,i=r.split("/")[r.split("/").length-1],o={filmUrl:r,filmId:i,lastUpdated:(new Date).getTime(),episodeId:e.episode_id,isCurrentFavorite:!0};n(!0),t?(o.isCurrentFavorite=!t.isCurrentFavorite,o.fireId=t.fireId,f(he,o).then((function(e){})).catch((function(e){})).finally((function(){n(!1),v((new Date).getTime())}))):u(he,o).then((function(e){})).catch((function(e){})).finally((function(){n(!1),v((new Date).getTime())}))},H=(0,i.useCallback)((function(e){e.movieName?j({title:e.movieName}):j({})}),[]);return Y?(0,O.jsx)(C.Z,{count:4}):K?(0,O.jsx)("div",{children:"Error Page"}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(de.Z,{toolbarProps:{position:"sticky",sx:{top:b?"56px":"64px"}},children:(0,O.jsxs)(c.Z,{container:!0,xs:12,flexDirection:{xs:"row",sm:"row"},justifyContent:"space-between",alignItems:"center",children:[(0,O.jsx)(c.Z,{xs:10,sm:4,children:(0,O.jsxs)(o.Z,{direction:"row",justifyContent:"start",alignItems:"center",children:[(0,O.jsx)(X,{filterChange:H}),q&&(0,O.jsx)(w.Z,{size:20})]})}),(0,O.jsx)(c.Z,{xs:2,sm:8,children:(0,O.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",alignItems:"center",children:(0,O.jsx)(a.Z,{title:"Switch to ".concat(xe(A)),children:(0,O.jsx)(s.Z,{onClick:function(){var e={moviePageDisplayMode:xe(A)};k(e)},children:A===fe.K.CARD?(0,O.jsx)(pe.Z,{}):(0,O.jsx)(ve.Z,{})})})})})]})}),(0,O.jsx)(o.Z,{direction:"column",p:2,width:"100%",children:(0,O.jsx)(c.Z,{container:!0,disableEqualOverflow:!0,rowSpacing:4,children:null===N||void 0===N?void 0:N.map((function(e){return(0,O.jsx)(c.Z,{xs:12,sm:4,smOffset:4,children:(0,O.jsx)(le,{film:e.properties,onFavoriteToggle:B,favorited:_[e.properties.episode_id],uid:e.uid})},e.properties.episode_id)}))})})]})},xe=function(e){return e&&e===fe.K.CARD?fe.K.TABLE:fe.K.CARD}},773:function(e,t,n){"use strict";n.d(t,{H:function(){return i},K:function(){return r}});var r="https://kq-1-1a499.firebaseio.com/",i="https://swapi.tech/api/"},1155:function(e,t,n){"use strict";var r=n(5814),i=n(6431),o=n.n(i),a=n(2426),s=n.n(a),c=n(184);t.Z=function(e){var t=e.date,n=void 0===t?0:t,i=e.fromNow,a=void 0===i||i,l=e.format,d=void 0===l?"MM/DD/YY HH:mm":l;return(0,c.jsx)(r.Z,{title:n?s()(n).format(d):"No date found",children:(0,c.jsx)("span",{children:n?(0,c.jsx)(o(),{date:n,fromNow:a}):(0,c.jsx)(c.Fragment,{children:"N/A"})})})}},5290:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});n(2791);var r=n(4162),i=n(6580),o=n(184);function a(e){var t=e.size,n=void 0===t?40:t,a=e.color,s=void 0===a?"grey.500":a;return(0,o.jsx)(r.Z,{sx:{color:s},spacing:1,direction:"row",children:(0,o.jsx)(i.Z,{color:"inherit",size:n})})}},4169:function(e,t,n){"use strict";n(2791);var r=n(1441),i=n(4162),o=n(763),a=n(6227),s=n(184);t.Z=function(e){var t=e.count;return(0,s.jsxs)(a.Z,{direction:"column",padding:2,xs:12,children:[(0,s.jsx)(a.Z,{xs:12,md:6,children:(0,s.jsx)(r.Z,{variant:"text",sx:{fontSize:"2rem"}})}),(0,s.jsx)(a.Z,{container:!0,spacing:2,children:(0,o.times)(t,(function(e){return(0,s.jsxs)(a.Z,{xs:12,sm:12,md:!0,children:[(0,s.jsxs)(i.Z,{direction:"row",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,s.jsx)(r.Z,{variant:"text",sx:{fontSize:"2rem",width:"10rem"}}),(0,s.jsx)(r.Z,{variant:"circular",width:40,height:40})]}),(0,s.jsx)(r.Z,{variant:"rectangular",height:"30rem"})]},e)}))})]})}},3808:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),i=n(2892),o=n(4666),a=n(3906),s=n(184);function c(e){var t=e.toolbarProps,n=e.children;return(0,s.jsx)(i.Z,(0,r.Z)((0,r.Z)({elevation:0},t),{},{children:(0,s.jsx)(o.Z,{variant:"regular",sx:{bgcolor:function(e){return"light"===e.palette.mode?a.s[100]:null},color:function(e){return"light"===e.palette.mode?"#000":null}},children:n})}))}},1582:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});var r=n(4165),i=n(5861),o=n(4569),a=n.n(o),s=n(5316),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=o.length>1&&void 0!==o[1]?o[1]:0)){e.next=4;break}return e.next=4,(0,s._)(n);case 4:return e.prev=4,e.next=7,a().get(t,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",i.data);case 10:return e.abrupt("return",Promise.reject(i));case 13:throw e.prev=13,e.t0=e.catch(4),console.error("App fetcher GET error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},5051:function(e,t,n){"use strict";var r=n(1413),i=n(5987),o=(n(2791),n(9911)),a=n(5705),s=n(1898),c=n(7924),l=n(763),d=n(184),u=["label","name","validate","disabled","placeholder"];t.Z=function(e){var t=e.label,n=e.name,f=e.validate,p=e.disabled,v=e.placeholder,h=(0,i.Z)(e,u),m=(0,a.u6)();return(0,d.jsxs)(s.Z,{fullWidth:!0,size:"small",children:[(0,d.jsx)(a.gN,(0,r.Z)({as:o.Z,label:(0,l.startCase)(t),name:n,id:n,error:m.touched[n]&&!!m.errors[n],validate:f,variant:"standard",disabled:p,placeholder:(0,l.upperFirst)(null!==v&&void 0!==v?v:t)},h.props)),(0,d.jsx)(c.Z,{id:"".concat(n,"-helper-text"),error:m.touched[n]&&!!m.errors[n],children:m.touched[n]&&m.errors[n]?(0,d.jsx)(a.Bc,{name:n,render:function(e){return(0,l.upperFirst)(e)}}):(0,d.jsx)(d.Fragment,{children:h.helperText})})]})}},4596:function(e,t,n){"use strict";var r=n(2797),i=n(4142);t.Z=function(){var e=(0,i.Z)();return{isMobile:(0,r.Z)(e.breakpoints.down("sm")),isMed:(0,r.Z)(e.breakpoints.down("md")),isLg:(0,r.Z)(e.breakpoints.down("lg")),isXl:(0,r.Z)(e.breakpoints.down("xl"))}}},1372:function(e,t,n){"use strict";var r;n.d(t,{K:function(){return r}}),function(e){e.TABLE="table",e.CARD="card"}(r||(r={}))},2795:function(e,t,n){"use strict";n.d(t,{e$:function(){return o}});var r=n(4569),i=n.n(r),o=function(e){var t=e.url,n=e.body,r=e.onSuccess,o=e.onFailure,a=e.onFinally;e.abortController;i().post(t,n).then((function(e){r&&r(e.data)})).catch((function(e){console.log("App error POST: ",e),o&&o(e)})).finally((function(){a&&a()}))};t.ZP=function(e){return i().create({baseURL:e,timeout:5e3,headers:{"Content-Type":"application/json"},responseType:"json"})}},5316:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){setTimeout((function(){t()}),e)}))}n.d(t,{_:function(){return r}})},7237:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");t.Z=a},4654:function(){}}]);
//# sourceMappingURL=125.3a3900c9.chunk.js.map