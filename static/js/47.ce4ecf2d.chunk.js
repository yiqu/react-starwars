"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[47],{47:function(n,e,t){t.r(e),t.d(e,{default:function(){return $}});var r=t(885),i=t(2791),o=t(4162),s=t(5814),c=t(3811),a=t(6227),l=t(7150),u=t(7289),d=t(8928),f=t(6875),v=t(5194),x=t(199),p=t(7205),h=t(4565),j=t(1087),m=t(7237),Z=t(6976),g=t(8611),y=t(1155),b=t(773),C=t(2795),F=t(1070),w=t.n(F),I=t(184);function S(n){var e,t=n.film,s=n.uid,a=n.userId,l=n.allFavoritesLoading,u=n.reloadMovies,F=(0,i.useState)(!1),S=(0,r.Z)(F,2),L=S[0],P=S[1],U=(0,i.useState)(!1),k=(0,r.Z)(U,2),_=k[0],D=k[1];(0,i.useEffect)((function(){l||D(!1)}),[l]);return(0,I.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:2,children:[(0,I.jsxs)("div",{children:[(0,I.jsx)(x.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(t.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,I.jsxs)(v.Z,{children:[(0,I.jsxs)(o.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,I.jsx)(h.Z,{gutterBottom:!0,variant:"h5",component:j.rU,to:"./".concat(s),sx:{fontFamily:"Poppins",fontWeight:"500"},children:t.title}),(0,I.jsxs)(h.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",t.episode_id]})]}),(0,I.jsxs)(o.Z,{spacing:1,children:[(0,I.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Released: ",(0,I.jsx)(y.Z,{date:t.release_date,format:"MMM Do YYYY"})]}),(0,I.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Directed by: ",t.director]}),(0,I.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Produced by: ",t.producer]}),(0,I.jsx)(h.Z,{variant:"body2",color:"text.primary",children:t.opening_crawl})]})]})]}),(0,I.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,I.jsx)("div",{children:(0,I.jsx)(p.Z,{size:"small",component:j.rU,to:"./".concat(s),children:"See More"})}),(0,I.jsx)("div",{children:(0,I.jsx)(c.Z,{"aria-label":"favorite",onClick:function(){var n,e,r=t.url,i=r.split("/")[r.split("/").length-1],o=w()(b.K,"swdb/:user/favorites".concat(null!==(n=t.favorite)&&void 0!==n&&n.fireId?"/"+(null===(e=t.favorite)||void 0===e?void 0:e.fireId):"",".json"),{user:a}),s={filmUrl:r,filmId:i,lastUpdated:(new Date).getTime(),episodeId:t.episode_id,isCurrentFavorite:!0};P(!0),D(!0),t.favorite?(s.isCurrentFavorite=!t.favorite.isCurrentFavorite,s.fireId=t.favorite.fireId,(0,C.R3)({url:o,body:s,onSuccess:function(n){u()},onFailure:function(n){},onFinally:function(){P(!1)}})):(0,C.e$)({url:o,body:s,onSuccess:function(n){u()},onFailure:function(n){},onFinally:function(){P(!1)}})},title:(0,g.Q)(t.favorite),disabled:!(!L&&!_),children:L||_?(0,I.jsx)(Z.Z,{}):(0,I.jsx)(m.Z,{color:null!==(e=t.favorite)&&void 0!==e&&e.isCurrentFavorite?"error":"disabled"})})})]})]})}var L=t(3808),P=t(4596),U=t(1372),k=t(9841),_=t(824),D=t(6015),E="LoadingBackdrop_loadingbackdrop__fzQLF";var M=function(n){var e=n.isLoading,t=n.children;return(0,I.jsx)(D.Z,{className:e?"".concat(E):"",width:"100%",children:t})},A=t(3607),z=t(758),T=t(1917),K=t(4317),B=t(1413),R=t(8345),N=t(5153),V=t(1904);var Y=R.wL.actions,O=Y.getFavoritesFailure,Q=Y.getFavoritesStart,H=Y.getFavoritesSuccess,q=function(n){var e=w()(b.K,"/swdb/:user/favorites.json",(0,B.Z)({user:"yqu"},n));return function(n,t){n(Q()),function(n){var e=n.url,t=n.onSuccess,r=n.onFailure,i=n.onFinally;(0,V.h)(e).pipe((0,N.U)((function(n){return n.response}))).subscribe({next:function(n){t(n)},error:function(n){r(n.message)},complete:function(){i&&i()}})}({url:e,onSuccess:function(e){var t=function(n){var e=[];return n&&Object.keys(null!==n&&void 0!==n?n:{}).forEach((function(t){e.push((0,B.Z)({fireId:t},n[t]))})),e}(e);n(H(t))},onFailure:function(e){n(O(e))}})}},W=t(5826),X=t(3737),$=function(){var n=(0,K.T)(),e=(0,i.useContext)(A.Z).showSnackbar,t=(0,j.lr)(),d=(0,r.Z)(t,2),f=d[0],v=d[1],x=f.get("moviePageDisplayMode"),p=(0,P.Z)().isMobile,h=(0,i.useState)(x),m=(0,r.Z)(h,2),Z=m[0],g=(m[1],(0,K.C)(T.xU)),y=(0,K.C)(T.Qi),b=(0,K.C)(T.zh),C=(0,K.C)(W.xU),F=(0,K.C)(T.Xt);(0,i.useEffect)((function(){n(q())}),[n]),(0,i.useEffect)((function(){return function(){e("info",void 0)}}),[e]);var w=function(){n(q())},D=(0,i.useCallback)((function(e){n(X.iz({title:e}))}),[n]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(L.Z,{toolbarProps:{position:"sticky",sx:{top:p?"56px":"64px"}},children:(0,I.jsxs)(a.Z,{container:!0,xs:12,flexDirection:{xs:"row",sm:"row"},justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(a.Z,{xs:10,sm:4,children:(0,I.jsx)(o.Z,{direction:"row",justifyContent:"start",alignItems:"center",children:(0,I.jsxs)(a.Z,{container:!0,xs:12,children:[(0,I.jsx)(a.Z,{xs:8,children:(0,I.jsx)(u.Z,{filterChange:D})}),(0,I.jsx)(a.Z,{xs:2,sx:{display:"flex"},justifyContent:"center",alignItems:"center",children:y&&(0,I.jsx)(l.Z,{size:20})})]})})}),(0,I.jsx)(a.Z,{xs:2,sm:8,children:(0,I.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",alignItems:"center",children:(0,I.jsx)(s.Z,{title:"Switch to ".concat(G(Z)),children:(0,I.jsx)(c.Z,{onClick:function(){var n={moviePageDisplayMode:G(Z)};v(n)},children:Z===U.K.CARD?(0,I.jsx)(k.Z,{}):(0,I.jsx)(_.Z,{})})})})})]})}),(0,I.jsx)(M,{isLoading:g,children:b?(0,I.jsx)(z.Z,{reason:"Failed loading all films.",debug:b}):(0,I.jsx)(o.Z,{direction:"column",p:2,width:"100%",children:(0,I.jsx)(a.Z,{container:!0,disableEqualOverflow:!0,rowSpacing:4,children:null===F||void 0===F?void 0:F.map((function(n){return(0,I.jsx)(a.Z,{xs:12,sm:4,smOffset:4,children:(0,I.jsx)(S,{userId:"yqu",reloadMovies:w,film:n.properties,uid:n.uid,allFavoritesLoading:C})},n.properties.episode_id)}))})})})]})},G=function(n){return n&&n===U.K.CARD?U.K.TABLE:U.K.CARD}},3737:function(n,e,t){t.d(e,{Cs:function(){return s},K4:function(){return c},eI:function(){return o},hv:function(){return i},iz:function(){return a}});var r=t(9422).rT.actions,i=r.fetchFailure,o=r.fetchPayloadSuccess,s=r.setValidating,c=r.setLoading,a=(r.setUrl,r.setParams2)},1917:function(n,e,t){t.d(e,{Ky:function(){return p},Qi:function(){return f},Xt:function(){return x},xU:function(){return d},zh:function(){return v}});var r=t(1413),i=t(6916),o=t(9422),s=t(5826),c=t(8611),a=function(n){return n.allFilms},l=o.VL.getSelectors((function(n){return n.allFilms})),u=l.selectAll,d=(l.selectById,l.selectEntities,l.selectIds,l.selectTotal,function(n){return a(n).isLoading}),f=function(n){return a(n).isValidating},v=function(n){return a(n).errMsg},x=(0,i.P1)(u,s._d,(function(n,e){return(0,c.w)(n,e)})),p=(0,i.P1)((function(n){return a(n).apiParams}),(function(n){var e=(0,r.Z)({},n);return Object.keys(e).forEach((function(n){""==="".concat(e[n]).trim()&&delete e[n]})),e}))},5826:function(n,e,t){t.d(e,{_d:function(){return u},xU:function(){return l}});var r=t(1413),i=t(6916),o=t(8345),s=function(n){return n.favoriteFilms},c=o.VL.getSelectors((function(n){return n.favoriteFilms})),a=c.selectAll,l=(c.selectById,c.selectEntities,c.selectIds,c.selectTotal,function(n){return s(n).loading}),u=(0,i.P1)(a,(function(n){var e={};return n.forEach((function(n){e[n.episodeId]=(0,r.Z)({},n)})),e}))},8611:function(n,e,t){t.d(e,{Q:function(){return s},w:function(){return c}});var r=t(2426),i=t.n(r),o=t(2546),s=function(n){var e="",t=null!==n&&void 0!==n&&n.lastUpdated?i()(null===n||void 0===n?void 0:n.lastUpdated).fromNow():"";return e=null!==n&&void 0!==n&&n.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==n&&void 0!==n&&n.lastUpdated&&(e=e+". "+(n.isCurrentFavorite?"Favorited ":"Unfavorited ")+t),e},c=function(n,e){return(0,o.ZP)(null!==n&&void 0!==n?n:[],(function(n){n.sort((function(n,e){return n.properties.episode_id>e.properties.episode_id?1:-1})),n.forEach((function(n){n.properties.favorite=e[n.properties.episode_id]}))}))}},1155:function(n,e,t){var r=t(5814),i=t(6431),o=t.n(i),s=t(2426),c=t.n(s),a=t(184);e.Z=function(n){var e=n.date,t=void 0===e?0:e,i=n.fromNow,s=void 0===i||i,l=n.format,u=void 0===l?"MM/DD/YY HH:mm":l;return(0,a.jsx)(r.Z,{title:t?c()(t).format(u):"No date found",children:(0,a.jsx)("span",{children:t?(0,a.jsx)(o(),{date:t,fromNow:s}):(0,a.jsx)(a.Fragment,{children:"N/A"})})})}},1372:function(n,e,t){var r;t.d(e,{K:function(){return r}}),function(n){n.TABLE="table",n.CARD="card"}(r||(r={}))},2795:function(n,e,t){t.d(e,{R3:function(){return s},e$:function(){return o}});var r=t(4569),i=t.n(r),o=function(n){var e=n.url,t=n.body,r=n.onSuccess,o=n.onFailure,s=n.onFinally;n.abortController;i().post(e,t).then((function(n){r&&r(n.data)})).catch((function(n){console.log("App error POST: ",n),o&&o(n)})).finally((function(){s&&s()}))},s=function(n){var e=n.url,t=n.body,r=n.onSuccess,o=n.onFailure,s=n.onFinally;n.abortController;i().put(e,t).then((function(n){r&&r(n.data)})).catch((function(n){console.log("App error PUT: ",n),o&&o(n)})).finally((function(){s&&s()}))}},4317:function(n,e,t){t.d(e,{C:function(){return o},T:function(){return i}});var r=t(9434),i=r.I0,o=r.v9},7237:function(n,e,t){var r=t(4836);e.Z=void 0;var i=r(t(5649)),o=t(184),s=(0,i.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");e.Z=s},6976:function(n,e,t){var r=t(4836);e.Z=void 0;var i=r(t(5649)),o=t(184),s=(0,i.default)((0,o.jsx)("path",{d:"m18 22-.01-6L14 12l3.99-4.01L18 2H6v6l4 4-4 3.99V22h12zM8 7.5V4h8v3.5l-4 4-4-4z"}),"HourglassBottom");e.Z=s}}]);
//# sourceMappingURL=47.ce4ecf2d.chunk.js.map