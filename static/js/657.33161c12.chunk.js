"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[657],{9657:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var i=t(885),r=t(2791),o=t(4162),s=t(5814),c=t(3811),a=t(6227),l=t(7150),u=t(7289),d=t(8928),f=t(6875),v=t(5194),x=t(199),p=t(7205),h=t(4565),j=t(1087),m=t(7237),Z=t(6976),g=t(2426),y=t.n(g),b=t(2546),C=function(e){var n="",t=null!==e&&void 0!==e&&e.lastUpdated?y()(null===e||void 0===e?void 0:e.lastUpdated).fromNow():"";return n=null!==e&&void 0!==e&&e.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==e&&void 0!==e&&e.lastUpdated&&(n=n+". "+(e.isCurrentFavorite?"Favorited ":"Unfavorited ")+t),n},F=t(1155),w=t(773),S=t(2795),I=t(1070),L=t.n(I),k=t(184);function D(e){var n,t=e.film,s=e.uid,a=e.userId,l=e.allFavoritesLoading,u=e.reloadMovies,g=(0,r.useState)(!1),y=(0,i.Z)(g,2),b=y[0],I=y[1],D=(0,r.useState)(!1),M=(0,i.Z)(D,2),A=M[0],E=M[1];(0,r.useEffect)((function(){l||E(!1)}),[l]);return(0,k.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:2,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(x.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(t.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,k.jsxs)(v.Z,{children:[(0,k.jsxs)(o.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,k.jsx)(h.Z,{gutterBottom:!0,variant:"h5",component:j.rU,to:"./".concat(s),sx:{fontFamily:"Poppins",fontWeight:"500"},children:t.title}),(0,k.jsxs)(h.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",t.episode_id]})]}),(0,k.jsxs)(o.Z,{spacing:1,children:[(0,k.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Released: ",(0,k.jsx)(F.Z,{date:t.release_date,format:"MMM Do YYYY"})]}),(0,k.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Directed by: ",t.director]}),(0,k.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Produced by: ",t.producer]}),(0,k.jsx)(h.Z,{variant:"body2",color:"text.primary",children:t.opening_crawl})]})]})]}),(0,k.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)("div",{children:(0,k.jsx)(p.Z,{size:"small",component:j.rU,to:"./".concat(s),children:"See More"})}),(0,k.jsx)("div",{children:(0,k.jsx)(c.Z,{"aria-label":"favorite",onClick:function(){var e,n,i=t.url,r=i.split("/")[i.split("/").length-1],o=L()(w.K,"swdb/:user/favorites".concat(null!==(e=t.favorite)&&void 0!==e&&e.fireId?"/"+(null===(n=t.favorite)||void 0===n?void 0:n.fireId):"",".json"),{user:a}),s={filmUrl:i,filmId:r,lastUpdated:(new Date).getTime(),episodeId:t.episode_id,isCurrentFavorite:!0};I(!0),E(!0),t.favorite?(s.isCurrentFavorite=!t.favorite.isCurrentFavorite,s.fireId=t.favorite.fireId,(0,S.R3)({url:o,body:s,onSuccess:function(e){u()},onFailure:function(e){},onFinally:function(){I(!1)}})):(0,S.e$)({url:o,body:s,onSuccess:function(e){u()},onFailure:function(e){},onFinally:function(){I(!1)}})},title:C(t.favorite),disabled:!(!b&&!A),children:b||A?(0,k.jsx)(Z.Z,{}):(0,k.jsx)(m.Z,{color:null!==(n=t.favorite)&&void 0!==n&&n.isCurrentFavorite?"error":"disabled"})})})]})]})}var M=t(3808),A=t(4596),E=t(1372),U=t(9841),_=t(824),P=t(6884),T=t(6015),z="LoadingBackdrop_loadingbackdrop__fzQLF";var B=function(e){var n=e.isLoading,t=e.children;return(0,k.jsx)(T.Z,{className:n?"".concat(z):"",width:"100%",children:t})},R=t(3607),K=t(758),N=t(1917),Y=t(4317),V=t(1413),H=t(8345),O=t(5153),q=t(1904);var Q=H.wL.actions,W=Q.getFavoritesFailure,$=Q.getFavoritesStart,G=Q.getFavoritesSuccess,J=function(e){var n=L()(w.K,"/swdb/:user/favorites.json",(0,V.Z)({user:"yqu"},e));return function(e,t){e($()),function(e){var n=e.url,t=e.onSuccess,i=e.onFailure,r=e.onFinally;(0,q.h)(n).pipe((0,O.U)((function(e){return e.response}))).subscribe({next:function(e){t(e)},error:function(e){i(e.message)},complete:function(){r&&r()}})}({url:n,onSuccess:function(n){var t=function(e){var n=[];return e&&Object.keys(null!==e&&void 0!==e?e:{}).forEach((function(t){n.push((0,V.Z)({fireId:t},e[t]))})),n}(n);e(G(t))},onFailure:function(n){e(W(n))}})}},X=t(6916),ee=function(e){return e.favoriteFilms},ne=H.VL.getSelectors((function(e){return e.favoriteFilms})),te=ne.selectAll,ie=(ne.selectById,ne.selectEntities,ne.selectIds,ne.selectTotal,function(e){return ee(e).loading}),re=(0,X.P1)(te,(function(e){var n={};return e.forEach((function(e){n[e.episodeId]=(0,V.Z)({},e)})),n})),oe=function(){var e=(0,Y.T)(),n=(0,r.useContext)(R.Z).showSnackbar,t=(0,j.lr)(),d=(0,i.Z)(t,2),f=d[0],v=d[1],x=f.get("moviePageDisplayMode"),p=(0,A.Z)().isMobile,h=(0,r.useState)(x),m=(0,i.Z)(h,2),Z=m[0],g=(m[1],(0,r.useState)({})),y=(0,i.Z)(g,2),C=(y[0],y[1]),F=(0,r.useState)([]),w=(0,i.Z)(F,2),S=w[0],I=w[1],L=(0,Y.C)(N.td),T=(0,Y.C)(N.xU),z=(0,Y.C)(N.Qi),V=(0,Y.C)(N.zh),H=(0,Y.C)(re),O=(0,Y.C)(ie);(0,P.Z)((function(){var e,n;I((e=L,n=H,(0,b.ZP)(null!==e&&void 0!==e?e:[],(function(e){e.sort((function(e,n){return e.properties.episode_id>n.properties.episode_id?1:-1})),e.forEach((function(e){e.properties.favorite=n[e.properties.episode_id]}))}))))}),[L,H]),(0,r.useEffect)((function(){e(J())}),[e]),(0,r.useEffect)((function(){return function(){n("info",void 0)}}),[n]);var q=function(){e(J())},Q=(0,r.useCallback)((function(e){C(e?{title:e}:{})}),[]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(M.Z,{toolbarProps:{position:"sticky",sx:{top:p?"56px":"64px"}},children:(0,k.jsxs)(a.Z,{container:!0,xs:12,flexDirection:{xs:"row",sm:"row"},justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(a.Z,{xs:10,sm:4,children:(0,k.jsx)(o.Z,{direction:"row",justifyContent:"start",alignItems:"center",children:(0,k.jsxs)(a.Z,{container:!0,xs:12,children:[(0,k.jsx)(a.Z,{xs:8,children:(0,k.jsx)(u.Z,{filterChange:Q})}),(0,k.jsx)(a.Z,{xs:2,sx:{display:"flex"},justifyContent:"center",alignItems:"center",children:z&&(0,k.jsx)(l.Z,{size:20})})]})})}),(0,k.jsx)(a.Z,{xs:2,sm:8,children:(0,k.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",alignItems:"center",children:(0,k.jsx)(s.Z,{title:"Switch to ".concat(se(Z)),children:(0,k.jsx)(c.Z,{onClick:function(){var e={moviePageDisplayMode:se(Z)};v(e)},children:Z===E.K.CARD?(0,k.jsx)(U.Z,{}):(0,k.jsx)(_.Z,{})})})})})]})}),(0,k.jsx)(B,{isLoading:T,children:V?(0,k.jsx)(K.Z,{reason:"Failed loading all films.",debug:V}):(0,k.jsx)(o.Z,{direction:"column",p:2,width:"100%",children:(0,k.jsx)(a.Z,{container:!0,disableEqualOverflow:!0,rowSpacing:4,children:null===S||void 0===S?void 0:S.map((function(e){return(0,k.jsx)(a.Z,{xs:12,sm:4,smOffset:4,children:(0,k.jsx)(D,{userId:"yqu",reloadMovies:q,film:e.properties,uid:e.uid,allFavoritesLoading:O})},e.properties.episode_id)}))})})})]})},se=function(e){return e&&e===E.K.CARD?E.K.TABLE:E.K.CARD}},1917:function(e,n,t){t.d(n,{Qi:function(){return a},e:function(){return l},td:function(){return s},xU:function(){return c},zh:function(){return u}});var i=t(9422),r=function(e){return e.allFilms},o=i.VL.getSelectors((function(e){return e.allFilms})),s=o.selectAll,c=(o.selectById,o.selectEntities,o.selectIds,o.selectTotal,function(e){return r(e).isLoading}),a=function(e){return r(e).isValidating},l=function(e){return r(e).apiParams},u=function(e){return r(e).errMsg}},1155:function(e,n,t){var i=t(5814),r=t(6431),o=t.n(r),s=t(2426),c=t.n(s),a=t(184);n.Z=function(e){var n=e.date,t=void 0===n?0:n,r=e.fromNow,s=void 0===r||r,l=e.format,u=void 0===l?"MM/DD/YY HH:mm":l;return(0,a.jsx)(i.Z,{title:t?c()(t).format(u):"No date found",children:(0,a.jsx)("span",{children:t?(0,a.jsx)(o(),{date:t,fromNow:s}):(0,a.jsx)(a.Fragment,{children:"N/A"})})})}},1372:function(e,n,t){var i;t.d(n,{K:function(){return i}}),function(e){e.TABLE="table",e.CARD="card"}(i||(i={}))},2795:function(e,n,t){t.d(n,{R3:function(){return s},e$:function(){return o}});var i=t(4569),r=t.n(i),o=function(e){var n=e.url,t=e.body,i=e.onSuccess,o=e.onFailure,s=e.onFinally;e.abortController;r().post(n,t).then((function(e){i&&i(e.data)})).catch((function(e){console.log("App error POST: ",e),o&&o(e)})).finally((function(){s&&s()}))},s=function(e){var n=e.url,t=e.body,i=e.onSuccess,o=e.onFailure,s=e.onFinally;e.abortController;r().put(n,t).then((function(e){i&&i(e.data)})).catch((function(e){console.log("App error PUT: ",e),o&&o(e)})).finally((function(){s&&s()}))}},4317:function(e,n,t){t.d(n,{C:function(){return o},T:function(){return r}});var i=t(9434),r=i.I0,o=i.v9},7237:function(e,n,t){var i=t(4836);n.Z=void 0;var r=i(t(5649)),o=t(184),s=(0,r.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");n.Z=s},6976:function(e,n,t){var i=t(4836);n.Z=void 0;var r=i(t(5649)),o=t(184),s=(0,r.default)((0,o.jsx)("path",{d:"m18 22-.01-6L14 12l3.99-4.01L18 2H6v6l4 4-4 3.99V22h12zM8 7.5V4h8v3.5l-4 4-4-4z"}),"HourglassBottom");n.Z=s}}]);
//# sourceMappingURL=657.33161c12.chunk.js.map