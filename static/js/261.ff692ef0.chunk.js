"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[261],{93261:function(n,t,r){r.r(t),r.d(t,{default:function(){return C}});var e,i=r(72791),u=r(57689),o=r(1413),a=r(70885),c=r(799),s=r(96884),f=r(51070),l=r.n(f),d=r(95885),v=r(70773),p=function(n){var t=n.params,r=void 0===t?{refetch:0}:t,e=(0,i.useState)(),u=(0,a.Z)(e,2),f=u[0],p=u[1],m=(0,i.useRef)(new AbortController);(0,s.Z)((function(){var n=l()(v.H,"/films",(0,o.Z)({},r));m.current.abort(),m.current=new AbortController,p(n)}),[r]);var h=(0,c.ZP)((function(){return f||null}),(function(n){return(0,d.$)(n,m.current)}),{revalidateOnFocus:!1,revalidateIfStale:!0,keepPreviousData:!0,shouldRetryOnError:!0}),E=h.data,g=h.isValidating,C=h.error,F=h.isLoading;return{allFilms:null===E||void 0===E?void 0:E.result,allFilmsLoading:F,allFilmsValidating:g,allFilmsError:C}},m=r(64317),h=r(81917),E=r(83737);!function(n){n.ERR_CANCELED="ERR_CANCELED"}(e||(e={}));var g=r(80184);function C(){var n=(0,m.T)(),t=(0,m.C)(h.Ky),r=p({params:t}),o=r.allFilms,a=r.allFilmsError,c=r.allFilmsLoading,s=r.allFilmsValidating;return(0,i.useEffect)((function(){n(E.eI(null!==o&&void 0!==o?o:[]))}),[o,n]),(0,i.useEffect)((function(){n(E.K4(c))}),[c,n]),(0,i.useEffect)((function(){n(E.Cs(s))}),[s,n]),(0,i.useEffect)((function(){a&&a.code!==e.ERR_CANCELED&&n(E.hv(a))}),[a,n]),(0,g.jsx)(u.j3,{})}},83737:function(n,t,r){r.d(t,{Cs:function(){return o},K4:function(){return a},eI:function(){return u},hv:function(){return i},iz:function(){return c}});var e=r(89422).rT.actions,i=e.fetchFailure,u=e.fetchPayloadSuccess,o=e.setValidating,a=e.setLoading,c=(e.setUrl,e.setParams2)},81917:function(n,t,r){r.d(t,{Ky:function(){return m},Qi:function(){return d},Xt:function(){return p},xU:function(){return l},zh:function(){return v}});var e=r(1413),i=r(46916),u=r(89422),o=r(58611),a=r(5826),c=function(n){return n.allFilms},s=u.VL.getSelectors((function(n){return n.allFilms})),f=s.selectAll,l=(s.selectById,s.selectEntities,s.selectIds,s.selectTotal,function(n){return c(n).isLoading}),d=function(n){return c(n).isValidating},v=function(n){return c(n).errMsg},p=(0,i.P1)(f,a._d,(function(n,t){return(0,o.w)(n,t)})),m=(0,i.P1)((function(n){return c(n).apiParams}),(function(n){var t=(0,e.Z)({},n);return Object.keys(t).forEach((function(n){""==="".concat(t[n]).trim()&&delete t[n]})),t}))},5826:function(n,t,r){r.d(t,{RK:function(){return l},_d:function(){return d},f3:function(){return v},xU:function(){return f}});var e=r(1413),i=r(46916),u=r(92546),o=r(18581),a=function(n){return n.favoriteFilms},c=o.VL.getSelectors((function(n){return n.favoriteFilms})),s=c.selectAll,f=(c.selectById,c.selectEntities,c.selectIds,c.selectTotal,function(n){return a(n).loading}),l=function(n){return a(n).firstTimeLoading},d=(0,i.P1)(s,(function(n){var t={};return n.forEach((function(n){t[n.episodeId]=(0,e.Z)({},n)})),t})),v=(0,i.P1)(s,(function(n){return(0,u.ZP)(n,(function(n){return n.filter((function(n){return!!n.isCurrentFavorite}))}))}))},58611:function(n,t,r){r.d(t,{Q:function(){return o},w:function(){return a}});var e=r(72426),i=r.n(e),u=r(92546),o=function(n){var t="",r=null!==n&&void 0!==n&&n.lastUpdated?i()(null===n||void 0===n?void 0:n.lastUpdated).fromNow():"";return t=null!==n&&void 0!==n&&n.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==n&&void 0!==n&&n.lastUpdated&&(t=t+". "+(n.isCurrentFavorite?"Favorited ":"Unfavorited ")+r),t},a=function(n,t){return(0,u.ZP)(null!==n&&void 0!==n?n:[],(function(n){n.sort((function(n,t){return n.properties.episode_id>t.properties.episode_id?1:-1})),n.forEach((function(n){n.properties.favorite=t[n.properties.episode_id]}))}))}},95885:function(n,t,r){r.d(t,{k:function(){return c},$:function(){return s}});var e=r(74165),i=r(15861),u=r(74569),o=r.n(u);function a(n){return new Promise((function(t,r){setTimeout((function(){t()}),n)}))}var c=function(){var n=(0,i.Z)((0,e.Z)().mark((function n(t){var r,i,u=arguments;return(0,e.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=u.length>1&&void 0!==u[1]?u[1]:0)){n.next=4;break}return n.next=4,a(r);case 4:return n.prev=4,n.next=7,o().get(t,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(i=n.sent).status){n.next=10;break}return n.abrupt("return",i.data);case 10:return n.abrupt("return",Promise.reject(i));case 13:throw n.prev=13,n.t0=n.catch(4),console.error("App fetcher GET error:",n.t0),n.t0;case 17:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(t){return n.apply(this,arguments)}}(),s=function(){var n=(0,i.Z)((0,e.Z)().mark((function n(t,r){var i,u,c=arguments;return(0,e.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=c.length>2&&void 0!==c[2]?c[2]:0)){n.next=4;break}return n.next=4,a(i);case 4:return n.prev=4,n.next=7,o().get(t,{headers:{"Content-Type":"application/json"},responseType:"json",signal:r.signal});case 7:if(200!==(u=n.sent).status){n.next=10;break}return n.abrupt("return",u.data);case 10:return n.abrupt("return",Promise.reject(u));case 13:throw n.prev=13,n.t0=n.catch(4),"ERR_CANCELED"!==n.t0.code&&console.error("App fetcher GET error:",n.t0),n.t0;case 17:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(t,r){return n.apply(this,arguments)}}()},64317:function(n,t,r){r.d(t,{C:function(){return u},T:function(){return i}});var e=r(59434),i=e.I0,u=e.v9}}]);
//# sourceMappingURL=261.ff692ef0.chunk.js.map