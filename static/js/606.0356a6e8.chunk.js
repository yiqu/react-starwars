"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[606],{7686:function(e,t,n){n.d(t,{F:function(){return u}});var r=n(4165),i=n(5861),a=n(4569),o=n.n(a)().create({baseURL:"https://swapi.tech/api/",timeout:5e3,headers:{"Content-Type":"application/json"},responseType:"json"}),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.get(e,{params:t})},c=n(5316),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=a.length>2&&void 0!==a[2]?a[2]:0)){e.next=4;break}return e.next=4,(0,c._)(i);case 4:return e.next=6,s(t,n).then((function(e){return e.data})).catch((function(e){if(409!==e.response.status)throw e}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},7606:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(885),i=n(3319),a=n(2791),o=n(4165),s=n(5861),c=n(4569),u=n.n(c)().create({baseURL:"https://kq-1-1a499.firebaseio.com/",timeout:5e3,headers:{"Content-Type":"application/json"},responseType:"json"}),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u.get(e+".json",{params:t})},d=n(5316),f="swdb/",p=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=a.length>2&&void 0!==a[2]?a[2]:0)){e.next=4;break}return e.next=4,(0,d._)(r);case 4:return i="".concat(f).concat(t,"/favorites"),e.next=7,l(i,n).then((function(e){return e.data})).catch((function(e){if(409!==e.response.status)throw e}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e,t){var n,r,i="".concat(f).concat(e,"/favorites");return n=i,r=t,u.post(n+".json",r)},v=function(e,t){var n,r,i="".concat(f).concat(e,"/favorites/").concat(t.fireId);return n=i,r=t,u.put(n+".json",r)},h=n(1413),x=n(2419),Z=function(e){var t=(0,x.ZP)((function(){return e.params.fetchTime?[e.userId,e.params]:null}),p,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),n=t.data,r=t.isValidating,i=t.error,a=t.mutate,o={};n&&Object.keys(null!==n&&void 0!==n?n:{}).forEach((function(e){o[n[e].episodeId]=(0,h.Z)({fireId:e},n[e])}));return{data:o,loading:r||!i&&!n,error:i,mutate:a}},j=n(7686),g=function(e){var t=(0,x.ZP)((function(){return[e.url,e.params]}),j.F,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),n=t.data,r=t.isValidating,i=t.error;return{data:n,loading:r||!i&&!n,error:i,mutate:t.mutate}},b=n(4169),y=n(5705),w=n(8254),C=n(3811),F=n(6459),k=n(5051),T=n(6884),_=n(184),I=function(e){var t=Object.assign({},((0,F.Z)(e),e)),n=(0,y.u6)(),i=n.values,o=(n.submitForm,function(e,t){var n=(0,a.useState)(e),i=(0,r.Z)(n,2),o=i[0],s=i[1];return(0,a.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),o}(i,600));return(0,T.Z)((function(){t.filterChange(o)}),[o]),(0,_.jsx)(y.l0,{autoComplete:"off",children:(0,_.jsx)(k.Z,(0,h.Z)({},t.movieNameFilter))})},N=n(6739),U=n(2167),S=function(e){var t=e.filterChange,n=(0,a.useCallback)((function(e){t(e)}),[t]),r=function(e){var t=""!==e.values.movieName;return{name:"movieName",placeholder:"Filter by name",id:"movieName",variant:"standard",InputProps:{endAdornment:(0,_.jsx)(w.Z,{position:"end",children:t&&(0,_.jsx)(C.Z,{onClick:function(){e.resetForm()},children:(0,_.jsx)(N.Z,{})})}),startAdornment:(0,_.jsx)(w.Z,{position:"start",children:(0,_.jsx)(U.Z,{})})}}};return(0,_.jsx)(y.J9,{initialValues:{movieName:""},onSubmit:function(e){},children:function(e){return(0,_.jsx)(I,{movieNameFilter:r(e),filterChange:n})}})},P=n(8928),D=n(6875),E=n(5194),O=n(199),R=n(7205),A=n(4565),L=n(1087),M=n(2797),V=n(4142),W=function(){var e=(0,V.Z)();return{isMobile:(0,M.Z)(e.breakpoints.down("sm")),isMed:(0,M.Z)(e.breakpoints.down("md")),isLg:(0,M.Z)(e.breakpoints.down("lg")),isXl:(0,M.Z)(e.breakpoints.down("xl"))}},q=n(7237),z=n(4162),B=n(2426),X=n.n(B),J=function(e){var t="",n=null!==e&&void 0!==e&&e.lastUpdated?X()(null===e||void 0===e?void 0:e.lastUpdated).fromNow():"";return t=null!==e&&void 0!==e&&e.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==e&&void 0!==e&&e.lastUpdated&&(t=t+". "+(e.isCurrentFavorite?"Favorited ":"Unfavorited ")+n),t},G=function(e){W().isXl;return(0,_.jsxs)(P.Z,{sx:{border:"2px solid #726f53",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:4,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(O.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(e.film.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,_.jsxs)(E.Z,{children:[(0,_.jsxs)(z.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,_.jsx)(A.Z,{gutterBottom:!0,variant:"h5",component:L.rU,to:"./".concat(e.uid),sx:{fontFamily:"Poppins",fontWeight:"500"},children:e.film.title}),(0,_.jsxs)(A.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",e.film.episode_id]})]}),(0,_.jsxs)(A.Z,{variant:"body2",color:"text.secondary",children:["Released: ",e.film.release_date]}),(0,_.jsxs)(A.Z,{variant:"body2",color:"text.secondary",children:["Directed by: ",e.film.director]}),(0,_.jsxs)(A.Z,{variant:"body2",color:"text.secondary",children:["Produced by: ",e.film.producer]}),(0,_.jsx)(A.Z,{variant:"body2",color:"text.primary",sx:{mt:"10px"},children:e.film.opening_crawl})]})]}),(0,_.jsxs)(D.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,_.jsx)("div",{children:(0,_.jsx)(R.Z,{size:"small",component:L.rU,to:"./".concat(e.uid),children:"Learn More"})}),(0,_.jsx)("div",{children:(0,_.jsx)(C.Z,{"aria-label":"favorite",onClick:function(){e.onFavoriteToggle(e.film,e.favorited)},title:J(e.favorited),children:(0,_.jsx)(q.Z,{color:e.film.userFavorited?"error":"disabled"})})})]})]})},H="yqu",K=function(){var e=Array.from(Array(3).keys()),t=(0,a.useState)(!1),n=(0,r.Z)(t,2),o=(n[0],n[1]),s=(0,a.useState)(0),c=(0,r.Z)(s,2),u=c[0],l=c[1],d=(0,a.useState)({}),f=(0,r.Z)(d,2),p=f[0],h=f[1],x=Z({userId:H,params:{fetchTime:u}}),j=x.data,y=(x.error,x.loading,x.mutate,g({url:"films",params:p})),w=y.data,C=y.error,F=y.loading,k=(y.mutate,(0,a.useMemo)((function(){var e,t=null!==(e=null===w||void 0===w?void 0:w.result)&&void 0!==e?e:[];return t&&t.sort((function(e,t){return e.properties.episode_id>t.properties.episode_id?1:-1})),t.forEach((function(e){var t;e.properties.userFavorited=null===(t=j[e.properties.episode_id])||void 0===t?void 0:t.isCurrentFavorite})),t}),[w,j]));(0,a.useEffect)((function(){l((new Date).getTime())}),[]);var T=function(e,t){var n=e.url,r=n.split("/")[n.split("/").length-1],i={filmUrl:n,filmId:r,lastUpdated:(new Date).getTime(),episodeId:e.episode_id,isCurrentFavorite:!0};o(!0),t?(i.isCurrentFavorite=!t.isCurrentFavorite,i.fireId=t.fireId,v(H,i).then((function(e){})).catch((function(e){})).finally((function(){o(!1),l((new Date).getTime())}))):m(H,i).then((function(e){})).catch((function(e){})).finally((function(){o(!1),l((new Date).getTime())}))},I=(0,a.useCallback)((function(e){e.movieName?h({title:e.movieName}):h({})}),[]);return(0,_.jsxs)(i.Z,{container:!0,spacing:2,mx:2,my:2,xs:12,children:[C&&(0,_.jsx)("div",{children:"Error occured:"}),(0,_.jsx)(i.Z,{xs:12,sm:6,children:(0,_.jsx)(S,{filterChange:I})}),F?(0,_.jsx)(i.Z,{container:!0,xs:12,children:e.map((function(e){return(0,_.jsxs)(i.Z,{xs:12,sm:4,children:[" ",(0,_.jsx)(b.Z,{})," "]},e)}))}):(0,_.jsx)(i.Z,{xs:12,container:!0,children:null===k||void 0===k?void 0:k.map((function(e){return(0,_.jsx)(i.Z,{xs:12,sm:6,md:4,lg:4,xl:4,children:(0,_.jsx)(G,{film:e.properties,onFavoriteToggle:T,favorited:j[e.properties.episode_id],uid:e.uid})},e.properties.episode_id)}))})]})}},4169:function(e,t,n){n(2791);var r=n(1441),i=n(4162),a=n(184);t.Z=function(){return(0,a.jsxs)(i.Z,{spacing:1,children:[(0,a.jsx)(r.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,a.jsx)(r.Z,{variant:"circular",width:40,height:40}),(0,a.jsx)(r.Z,{variant:"rectangular",width:"100%",height:60}),(0,a.jsx)(r.Z,{variant:"rounded",width:"100%",height:60})]})}},5051:function(e,t,n){var r=n(1413),i=n(5987),a=(n(2791),n(9911)),o=n(5705),s=n(1898),c=n(9365),u=n(7924),l=n(184),d=["label","name","valueChange"];t.Z=function(e){var t=e.label,n=e.name,f=(e.valueChange,(0,i.Z)(e,d));return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.Z,{fullWidth:!0,children:[f.showLabel&&(0,l.jsx)(c.Z,{htmlFor:n,children:t}),(0,l.jsx)(o.gN,(0,r.Z)({as:a.Z,label:t,name:n,id:n},f.props)),(0,l.jsx)(u.Z,{id:"".concat(n,"-helper-text"),children:f.helperText})]})})}},5316:function(e,t,n){function r(e){return new Promise((function(t,n){setTimeout((function(){t()}),e)}))}n.d(t,{_:function(){return r}})}}]);
//# sourceMappingURL=606.0356a6e8.chunk.js.map