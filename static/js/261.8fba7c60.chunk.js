"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[261],{93261:function(t,n,r){r.r(n),r.d(n,{default:function(){return C}});var e,u=r(72791),i=r(57689),o=r(1413),a=r(70885),c=r(799),s=r(96884),f=r(51070),l=r.n(f),d=r(95885),v=r(70773),p=function(t){var n=t.params,r=void 0===n?{refetch:0}:n,e=(0,u.useState)(),i=(0,a.Z)(e,2),f=i[0],p=i[1],h=(0,u.useRef)(new AbortController);(0,s.Z)((function(){var t=l()(v.H,"/films",(0,o.Z)({},r));h.current.abort(),h.current=new AbortController,p(t)}),[r]);var m=(0,c.ZP)((function(){return f||null}),(function(t){return(0,d.$)(t,h.current)}),{revalidateOnFocus:!1,revalidateIfStale:!0,keepPreviousData:!0,shouldRetryOnError:!0}),E=m.data,g=m.isValidating,C=m.error,F=m.isLoading;return{allFilms:null===E||void 0===E?void 0:E.result,allFilmsLoading:F,allFilmsValidating:g,allFilmsError:C}},h=r(64317),m=r(81917),E=r(84824);!function(t){t.ERR_CANCELED="ERR_CANCELED"}(e||(e={}));var g=r(80184);function C(){var t=(0,h.T)(),n=(0,h.C)(m.Ky),r=p({params:n}),o=r.allFilms,a=r.allFilmsError,c=r.allFilmsLoading,s=r.allFilmsValidating;return(0,u.useEffect)((function(){t(E.eI(null!==o&&void 0!==o?o:[]))}),[o,t]),(0,u.useEffect)((function(){t(E.K4(c))}),[c,t]),(0,u.useEffect)((function(){t(E.Cs(s))}),[s,t]),(0,u.useEffect)((function(){a&&a.code!==e.ERR_CANCELED&&t(E.hv(a))}),[a,t]),(0,g.jsx)(i.j3,{})}},81917:function(t,n,r){r.d(n,{Ky:function(){return h},Qi:function(){return d},Xt:function(){return p},xU:function(){return l},zh:function(){return v}});var e=r(1413),u=r(50873),i=r(89422),o=r(58611),a=r(5826),c=function(t){return t.allFilms},s=i.VL.getSelectors((function(t){return t.allFilms})),f=s.selectAll,l=(s.selectById,s.selectEntities,s.selectIds,s.selectTotal,function(t){return c(t).isLoading}),d=function(t){return c(t).isValidating},v=function(t){return c(t).errMsg},p=(0,u.P1)(f,a._d,(function(t,n){return(0,o.w)(t,n)})),h=(0,u.P1)((function(t){return c(t).apiParams}),(function(t){var n=(0,e.Z)({},t);return Object.keys(n).forEach((function(t){""==="".concat(n[t]).trim()&&delete n[t]})),n}))},84824:function(t,n,r){r.d(n,{Cs:function(){return e.Cs},K4:function(){return e.K4},eI:function(){return e.eI},hv:function(){return e.hv},iz:function(){return e.iz}});var e=r(89422)},5826:function(t,n,r){r.d(n,{JJ:function(){return l},RK:function(){return d},Wc:function(){return h},_d:function(){return v},f3:function(){return p},h3:function(){return m},xU:function(){return f}});var e=r(1413),u=r(50873),i=r(92546),o=r(18581),a=function(t){return t.favoriteFilms},c=o.VL.getSelectors((function(t){return t.favoriteFilms})),s=c.selectAll,f=(c.selectById,c.selectEntities,c.selectIds,c.selectTotal,function(t){return a(t).loading}),l=function(t){return a(t).favoriteToggleLoading},d=function(t){return a(t).firstTimeLoading},v=(0,u.P1)(s,(function(t){var n={};return t.forEach((function(t){n[t.episodeId]=(0,e.Z)({},t)})),n})),p=(0,u.P1)(s,(function(t){return(0,i.ZP)(t,(function(t){return t.filter((function(t){return!!t.isCurrentFavorite})).sort((function(t,n){return t.lastUpdated<n.lastUpdated?1:-1}))}))})),h=(0,u.P1)(a,(function(t){return t.extraFetchParams})),m=(0,u.P1)(s,a,(function(t,n){var r,e,u=null!==(r=n.extraFetchParams)&&void 0!==r&&r.equalTo?null!==(e=n.filteredFavorites)&&void 0!==e?e:[]:t;return(0,i.ZP)(u,(function(t){return t.filter((function(t){return!!t.isCurrentFavorite})).sort((function(t,n){return t.lastUpdated<n.lastUpdated?1:-1}))}))}))},58611:function(t,n,r){r.d(n,{Q:function(){return o},w:function(){return a}});var e=r(72426),u=r.n(e),i=r(92546),o=function(t){var n="",r=null!==t&&void 0!==t&&t.lastUpdated?u()(null===t||void 0===t?void 0:t.lastUpdated).fromNow():"";return n=null!==t&&void 0!==t&&t.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==t&&void 0!==t&&t.lastUpdated&&(n=n+". "+(t.isCurrentFavorite?"Favorited ":"Unfavorited ")+r),n},a=function(t,n){return(0,i.ZP)(null!==t&&void 0!==t?t:[],(function(t){t.sort((function(t,n){return t.properties.episode_id>n.properties.episode_id?1:-1})),t.forEach((function(t){t.properties.favorite=n[t.properties.episode_id]}))}))}},95885:function(t,n,r){r.d(n,{k:function(){return c},$:function(){return s}});var e=r(74165),u=r(15861),i=r(74569),o=r.n(i);function a(t){return new Promise((function(n,r){setTimeout((function(){n()}),t)}))}var c=function(){var t=(0,u.Z)((0,e.Z)().mark((function t(n){var r,u,i=arguments;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=i.length>1&&void 0!==i[1]?i[1]:0)){t.next=4;break}return t.next=4,a(r);case 4:return t.prev=4,t.next=7,o().get(n,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(u=t.sent).status){t.next=10;break}return t.abrupt("return",u.data);case 10:return t.abrupt("return",Promise.reject(u));case 13:throw t.prev=13,t.t0=t.catch(4),console.error("App fetcher GET error:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(n){return t.apply(this,arguments)}}(),s=function(){var t=(0,u.Z)((0,e.Z)().mark((function t(n,r){var u,i,c=arguments;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u=c.length>2&&void 0!==c[2]?c[2]:0)){t.next=4;break}return t.next=4,a(u);case 4:return t.prev=4,t.next=7,o().get(n,{headers:{"Content-Type":"application/json"},responseType:"json",signal:r.signal});case 7:if(200!==(i=t.sent).status){t.next=10;break}return t.abrupt("return",i.data);case 10:return t.abrupt("return",Promise.reject(i));case 13:throw t.prev=13,t.t0=t.catch(4),"ERR_CANCELED"!==t.t0.code&&console.error("App fetcher GET error:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(n,r){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=261.8fba7c60.chunk.js.map