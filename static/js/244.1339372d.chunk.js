(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[244],{3101:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var n=r(885),i=r(2791),o=r(4162),a=r(6227),s=(0,r(2795).ZP)("https://kq-1-1a499.firebaseio.com/"),l="swdb/",c=function(e,t){var r,n,i="".concat(l).concat(e,"/favorites");return r=i,n=t,s.post(r+".json",n).then((function(e){return e.data})).catch((function(e){throw console.log("App error POST: ",e),e}))},d=function(e,t){var r,n,i="".concat(l).concat(e,"/favorites/").concat(t.fireId);return r=i,n=t,s.put(r+".json",n)},u=r(1413),f=r(2068),p=r(6884),m=r(1070),v=r.n(m),x=r(1582),h=function(e){var t=e.userId,r=e.params,o=void 0===r?{}:r,a=(0,i.useState)(),s=(0,n.Z)(a,2),l=s[0],c=s[1];(0,p.Z)((function(){var e=v()("https://kq-1-1a499.firebaseio.com/","/swdb/:user/favorites.json",(0,u.Z)({user:"yqu"},o));c(e)}),[t,o]);var d=(0,f.Z)((function(){return l||null}),(function(e){return(0,x.k)(e)})),m=d.data,h=(d.isValidating,d.error),j=d.isLoading,Z={};m&&Object.keys(null!==m&&void 0!==m?m:{}).forEach((function(e){Z[m[e].episodeId]=(0,u.Z)({fireId:e},m[e])}));return{data:Z,loading:j,error:h}},j=r(799),Z=function(e){var t=e.params,r=void 0===t?{refetch:0}:t,o=(0,i.useState)(),a=(0,n.Z)(o,2),s=a[0],l=a[1];(0,p.Z)((function(){var e=v()("https://swapi.tech/api/","/films",(0,u.Z)({},r));l(e)}),[r]);var c=(0,j.ZP)((function(){return s||null}),(function(e){return(0,x.k)(e,1e3)}),{revalidateOnFocus:!1,revalidateIfStale:!0}),d=c.data,f=c.isValidating,m=c.error,h=c.isLoading;return{allFilms:null===d||void 0===d?void 0:d.result,allFilmsLoading:h,allFilmsValidating:f,allFilmsError:m}},g=r(6580),b=r(184);function y(e){var t=e.size,r=void 0===t?40:t,n=e.color,i=void 0===n?"grey.500":n;return(0,b.jsx)(o.Z,{sx:{color:i},spacing:1,direction:"row",children:(0,b.jsx)(g.Z,{color:"inherit",size:r})})}var w=r(4169),F=r(5705),C=r(8254),k=r(3811),T=r(6459),S=r(5051),I=function(e){var t=Object.assign({},((0,T.Z)(e),e)),r=(0,F.u6)(),o=r.values,a=(r.submitForm,function(e,t){var r=(0,i.useState)(e),o=(0,n.Z)(r,2),a=o[0],s=o[1];return(0,i.useEffect)((function(){var r=setTimeout((function(){s(e)}),t);return function(){clearTimeout(r)}}),[e,t]),a}(o,600));return(0,p.Z)((function(){t.filterChange(a)}),[a]),(0,b.jsx)(F.l0,{autoComplete:"off",children:(0,b.jsx)(S.Z,(0,u.Z)({},t.movieNameFilter))})},N=r(6739),P=r(2167),_=function(e){var t=e.filterChange,r=(0,i.useCallback)((function(e){t(e)}),[t]),n=function(e){var t=""!==e.values.movieName;return{name:"movieName",type:"text",props:{placeholder:"Filter by name",variant:"standard",InputProps:{endAdornment:(0,b.jsx)(C.Z,{position:"end",children:t&&(0,b.jsx)(k.Z,{onClick:function(){e.resetForm()},children:(0,b.jsx)(N.Z,{})})}),startAdornment:(0,b.jsx)(C.Z,{position:"start",children:(0,b.jsx)(P.Z,{})})}}}};return(0,b.jsx)(F.J9,{initialValues:{movieName:""},onSubmit:function(e){},children:function(e){return(0,b.jsx)(I,{movieNameFilter:n(e),filterChange:r})}})},A=r(8928),M=r(6875),U=r(5194),D=r(199),E=r(7205),z=r(4565),L=r(1087),O=r(4596),Y=r(7237),q=r(2426),V=r.n(q),B=function(e){var t="",r=null!==e&&void 0!==e&&e.lastUpdated?V()(null===e||void 0===e?void 0:e.lastUpdated).fromNow():"";return t=null!==e&&void 0!==e&&e.isCurrentFavorite?"Remove from favorites":"Add to favorites",null!==e&&void 0!==e&&e.lastUpdated&&(t=t+". "+(e.isCurrentFavorite?"Favorited ":"Unfavorited ")+r),t},R=r(5814),W=r(6431),H=r.n(W),X=function(e){var t=e.date,r=void 0===t?0:t,n=e.fromNow,i=void 0===n||n,o=e.format,a=void 0===o?"MM/DD/YY HH:mm":o;return(0,b.jsx)(R.Z,{title:r?V()(r).format(a):"No date found",children:(0,b.jsx)("span",{children:r?(0,b.jsx)(H(),{date:r,fromNow:i}):(0,b.jsx)(b.Fragment,{children:"N/A"})})})},J=function(e){(0,O.Z)().isXl;return(0,b.jsxs)(A.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:4,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Z,{component:"img",alt:"poster",height:"440",image:"".concat("","/assets/poster-img/").concat(e.film.episode_id,".png"),sx:{backgroundColor:"#000",objectFit:"contain"}}),(0,b.jsxs)(U.Z,{children:[(0,b.jsxs)(o.Z,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"},children:[(0,b.jsx)(z.Z,{gutterBottom:!0,variant:"h5",component:L.rU,to:"./".concat(e.uid),sx:{fontFamily:"Poppins",fontWeight:"500"},children:e.film.title}),(0,b.jsxs)(z.Z,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"},children:["EP ",e.film.episode_id]})]}),(0,b.jsxs)(o.Z,{spacing:1,children:[(0,b.jsxs)(z.Z,{variant:"body2",color:"text.secondary",children:["Released: ",(0,b.jsx)(X,{date:e.film.release_date,format:"MMM Do YYYY"})]}),(0,b.jsxs)(z.Z,{variant:"body2",color:"text.secondary",children:["Directed by: ",e.film.director]}),(0,b.jsxs)(z.Z,{variant:"body2",color:"text.secondary",children:["Produced by: ",e.film.producer]}),(0,b.jsx)(z.Z,{variant:"body2",color:"text.primary",children:e.film.opening_crawl})]})]})]}),(0,b.jsxs)(M.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,b.jsx)("div",{children:(0,b.jsx)(E.Z,{size:"small",component:L.rU,to:"./".concat(e.uid),children:"Learn More"})}),(0,b.jsx)("div",{children:(0,b.jsx)(k.Z,{"aria-label":"favorite",onClick:function(){e.onFavoriteToggle(e.film,e.favorited)},title:B(e.favorited),children:(0,b.jsx)(Y.Z,{color:e.film.userFavorited?"error":"disabled"})})})]})]})},$="yqu",G=function(){Array.from(Array(3).keys());var e=(0,i.useState)(!1),t=(0,n.Z)(e,2),r=(t[0],t[1]),s=(0,i.useState)(0),l=(0,n.Z)(s,2),u=l[0],f=l[1],p=(0,i.useState)({}),m=(0,n.Z)(p,2),v=m[0],x=m[1],j=h({userId:$,params:{fetchTime:u}}),g=j.data,F=(j.error,j.loading,Z({params:v})),C=F.allFilms,k=F.allFilmsError,T=F.allFilmsLoading,S=F.allFilmsValidating,I=(0,i.useMemo)((function(){var e=null!==C&&void 0!==C?C:[];return e&&e.sort((function(e,t){return e.properties.episode_id>t.properties.episode_id?1:-1})),e.forEach((function(e){var t;e.properties.userFavorited=null===(t=g[e.properties.episode_id])||void 0===t?void 0:t.isCurrentFavorite})),e}),[C,g]),N=function(e,t){var n=e.url,i=n.split("/")[n.split("/").length-1],o={filmUrl:n,filmId:i,lastUpdated:(new Date).getTime(),episodeId:e.episode_id,isCurrentFavorite:!0};r(!0),t?(o.isCurrentFavorite=!t.isCurrentFavorite,o.fireId=t.fireId,d($,o).then((function(e){})).catch((function(e){})).finally((function(){r(!1),f((new Date).getTime())}))):c($,o).then((function(e){})).catch((function(e){})).finally((function(){r(!1),f((new Date).getTime())}))},P=(0,i.useCallback)((function(e){e.movieName?x({title:e.movieName}):x({})}),[]);return T?(0,b.jsx)(w.Z,{count:4}):k?(0,b.jsx)("div",{children:"Error Page"}):(0,b.jsxs)(o.Z,{direction:"column",p:2,children:[(0,b.jsx)(a.Z,{xs:12,sm:3,mb:2,children:(0,b.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsx)(_,{filterChange:P}),S&&(0,b.jsx)(y,{size:25})]})}),(0,b.jsx)(a.Z,{container:!0,disableEqualOverflow:!0,rowSpacing:4,children:null===I||void 0===I?void 0:I.map((function(e){return(0,b.jsx)(a.Z,{xs:12,sm:4,smOffset:4,children:(0,b.jsx)(J,{film:e.properties,onFavoriteToggle:N,favorited:g[e.properties.episode_id],uid:e.uid})},e.properties.episode_id)}))})]})}},4169:function(e,t,r){"use strict";r(2791);var n=r(1441),i=r(4162),o=r(763),a=r(6227),s=r(184);t.Z=function(e){var t=e.count;return(0,s.jsxs)(a.Z,{direction:"column",padding:2,xs:12,children:[(0,s.jsx)(a.Z,{xs:12,md:6,children:(0,s.jsx)(n.Z,{variant:"text",sx:{fontSize:"2rem"}})}),(0,s.jsx)(a.Z,{container:!0,spacing:2,children:(0,o.times)(t,(function(e){return(0,s.jsxs)(a.Z,{xs:12,sm:12,md:!0,children:[(0,s.jsxs)(i.Z,{direction:"row",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,s.jsx)(n.Z,{variant:"text",sx:{fontSize:"2rem",width:"10rem"}}),(0,s.jsx)(n.Z,{variant:"circular",width:40,height:40})]}),(0,s.jsx)(n.Z,{variant:"rectangular",height:"30rem"})]},e)}))})]})}},1582:function(e,t,r){"use strict";r.d(t,{k:function(){return l}});var n=r(4165),i=r(5861),o=r(4569),a=r.n(o),s=r(5316),l=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,o=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=o.length>1&&void 0!==o[1]?o[1]:0)){e.next=4;break}return e.next=4,(0,s._)(r);case 4:return e.prev=4,e.next=7,a().get(t,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",i.data);case 10:return e.abrupt("return",Promise.reject(i));case 13:throw e.prev=13,e.t0=e.catch(4),console.error("App error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},5051:function(e,t,r){"use strict";var n=r(1413),i=r(5987),o=(r(2791),r(9911)),a=r(5705),s=r(1898),l=r(7924),c=r(763),d=r(184),u=["label","name","validate","disabled","placeholder"];t.Z=function(e){var t=e.label,r=e.name,f=e.validate,p=e.disabled,m=e.placeholder,v=(0,i.Z)(e,u),x=(0,a.u6)();return(0,d.jsxs)(s.Z,{fullWidth:!0,size:"small",children:[(0,d.jsx)(a.gN,(0,n.Z)({as:o.Z,label:(0,c.startCase)(t),name:r,id:r,error:x.touched[r]&&!!x.errors[r],validate:f,variant:"standard",disabled:p,placeholder:(0,c.upperFirst)(null!==m&&void 0!==m?m:t)},v.props)),(0,d.jsx)(l.Z,{id:"".concat(r,"-helper-text"),error:x.touched[r]&&!!x.errors[r],children:x.touched[r]&&x.errors[r]?(0,d.jsx)(a.Bc,{name:r,render:function(e){return(0,c.upperFirst)(e)}}):(0,d.jsx)(d.Fragment,{children:v.helperText})})]})}},4596:function(e,t,r){"use strict";var n=r(2797),i=r(4142);t.Z=function(){var e=(0,i.Z)();return{isMobile:(0,n.Z)(e.breakpoints.down("sm")),isMed:(0,n.Z)(e.breakpoints.down("md")),isLg:(0,n.Z)(e.breakpoints.down("lg")),isXl:(0,n.Z)(e.breakpoints.down("xl"))}}},2795:function(e,t,r){"use strict";r.d(t,{e$:function(){return o}});var n=r(4569),i=r.n(n),o=function(e){var t=e.url,r=e.body,n=e.onSuccess,o=e.onFailure,a=e.onFinally;e.abortController;i().post(t,r).then((function(e){n&&n(e.data)})).catch((function(e){console.log("App error POST: ",e),o&&o(e)})).finally((function(){a&&a()}))};t.ZP=function(e){return i().create({baseURL:e,timeout:5e3,headers:{"Content-Type":"application/json"},responseType:"json"})}},5316:function(e,t,r){"use strict";function n(e){return new Promise((function(t,r){setTimeout((function(){t()}),e)}))}r.d(t,{_:function(){return n}})},4654:function(){}}]);
//# sourceMappingURL=244.1339372d.chunk.js.map