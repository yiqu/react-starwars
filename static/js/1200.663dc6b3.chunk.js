"use strict";(self.webpackChunkstarwars=self.webpackChunkstarwars||[]).push([[1200],{31200:function(e,r,n){n.r(r),n.d(r,{default:function(){return fe}});var t=n(70885),i=n(72791),a=n(36227),l=n(94162),s=n(4565),o=n(17205),d=n(35645),c=n(58195),u=n(77248),p=n(8771),h=n(78711),m=n(96015),f=n(53329),x=n(86753),v=n(55705),Z=n(42982),b=n(1413),j=n(40464),g=n(13811),y=n(81872),C=n(8440),w=n(45987),I=n(59911),q=n(81898),S=n(45473),k=n(37924),E=n(4218),F=n(763),A=n(98937),T=n(77907),P=n(80184),N=["label","name","options","dataLoading","placeholder","validate","disabled"],O=(0,P.jsx)(A.Z,{}),_=(0,P.jsx)(T.Z,{}),L=function(e){var r=e.label,n=e.name,t=e.options,i=e.dataLoading,a=e.placeholder,l=e.validate,s=e.disabled,o=(0,w.Z)(e,N),d=(0,v.u6)();return(0,P.jsxs)(q.Z,{fullWidth:!0,size:"small",children:[(0,P.jsx)(v.gN,(0,b.Z)({as:E.Z,label:r,name:n,id:n,onChange:function(e,r){d.setFieldValue(n,r)},renderInput:function(e){return(0,P.jsx)(I.Z,(0,b.Z)((0,b.Z)({},e),{},{name:n,variant:"standard",label:(0,F.startCase)(i?"Loading ".concat(n,"..."):"Select ".concat(n)),placeholder:(0,F.upperFirst)(null!==a&&void 0!==a?a:r),error:d.touched[n]&&!!d.errors[n]},o.renderInputProps))},renderOption:function(e,r,n){var t,i,a=n.selected;return(0,P.jsxs)("li",(0,b.Z)((0,b.Z)({},e),{},{children:[(0,P.jsx)(S.Z,{icon:O,checkedIcon:_,checked:a}),null!==(t=null!==(i=r.name)&&void 0!==i?i:r.display)&&void 0!==t?t:r]}))},getOptionLabel:function(e){var r,n;return null!==(r=null!==(n=e.name)&&void 0!==n?n:e.display)&&void 0!==r?r:e},validate:l,options:t,disabled:s,loading:i,loadingText:"Loading ".concat(r),noOptionsText:"No ".concat(r," available"),autoHighlight:!0},o.props)),(0,P.jsx)(k.Z,{id:"".concat(n,"-helper-text"),error:d.touched[n]&&!!d.errors[n],children:d.touched[n]&&d.errors[n]?(0,P.jsx)(v.Bc,{name:n,render:function(e){return(0,F.upperFirst)(e)}}):(0,P.jsx)(P.Fragment,{children:o.helperText})})]})},R=n(72900),X=function(e){var r=e.label,n=e.name,t=e.props,i=e.disabled,a=(0,v.u6)();return(0,P.jsx)(q.Z,{fullWidth:!0,size:"small",children:(0,P.jsx)(v.gN,(0,b.Z)({as:R.Z,control:(0,P.jsx)(S.Z,{checked:!!a.values[n],onChange:function(e){return a.setFieldValue(n,e.target.checked||!1)}}),label:(0,F.startCase)(r),name:n,id:n,disabled:i},t))})},z=n(75051),H=n(81346),D=n(35702),M=n(79365),V=["label","name","options","disabled","placeholder","validate"],W=function(e){var r=e.label,n=e.name,t=e.options,i=e.disabled,a=(e.placeholder,e.validate),l=(0,w.Z)(e,V),o=(0,v.u6)();return(0,P.jsxs)(q.Z,{fullWidth:!0,size:"small",children:[(0,P.jsxs)(M.Z,{id:n+"label",children:[" ",(0,F.startCase)(r)," "]}),(0,P.jsxs)(v.gN,(0,b.Z)((0,b.Z)({as:H.Z,name:n,label:(0,F.startCase)(r),id:n,validate:a,variant:"standard",error:o.touched[n]&&!!o.errors[n],disabled:i},l.props),{},{children:[l.useDefaultNoneSelected&&(0,P.jsx)(D.Z,{value:"NONE_SELECTED",disabled:!0,children:(0,P.jsxs)(s.Z,{sx:{color:"#666"},children:["Select ",l.useDefaultNoneSelected]})},""),null===t||void 0===t?void 0:t.map((function(e){var r,n,t,i=null!==(r=e.name)&&void 0!==r?r:e,a=null!==(n=e.value)&&void 0!==n?n:e;return(0,P.jsx)(D.Z,{value:a,children:i},null!==(t=e.id)&&void 0!==t?t:e.uid)}))]})),(0,P.jsx)(k.Z,{id:"".concat(n,"-helper-text"),error:o.touched[n]&&!!o.errors[n],children:o.touched[n]&&o.errors[n]?(0,P.jsx)(v.Bc,{name:n,render:function(e){return(0,F.upperFirst)(e)}}):(0,P.jsx)(P.Fragment,{children:l.helperText})})]})},B=n(61951),G=function(e){switch(e.type){case"select":var r;return(0,P.jsx)(W,(0,b.Z)({name:e.name,label:e.label,options:null!==(r=e.options)&&void 0!==r?r:[],disabled:e.disabled,placeholder:e.placeholder},e));case"text":return(0,P.jsx)(z.Z,(0,b.Z)({name:e.name,label:e.label,disabled:e.disabled,placeholder:e.placeholder},e));case"autocomplete":var n;return(0,P.jsx)(L,(0,b.Z)({name:e.name,label:e.label,options:null!==(n=e.props.options)&&void 0!==n?n:[],dataLoading:e.props.loading,disabled:e.disabled,placeholder:e.placeholder},e));case"textarea":return(0,P.jsx)(B.Z,(0,b.Z)({name:e.name,label:e.label,disabled:e.disabled,placeholder:e.placeholder},e));case"checkbox":return(0,P.jsx)(X,(0,b.Z)({name:e.name,label:e.label,disabled:e.disabled},e));default:return(0,P.jsx)(P.Fragment,{children:" No component matched... "})}},J=n(96884),K=n(51070),$=n.n(K),Q=n(27345),U=n(74165),Y=n(15861),ee=n(74569),re=n.n(ee);function ne(e){return new Promise((function(r,n){setTimeout((function(){r()}),e)}))}var te=function(){var e=(0,Y.Z)((0,U.Z)().mark((function e(r){var n,t,i=arguments;return(0,U.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=i.length>1&&void 0!==i[1]?i[1]:0)){e.next=4;break}return e.next=4,ne(n);case 4:return e.prev=4,e.next=7,re().get(r,{headers:{"Content-Type":"application/json"},responseType:"json"});case 7:if(200!==(t=e.sent).status){e.next=10;break}return e.abrupt("return",t.data);case 10:return e.abrupt("return",Promise.reject(t));case 13:throw e.prev=13,e.t0=e.catch(4),console.error("App fetcher GET error:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(r){return e.apply(this,arguments)}}(),ie=n(70773),ae={limit:1e4,page:1},le=function(e){var r=e.entityType,n=e.params,a=void 0===n?{}:n,l=e.sleep,s=void 0===l?0:l,o=(0,i.useState)(),d=(0,t.Z)(o,2),c=d[0],u=d[1];(0,J.Z)((function(){var e=$()(ie.H8,r,a);u(e)}),[a,r]);var p=(0,Q.Z)((function(){return c||null}),(function(e){return te(e,s)}),{shouldRetryOnError:!1}),h=p.data,m=p.isValidating,f=p.error,x=p.isLoading;return{data:null===h||void 0===h?void 0:h.results,validating:m,loading:x,error:f}},se=n(22007),oe=n(29823),de=function(e){var r=e.handleClose,n=e.isEditMode,s=(0,v.u6)(),o=(0,i.useRef)(s),d=(0,i.useState)(0),c=(0,t.Z)(d,2),u=c[0],f=c[1],x=(0,i.useState)([]),w=(0,t.Z)(x,2),I=w[0],q=w[1],S=le({entityType:"people",sleep:1e3,params:(0,b.Z)((0,b.Z)({},ae),{},{time:u})}),k=S.data,E=S.error,F=S.loading,A=le({entityType:"starships",params:(0,b.Z)((0,b.Z)({},ae),{},{time:u})}),T=A.data,N=A.error,O=A.loading,_=le({entityType:"vehicles",params:(0,b.Z)((0,b.Z)({},ae),{},{time:u})}),L=_.data,R=_.error,X=_.loading,z=le({entityType:"planets",params:(0,b.Z)((0,b.Z)({},ae),{},{time:u})}),H=z.data,D=z.error,M=(z.loading,le({entityType:"species",params:(0,b.Z)((0,b.Z)({},ae),{},{time:u})})),V=M.data,W=M.error,B=M.loading;(0,i.useEffect)((function(){q(ce)}),[]),(0,i.useEffect)((function(){o.current.resetForm()}),[u]);return(0,i.useEffect)((function(){k&&k.length>-1&&q((function(e){var r=e.findIndex((function(e){return"characters"===e.name}));return e[r].props.options=k,e}))}),[k]),(0,i.useEffect)((function(){q((function(e){var r=e.findIndex((function(e){return"characters"===e.name}));return e[r].props.loading=F,(0,Z.Z)(e)}))}),[F]),(0,i.useEffect)((function(){T&&T.length>-1&&q((function(e){var r=e.findIndex((function(e){return"starships"===e.name}));return e[r].props.options=T,e}))}),[T]),(0,i.useEffect)((function(){q((function(e){var r=e.findIndex((function(e){return"starships"===e.name}));return e[r].props.loading=O,(0,Z.Z)(e)}))}),[O]),(0,i.useEffect)((function(){L&&L.length>-1&&q((function(e){var r=e.findIndex((function(e){return"vehicles"===e.name}));return e[r].props.options=L,e}))}),[L]),(0,i.useEffect)((function(){q((function(e){var r=e.findIndex((function(e){return"vehicles"===e.name}));return e[r].props.loading=X,(0,Z.Z)(e)}))}),[X]),(0,i.useEffect)((function(){H&&H.length>-1&&q((function(e){var r=e.findIndex((function(e){return"planets"===e.name}));return e[r].options=H,(0,Z.Z)(e)}))}),[H]),(0,i.useEffect)((function(){V&&V.length>-1&&q((function(e){var r=e.findIndex((function(e){return"species"===e.name}));return e[r].props.options=V,e}))}),[V]),(0,i.useEffect)((function(){q((function(e){var r=e.findIndex((function(e){return"species"===e.name}));return e[r].props.loading=B,(0,Z.Z)(e)}))}),[B]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{children:(0,P.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,P.jsx)(l.Z,{children:n?"Editing":"Create New Movie"}),(0,P.jsxs)(l.Z,{direction:"row",children:[(0,P.jsx)(g.Z,{onClick:function(){f((new Date).getTime())},children:(0,P.jsx)(se.Z,{})}),(0,P.jsx)(g.Z,{onClick:r,children:(0,P.jsx)(oe.Z,{})})]})]})}),(0,P.jsx)(y.Z,{}),(0,P.jsx)(C.Z,{children:(0,P.jsxs)(l.Z,{direction:"column",spacing:2,children:[(E||W||R||N||D)&&(0,P.jsxs)(p.Z,{severity:"error",children:[(0,P.jsx)(h.Z,{children:"API Error"}),(0,P.jsx)(m.Z,{children:(0,P.jsxs)(P.Fragment,{children:["An API error occurred:",(0,P.jsx)(m.Z,{children:null===E||void 0===E?void 0:E.message}),(0,P.jsx)(m.Z,{children:null===W||void 0===W?void 0:W.message}),(0,P.jsx)(m.Z,{children:null===R||void 0===R?void 0:R.message}),(0,P.jsx)(m.Z,{children:null===N||void 0===N?void 0:N.message}),(0,P.jsx)(m.Z,{children:null===D||void 0===D?void 0:D.message})]})})]}),(0,P.jsx)(v.l0,{children:(0,P.jsx)(a.Z,{container:!0,spacing:2,children:I.map((function(e){return(0,P.jsx)(a.Z,{xs:12,children:G(e)},e.name)}))})})]})})]})},ce=[{name:"title",label:"title",placeholder:"A new hope",type:"text",disabled:!1,props:{variant:"outlined"}},{name:"director",label:"director",placeholder:"George Lucas",type:"text",disabled:!1,props:{variant:"outlined"}},{name:"characters",label:"characters",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,placeholder:"Luke Skywalker, Han Solo...",props:{options:[],multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"openingCrawl",label:"Opening crawl",placeholder:"In a galaxy far far away...",type:"textarea",disabled:!1},{name:"planets",label:"Select planet",type:"select",options:[],disabled:!1,props:{variant:"outlined"}},{name:"species",label:"Species",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,props:{multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"vehicles",label:"Vehicles",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,props:{multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"starships",label:"starships",type:"autocomplete",renderInputProps:{variant:"outlined"},disabled:!1,props:{multiple:!0,disableCloseOnSelect:!0,ChipProps:{color:"primary"}}},{name:"canon",label:"Canon",type:"checkbox",disabled:!1}],ue=n(77259),pe=function(e){var r=e.film,n=e.onSuccess,t=e.onFailure;!function(e){var r=e.url,n=e.body,t=e.onSuccess,i=e.onFailure,a=e.onFinally;e.abortController,re().post(r,n).then((function(e){t&&t(e.data)})).catch((function(e){console.log("App error POST: ",e),i&&i(e)})).finally((function(){a&&a()}))}({url:$()("https://kq-1-1a499.firebaseio.com/","/swdb/:user/added-films.json",{user:"yqu"}),body:JSON.stringify(r),onSuccess:n,onFailure:t})},he={title:"",director:"",characters:[],starships:[],openingCrawl:"In a galaxy far far away...",planets:"",species:[],vehicles:[],canon:!1},me=function(e){var r=e.onClose,n=e.open,a=e.isEditMode,l=(0,i.useCallback)((function(e,n){"backdropClick"!==n&&r(null)}),[r]),s=(0,i.useState)(),d=(0,t.Z)(s,2),Z=d[0],b=d[1];return(0,P.jsx)(v.J9,{initialValues:he,onSubmit:function(e){b(void 0),e&&pe({film:e,onSuccess:function(e){r(e)},onFailure:function(e){var r;b("".concat(null===(r=e.response)||void 0===r?void 0:r.data))}})},validationSchema:ue.Hs,children:function(e){return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(c.Z,{onClose:l,open:n,disableEscapeKeyDown:!0,children:[(0,P.jsx)(de,{handleClose:l,isEditMode:a}),Z&&(0,P.jsxs)(p.Z,{severity:"error",children:[(0,P.jsx)(h.Z,{children:"API Error"}),(0,P.jsxs)(m.Z,{children:["An API error occurred: ",Z]})]}),(0,P.jsxs)(u.Z,{children:[(0,P.jsx)(o.Z,{variant:"text",startIcon:(0,P.jsx)(x.Z,{}),onClick:e.handleReset,children:"Reset"}),(0,P.jsx)(o.Z,{variant:"text",startIcon:(0,P.jsx)(f.Z,{}),onClick:e.submitForm,children:"Save"})]})]})})}})},fe=function(){var e=(0,i.useState)(!1),r=(0,t.Z)(e,2),n=r[0],c=r[1],u=(0,i.useCallback)((function(e){c(!1)}),[]);return(0,P.jsxs)(l.Z,{direction:"column",p:2,width:"100%",children:[(0,P.jsx)(a.Z,{container:!0,children:(0,P.jsx)(a.Z,{xs:12,children:(0,P.jsxs)(l.Z,{direction:"column",spacing:3,alignItems:"center",justifyContent:"center",children:[(0,P.jsx)(l.Z,{direction:"row",children:(0,P.jsx)(s.Z,{variant:"h6",children:"Create your own Starwars movie."})}),(0,P.jsx)(l.Z,{direction:"row",children:(0,P.jsx)(s.Z,{variant:"body2",children:"Try adding your own movie with starships, vehicles, species, and planet."})}),(0,P.jsx)(l.Z,{direction:"row",children:(0,P.jsx)(o.Z,{variant:"contained",startIcon:(0,P.jsx)(d.Z,{}),onClick:function(){c(!0)},children:"Add New Movie"})})]})})}),n&&(0,P.jsx)(me,{onClose:u,open:n})]})}},77259:function(e,r,n){n.d(r,{$A:function(){return l},Hs:function(){return i},m8:function(){return a}});var t=n(62797),i=t.Ry({title:t.Z_().required(),director:t.Z_().required().min(1),openingCrawl:t.Z_().required("Opening crawl text is a required field").min(5,"At least 5 characters is required for crawl text"),characters:t.IX().min(1,"At least one character is required"),starships:t.IX().min(1,"At least one starship is required"),planets:t.Ry().required("Planet is a required field"),species:t.IX().min(1,"At least one species is required"),vehicles:t.IX().min(1,"At least one vehicle is required")}),a=t.Ry({title:t.Z_().required(),director:t.Z_().required().min(1),producer:t.Z_().required().min(1),episode_id:t.Rx().required().min(1),opening_crawl:t.Z_().required("Opening crawl text is a required field").min(5,"At least 5 characters is required for crawl text"),release_date:t.Z_().required().min(1),characters:t.IX().min(1,"At least one character is required"),starships:t.IX().min(1,"At least one starship is required"),planets:t.IX().min(1,"At least one planet is required"),species:t.IX().min(1,"At least one species is required"),vehicles:t.IX().min(1,"At least one vehicle is required")}),l=t.Ry().shape({title:t.Z_().trim().min(2).required(),director:t.Z_().trim().min(2).required()})},75051:function(e,r,n){var t=n(1413),i=n(45987),a=(n(72791),n(59911)),l=n(55705),s=n(81898),o=n(37924),d=n(763),c=n(80184),u=["label","name","validate","disabled","placeholder","variant"];r.Z=function(e){var r,n,p=e.label,h=e.name,m=e.validate,f=e.disabled,x=e.placeholder,v=e.variant,Z=(0,i.Z)(e,u),b=(0,l.u6)();return(0,c.jsxs)(s.Z,{fullWidth:!0,size:null!==(r=null===(n=Z.props)||void 0===n?void 0:n.size)&&void 0!==r?r:"small",children:[(0,c.jsx)(l.gN,(0,t.Z)({as:a.Z,label:(0,d.startCase)(p),name:h,id:h,error:b.touched[h]&&!!b.errors[h],validate:m,variant:null!==v&&void 0!==v?v:"standard",disabled:f,placeholder:(0,d.upperFirst)(null!==x&&void 0!==x?x:p)},Z.props)),(0,c.jsx)(o.Z,{id:"".concat(h,"-helper-text"),error:b.touched[h]&&!!b.errors[h],sx:{ml:0},children:b.touched[h]&&b.errors[h]?(0,c.jsx)(l.Bc,{name:h,render:function(e){return(0,d.upperFirst)(e)}}):(0,c.jsx)(c.Fragment,{children:Z.helperText})})]})}},61951:function(e,r,n){var t=n(1413),i=n(45987),a=(n(72791),n(59911)),l=n(55705),s=n(81898),o=n(37924),d=n(71747),c=n(763),u=n(80184),p=["label","name","placeholder","disabled","validate"];r.Z=function(e){var r=e.label,n=e.name,h=e.placeholder,m=(e.disabled,e.validate),f=(0,i.Z)(e,p),x=(0,l.u6)();return(0,u.jsxs)(s.Z,{fullWidth:!0,size:"small",children:[(0,u.jsx)(l.gN,(0,t.Z)({as:a.Z,multiline:!0,name:n,id:n,validate:m,minRows:1,label:(0,c.startCase)(r),error:x.touched[n]&&!!x.errors[n],placeholder:(0,c.upperFirst)(null!==h&&void 0!==h?h:r),InputProps:{inputComponent:d.Z,inputProps:{style:{resize:"vertical",minHeight:"3.5rem"}}}},f.props)),(0,u.jsx)(o.Z,{id:"".concat(n,"-helper-text"),error:x.touched[n]&&!!x.errors[n],children:x.touched[n]&&x.errors[n]?(0,u.jsx)(l.Bc,{name:n,render:function(e){return(0,c.upperFirst)(e)}}):(0,u.jsx)(u.Fragment,{children:f.helperText})})]})}}}]);
//# sourceMappingURL=1200.663dc6b3.chunk.js.map