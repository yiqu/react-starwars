import{r,l as b,_ as D,G as o,y as k,R as e,a as t,m as y,o as v,p as C}from"./index-6f160e43.js";import{u as w,a as F}from"./axios-8e83efed.js";import{f,g as P}from"./index-071cd14f.js";import{P as M}from"./CircleProgress-c6639d1f.js";import{A as T}from"./Toolbar-38014177.js";import{D as d}from"./general.model-1fceca1f.js";import{u as L}from"./useIsMobile-6dae06e0.js";import{D as R}from"./DateDisplay-6d1e7cdf.js";import"./index-44bc3a7e.js";const j=a=>{const n=[];return a&&Object.keys(a).forEach(s=>{n.push({fireId:s,...a[s]})}),n},A="https://kq-1-1a499.firebaseio.com/",B=({user:a,params:n})=>{const[c,s]=r.useState();b.useDeepCompareEffect(()=>{const i=D(A,"/swdb/:user/added-films.json",{user:"yqu",...n});s(i)},[a,n]);const{data:l,isValidating:p,error:m,isLoading:E}=w(()=>c||null,i=>F(i,2e3),{shouldRetryOnError:!1,revalidateOnFocus:!1,revalidateIfStale:!1});return{personalFilms:l&&j(l),personalFilmsLoading:E,personalFilmsValidating:p,personalFilmsError:m}},I=B,$=({count:a})=>r.createElement(o,{direction:"column",padding:2,xs:12},r.createElement(o,{xs:12,md:6},r.createElement(f,{variant:"text",sx:{fontSize:"2rem"}})),r.createElement(o,{container:!0,spacing:2},k.times(a,n=>r.createElement(o,{key:n,xs:12,sm:12,md:!0},r.createElement(P,{direction:"row",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},r.createElement(f,{variant:"text",sx:{fontSize:"2rem",width:"10rem"}}),r.createElement(f,{variant:"circular",width:40,height:40})),r.createElement(f,{variant:"rectangular",height:"30rem"}))))),z=$;function O({title:a,canon:n,characters:c,director:s,fireId:l,openingCrawl:p,planets:m,species:E,starships:i,vehicles:g}){return e.createElement(t.Card,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:4},e.createElement("div",null,e.createElement(t.CardMedia,{component:"img",alt:"poster",height:"440",image:"/assets/film/sw-blk-logo.png",sx:{backgroundColor:"#000",objectFit:"contain"}}),e.createElement(t.CardContent,null,e.createElement(t.Stack,{direction:{lg:"column",xl:"row"},justifyContent:{xl:"space-between",lg:"flex-start"},marginBottom:{lg:"10px",xl:"0px"}},e.createElement(t.Typography,{gutterBottom:!0,variant:"h5",component:y.Link,to:`./${l}`,sx:{fontFamily:"Poppins",fontWeight:"500"}},a),e.createElement(t.Typography,{variant:"h5",color:"text.secondary",sx:{fontWeight:"300"}})),e.createElement(t.Stack,{spacing:1},e.createElement(t.Typography,{variant:"body2",color:"text.secondary"},"Released: ",e.createElement(R,{date:0,format:"MMM Do YYYY"})),e.createElement(t.Typography,{variant:"body2",color:"text.secondary"},"Directed by: ",s),e.createElement(t.Typography,{variant:"body2",color:"text.secondary"},"Produced by: ","producer"),e.createElement(t.Typography,{variant:"body2",color:"text.primary"},p)))),e.createElement(t.CardActions,{sx:{display:"flex",justifyContent:"space-between"}},e.createElement("div",null,e.createElement(t.Button,{size:"small",component:y.Link,to:`./${l}`},"Learn More"))))}function K(){const[a,n]=r.useState(0),{isMobile:c}=L(),[s,l]=y.useSearchParams(),p=s.get("moviePageDisplayMode"),[m,E]=r.useState(p),{personalFilms:i,personalFilmsLoading:g,personalFilmsError:h,personalFilmsValidating:_}=I({user:"yqu",params:{fetchTime:a}}),S=()=>{const u={moviePageDisplayMode:x(m)};l(u)};return g?e.createElement(z,{count:4}):h?e.createElement("div",null,"Error Page"):e.createElement(e.Fragment,null,e.createElement(T,{toolbarProps:{position:"sticky",sx:{top:c?"56px":"64px"}}},e.createElement(o,{container:!0,xs:12,flexDirection:{xs:"row",sm:"row"},justifyContent:"space-between",alignItems:"center"},e.createElement(o,{xs:10,sm:4},e.createElement(t.Stack,{direction:"row",justifyContent:"start",alignItems:"center"},g&&e.createElement(M,{size:20}))),e.createElement(o,{xs:2,sm:8},e.createElement(t.Stack,{direction:"row",justifyContent:"flex-end",alignItems:"center"},e.createElement(t.Tooltip,{title:`Switch to ${x(m)}`},e.createElement(t.IconButton,{onClick:S},m===d.CARD?e.createElement(v,null):e.createElement(C,null))))))),e.createElement(t.Stack,{direction:"column",p:2,width:"100%"},e.createElement(o,{container:!0,disableEqualOverflow:!0,rowSpacing:4},i==null?void 0:i.map(u=>e.createElement(o,{key:u.fireId,xs:12,sm:4,smOffset:4},e.createElement(O,{...u}))))))}const x=a=>a?a===d.CARD?d.TABLE:d.CARD:d.CARD;export{K as default};
