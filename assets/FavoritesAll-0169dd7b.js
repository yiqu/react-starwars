import{R as e,G as i,a as t,g,Q as E,u as f,r as C,m as h,_ as x,i as k,U as F,b as d}from"./index-6f160e43.js";import{e as v,f as y,s as I}from"./favorites.selectors-028a202c.js";import"./index-071cd14f.js";import{H as S}from"./HourglassBottom-67d9f906.js";import{D as w}from"./DateDisplay-6d1e7cdf.js";function D(n){return n.loading?e.createElement(i,{xs:12,sm:12},e.createElement(t.Stack,{direction:"row",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},e.createElement(t.Skeleton,{variant:"text",sx:{fontSize:"2rem",width:"10rem"}}),e.createElement(t.Skeleton,{variant:"circular",width:40,height:40})),e.createElement(t.Skeleton,{variant:"rectangular",height:"30rem"})):e.createElement(e.Fragment,null,n.children)}var A=E();const b=g(A);function B({open:n,handleClose:o,title:l,message:a}){const s=(r,m)=>{o(!1)},c=r=>m=>{o(r)};return e.createElement(t.Dialog,{open:!!n,onClose:s},e.createElement(t.DialogTitle,{id:"confirm-dialog",mb:2,sx:{bgcolor:r=>r.palette.mode==="light"?"primary.light":null,color:r=>r.palette.mode==="light"?"#fff":null}},l??"Confirmation"),e.createElement(t.DialogContent,null,e.createElement(t.DialogContentText,{id:"confirm-dialog-description"},a??"Are you sure?")),e.createElement(t.DialogActions,null,e.createElement(t.Button,{onClick:c(!1),sx:{color:"gray"}},"Cancel"),e.createElement(t.Button,{onClick:c(!0),autoFocus:!0},"Confirm")))}function L({fav:n}){const o="yqu",l=f(),[a,s]=C.useState(!1),c=()=>{if(n.isCurrentFavorite){const u={...n},p=x(k,`swdb/:user/favorites/${n.fireId}.json`,{user:o});l(F({fav:u,favStatus:!1,url:p})).unwrap().then(H=>{})}},r=()=>{s(!0)},m=u=>{s(!1),u&&c()};return e.createElement(e.Fragment,null,e.createElement(t.Card,null,e.createElement(t.CardContent,null,e.createElement(t.Stack,{direction:"row",spacing:2},e.createElement(t.Box,null,e.createElement(t.CardMedia,{component:"img",alt:"poster",height:"100",image:`/assets/poster-img/${n.episodeId}.png`,sx:{backgroundColor:"#000",objectFit:"contain",borderRadius:"20px"}})),e.createElement(t.Stack,{direction:"column",spacing:.3},e.createElement(t.Typography,{variant:"h5",sx:{fontWeight:"500",fontFamily:"Poppins"},component:h.Link,to:`/movies/${n.filmId}`},"EP ",n.episodeId),e.createElement(t.Box,{color:"text.secondary"},e.createElement(t.Stack,{direction:"row",spacing:.3},e.createElement(t.Box,null,"Favorited"),e.createElement(w,{date:n.lastUpdated,fromNow:!0})))))),e.createElement(t.CardActions,null,e.createElement(t.Button,{variant:"text",startIcon:n.apiWorking?e.createElement(S,null):e.createElement(b,null),onClick:r,title:n.isCurrentFavorite?"Unfavorite this film":"",disabled:n.apiWorking,fullWidth:!0,color:"error"},"Remove"))),e.createElement(B,{handleClose:m,open:a,message:`Are you sure you want to remove EP ${n.episodeId} from favorites?`}))}function $(){const n=d(v),o=d(y);return!d(I)&&n.length<1?e.createElement(i,{container:!0},e.createElement(i,{md:4,xs:12},e.createElement(t.Typography,null,"No favorites found."))):e.createElement(D,{loading:o},e.createElement(i,{container:!0,spacing:2},n.map(a=>e.createElement(i,{md:2,xs:12,key:a.fireId},e.createElement(L,{fav:a})))))}export{$ as default};
