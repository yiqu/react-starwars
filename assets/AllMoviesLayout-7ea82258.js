import{r,l as f,_ as m,B as E,u as p,b as d,f as F,s as R,d as h,e as C,R as g,m as A}from"./index-6f160e43.js";import{u as L,h as b}from"./axios-8e83efed.js";import{g as v}from"./films.selectors-3c721b0d.js";import"./index-44bc3a7e.js";import"./favorites.selectors-028a202c.js";const S=({params:e={refetch:0}})=>{const[a,l]=r.useState(),t=r.useRef(new AbortController);f.useDeepCompareEffect(()=>{const i=m(E,"/films",{...e});t.current.abort(),t.current=new AbortController,l(i)},[e]);const{data:s,isValidating:o,error:u,isLoading:c}=L(()=>a||null,i=>b(i,t.current),{revalidateOnFocus:!1,revalidateIfStale:!0,keepPreviousData:!0,shouldRetryOnError:!0});return{allFilms:s==null?void 0:s.result,allFilmsLoading:c,allFilmsValidating:o,allFilmsError:u}},_=S;var n=(e=>(e.ERR_CANCELED="ERR_CANCELED",e))(n||{});function M(){const e=p(),a=d(v),{allFilms:l,allFilmsError:t,allFilmsLoading:s,allFilmsValidating:o}=_({params:a});return r.useEffect(()=>{e(F(l??[]))},[l,e]),r.useEffect(()=>{e(R(s))},[s,e]),r.useEffect(()=>{e(h(o))},[o,e]),r.useEffect(()=>{t&&t.code!==n.ERR_CANCELED&&e(C(t))},[t,e]),g.createElement(A.Outlet,null)}export{M as default};
