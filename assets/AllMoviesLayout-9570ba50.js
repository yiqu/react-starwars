import{r,l as f,_ as m,B as E,u as p,d,f as F,s as h,e as C,h as g,j as A,m as R}from"./index-00f0d532.js";import{u as L,h as v}from"./axios-d9959b0f.js";import{g as S}from"./films.selectors-f9ede51a.js";import"./index-0acd1d4d.js";import"./favorites.selectors-245598ef.js";const _=({params:e={refetch:0}})=>{const[a,l]=r.useState(),t=r.useRef(new AbortController);f.useDeepCompareEffect(()=>{const i=m(E,"/films",{...e});t.current.abort(),t.current=new AbortController,l(i)},[e]);const{data:s,isValidating:o,error:n,isLoading:c}=L(()=>a||null,i=>v(i,t.current),{revalidateOnFocus:!1,revalidateIfStale:!0,keepPreviousData:!0,shouldRetryOnError:!0});return{allFilms:s==null?void 0:s.result,allFilmsLoading:c,allFilmsValidating:o,allFilmsError:n}},b=_;var u=(e=>(e.ERR_CANCELED="ERR_CANCELED",e))(u||{});function M(){const e=p(),a=d(S),{allFilms:l,allFilmsError:t,allFilmsLoading:s,allFilmsValidating:o}=b({params:a});return r.useEffect(()=>{e(F(l??[]))},[l,e]),r.useEffect(()=>{e(h(s))},[s,e]),r.useEffect(()=>{e(C(o))},[o,e]),r.useEffect(()=>{t&&t.code!==u.ERR_CANCELED&&e(g(t))},[t,e]),A(R.Outlet,{})}export{M as default};
