import{R as e,a as t,y as E,z as b,g as m,A as v,C,D as k,E as I,F as T,H as S,r as g,L as w,J as M,K as P,M as _,l as F,m as D,G as u,T as x,N as A}from"./index-6f160e43.js";import{E as H}from"./ErrorPage-1875f54f.js";import"./index-071cd14f.js";import{u as f}from"./useIsMobile-6dae06e0.js";import{a as L}from"./index-44bc3a7e.js";import{P as W}from"./CircleProgress-c6639d1f.js";const q="_detailcard_1ldpg_1",B={detailcard:q},O=["release_date","director","producer","characters","planets","species","starships","vehicles"];function j({movieDetail:a}){const{isMobile:n}=f();return e.createElement(t.Card,{raised:!1,className:n?"":`${B.detailcard}`},e.createElement(t.CardMedia,{component:"img",alt:"poster",height:"400",image:`/assets/poster-img/${a.episode_id}.png`,title:"Film poster"}),e.createElement(t.CardContent,null,e.createElement(t.Stack,{direction:"column"},e.createElement(t.Typography,{sx:{fontFamily:"Poppins",fontWeight:"500"}},a.title),e.createElement(t.Typography,{sx:{fontWeight:"300"}},"EP ",a.episode_id)),e.createElement(t.Divider,{sx:{my:2}}),e.createElement(t.Stack,{direction:"column",sx:{fontSize:"12.5px",overflow:"auto"}},e.createElement("table",{style:{borderSpacing:"0px 5px"}},e.createElement("tbody",null,O.map(r=>e.createElement("tr",{key:r},e.createElement("td",{style:{width:"35%"}},e.createElement(t.Typography,{variant:"subtitle2"},E.startCase(r))),e.createElement("td",null,E.isArray(a[r])?a[r].length:a[r]))))))),e.createElement(t.CardActions,null))}function z({id:a,position:n="bottom"}){const[r,c]=e.useState(null),[p,d]=e.useState(null),i=()=>{c(null)},h=(l,o)=>{c(r?null:l),d(o)};return{popover:e.createElement(t.Popper,{id:a,open:!!r,anchorEl:r,placement:n},p),handlePopoverClose:i,handlePopoverOpen:h}}var N=b();const R=m(N);var V=v();const $=m(V);var G=C();const J=m(G);var Q=k();const U=m(Q);var X=I();const Y=m(X);var Z=T();const K=m(Z);var ee=S();const te=m(ee),re=["gender","birth_year","height","mass","hair_color","skin_color","eye_color"];function ae({url:a,onCloseClick:n}){const[r,c]=g.useState(!0),[p,d]=g.useState(),[i,h]=g.useState();return g.useEffect(()=>{const s=new AbortController;return c(!0),L.get(`${a}`,{signal:s.signal}).then(l=>{h(l.data.result.properties)}).catch(l=>{d(l.message)}).finally(()=>{c(!1)}),()=>{s.abort()}},[a]),r?e.createElement(y,{props:{alignItems:"center"}},e.createElement(W,{size:60})):p?e.createElement(y,null,"Error occurred: ",p):e.createElement(e.Fragment,null,i&&e.createElement(y,null,e.createElement(t.Stack,{direction:"column",spacing:0,width:"100%"},e.createElement(t.Stack,{direction:"row",justifyContent:"center",alignItems:"center",sx:{bgcolor:s=>s.palette.mode==="light"?"primary.main":"#2b4052",color:s=>s.palette.mode==="light"?"#fff":null},p:2},e.createElement(t.Typography,{variant:"h5"},i.name)),e.createElement(w,null,re.map(s=>e.createElement(M,{key:s,dense:!0},e.createElement(P,null,ne(s)),e.createElement(_,{primary:E.startCase(s),secondary:E.upperFirst(i[s])})))),e.createElement(t.Divider,null),e.createElement(t.Stack,null,e.createElement(t.Button,{variant:"text",onClick:n},"Close")))))}const y=({props:a,children:n})=>{const{isMobile:r}=f();return e.createElement(t.Box,null,e.createElement(t.Paper,{sx:{p:0,width:"100%",height:"100%",minHeight:"20rem",minWidth:r?"0rem":"20rem",display:"flex",justifyContent:"center",alignItems:"start",...a}},n))},ne=a=>({gender:e.createElement($,null),birth_year:e.createElement(J,null),height:e.createElement(R,null),mass:e.createElement(U,null),hair_color:e.createElement(Y,null),skin_color:e.createElement(K,null),eye_color:e.createElement(te,null)})[a];function le({columns:a,columnData:n,header:r}){const[c,p]=g.useState([]),{popover:d,handlePopoverClose:i,handlePopoverOpen:h}=z({id:"film-detail-popover"});f(),F.useDeepCompareEffect(()=>{p(se(n))},[n]);const s=l=>o=>{h(o.currentTarget,e.createElement(ae,{url:l,onCloseClick:i}))};return e.createElement(t.Stack,null,e.createElement(t.Box,{sx:{width:"100%"}},e.createElement(t.Paper,{sx:{width:"100%",mb:2},elevation:1},r,e.createElement(t.TableContainer,null,e.createElement(t.Table,{size:"medium"},e.createElement(t.TableHead,null,e.createElement(t.TableRow,null,a.map(l=>e.createElement(t.TableCell,{key:l,width:"50%"},E.upperFirst(l))))),e.createElement(t.TableBody,null,c.map(l=>e.createElement(t.TableRow,{key:l.detail,sx:{"&:last-child td, &:last-child th":{border:0},"&:nth-of-type(odd)":{backgroundColor:o=>o.palette.action.hover}}},Object.keys(c[0]).map(o=>e.createElement(t.TableCell,{component:"th",scope:"row",key:o},e.createElement(t.Box,{sx:{display:"flex"}},e.createElement(t.Typography,{title:l[o],sx:{cursor:"pointer"}},o==="id"?l[o]:e.createElement(t.Button,{variant:"outlined",size:"small",onClick:s(l.detail)},"View")))))))))))),d)}function se(a=[]){return a.map(n=>{const r=n.split("/");return{id:r[r.length-1],detail:n}})}const oe=["characters","planets","species","starships","vehicles"],de=()=>{const{isMobile:a}=f(),n=D.useLoaderData();return n?e.createElement(u,{xs:12,container:!0,sx:{p:2}},e.createElement(u,{xs:12,sm:8,xsOffset:0,smOffset:2},e.createElement(u,{xs:12,container:!0,justifyContent:"space-between",alignItems:"center",flexDirection:{xs:"column",sm:"row"}},e.createElement(u,{xs:12,sm:5,sx:{mb:a?2:0}},e.createElement(t.Stack,{direction:"column"},e.createElement(j,{movieDetail:n}))),e.createElement(u,{xs:12,sm:7},e.createElement(t.Stack,{direction:"column",spacing:2},e.createElement(x,{variant:"h4",sx:{fontWeight:500}},n.title),e.createElement(t.Divider,{sx:{my:2}}),e.createElement(t.Box,null,e.createElement(x,{variant:"body1"},n.opening_crawl)),oe.map(r=>e.createElement(le,{columns:["id","detail"],columnData:n[r],key:r,header:e.createElement(x,{sx:{display:"flex",justifyContent:"start",alignItems:"center",pt:2,pl:2},variant:"h5",component:"div"},e.createElement(A,{sx:{mr:1}}),e.createElement("div",{style:{fontFamily:"Poppins"}},E.startCase(r)))}))))))):e.createElement(u,{xs:12,sm:8,smOffset:2,xsOffset:1}," ",e.createElement(H,{reason:"Result is malformed",debug:"No properties"})," ")};export{de as default};
